<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tranquility Garden</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.wuliwala.net/"/>
  <updated>2016-04-11T03:42:10.000Z</updated>
  <id>http://blog.wuliwala.net/</id>
  
  <author>
    <name>arkii</name>
    <email>sqy6#163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SuperMicro Auto Deploy</title>
    <link href="http://blog.wuliwala.net/2016/04/07/supermicro_auto_deploy/"/>
    <id>http://blog.wuliwala.net/2016/04/07/supermicro_auto_deploy/</id>
    <published>2016-04-07T10:42:00.000Z</published>
    <updated>2016-04-11T03:42:10.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;SuperMicro-Auto-Deploy&quot;&gt;&lt;a href=&quot;#SuperMicro-Auto-Deploy&quot; class=&quot;headerlink&quot; title=&quot;SuperMicro Auto Deploy&quot;&gt;&lt;/a&gt;SuperMicro Auto Deploy&lt;/h2&gt;&lt;h3 id=&quot;SMCIPMITool-Usage&quot;&gt;&lt;a href=&quot;#SMCIPMITool-Usage&quot; class=&quot;headerlink&quot; title=&quot;SMCIPMITool Usage&quot;&gt;&lt;/a&gt;SMCIPMITool Usage&lt;/h3&gt;&lt;h4 id=&quot;Query-FRU-info&quot;&gt;&lt;a href=&quot;#Query-FRU-info&quot; class=&quot;headerlink&quot; title=&quot;Query FRU info&quot;&gt;&lt;/a&gt;Query FRU info&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SMCIPMITool 10.0.0.100 ADMIN ADMIN ipmi fru&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Getting FRU ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Chassis Type (CT)              = Other (01h)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Chassis Part Number (CP)       = CSE-217HQ-XXXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Chassis Serial Number (CS)     = C2170FE0XXXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Board mfg. Date/Time (BDT)     = 1996/01/01 00:00:00 (00 00 00)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Board Manufacturer Name (BM)   = Supermicro&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Board Product Name (BPN)       = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Board Serial Number (BS)       = VM15CSXXXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Board Part Number (BP)         = X10DRT-H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Board FRU File ID              = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product Manufacturer Name (PM) = Supermicro&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product Name (PN)              = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product PartModel Number (PPM) = SYS-2028TR-H72R&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product Version (PV)           = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product Serial Number (PS)     = S173440XXXXXXX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product Asset Tag (PAT)        = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Product FRU File ID            = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Set-Next-Boot-from-PXE&quot;&gt;&lt;a href=&quot;#Set-Next-Boot-from-PXE&quot; class=&quot;headerlink&quot; title=&quot;Set Next Boot from PXE&quot;&gt;&lt;/a&gt;Set Next Boot from PXE&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;:&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For bootoption index :&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1: PXE              2:  Hard-drive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3: CD/DVD           4:  Bios&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5: USB KEY          6:  USB HDD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7: USB Floppy       8:  USB CD/DVD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9: UEFI Hard-drive  10: UEFI CD/DVD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11: UEFI USB KEY    12: UEFI USB HDD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13: UEFI USB CD/DVD    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMCIPMITool 10.0.0.100 ADMIN ADMIN ipmi power bootoption 1 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SMCIPMITool 10.0.0.100 ADMIN ADMIN ipmi power reset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3.39.2 wsiso mount&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Use this &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; to mount an ISO file.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Usage:wsiso mount &amp;lt;IP&amp;gt; &amp;lt;path&amp;gt; [username] [password]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      IP: IP or domain name of share host&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      path: path to iso file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      username: username of share host (optional)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      password: password of share host (optional)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Ex 1: mount linux.iso&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       wsiso mount 192.168.1.100 /iso/linux.iso&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Ex 2: mount linux.iso with username and password&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       wsiso mount 192.168.1.100 /iso/linux.iso admin admin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      * Use one ISO file at a time. Make sure umount existing ISO before mount new ISO&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      * This &lt;span class=&quot;built_in&quot;&gt;command&lt;/span&gt; is available &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; X9 and X10 platform with SFT-OOB-LIC node&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    product key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;RAID-Configuration&quot;&gt;&lt;a href=&quot;#RAID-Configuration&quot; class=&quot;headerlink&quot; title=&quot;RAID Configuration&quot;&gt;&lt;/a&gt;RAID Configuration&lt;/h3&gt;&lt;p&gt;&lt;code&gt;&amp;lt;Ctrl&amp;gt; - &amp;lt;Y&amp;gt;&lt;/code&gt;&lt;br&gt;&lt;strong&gt;LSI Preboot CLI&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# pager 20 lines per page&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PDList a0 page20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# create one raid0 ld with one disk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C&lt;span class=&quot;built_in&quot;&gt;fg&lt;/span&gt;LdAdd r0 [252:0] a0&lt;span class=&quot;comment&quot;&gt;# create one raid1 ld with two disks&lt;/span&gt;C&lt;span class=&quot;built_in&quot;&gt;fg&lt;/span&gt;LdAdd r1 [252:0,252:1] a0C&lt;span class=&quot;built_in&quot;&gt;fg&lt;/span&gt;Foreign Clear a0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Full Screen Cast Below&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Battery Status: Not present                                                                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PCI SLOT ID LUN VENDOR    PRODUCT                   REVISION       CAPACITY                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-------- -- --- ------    -------                   --------       --------                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3               LSI       Supermicro SMC2208        3.240.05-2282  1024MB                           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3        7  0   SEAGATE   ST9146853SS               YS09           140014MB                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3        8  0   SEAGATE   ST9146853SS               YS09           140014MB                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 Virtual Drive(s) found &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; the host adapter.                                                       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 Virtual Drive(s) handled &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; BIOS                                                                  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Press &amp;lt;Ctrl&amp;gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;H&lt;/span&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; WebBIOS or press &amp;lt;Ctrl&amp;gt;&amp;lt;Y&amp;gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; Preboot &lt;span class=&quot;keyword&quot;&gt;CLI&lt;/span&gt;                                      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MegaPCLI SAS RAID Management Tool.                                                                  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Copyright&lt;/span&gt;(c) LSI Corporation, 2008.                                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Use&lt;/span&gt; -&lt;span class=&quot;keyword&quot;&gt;h&lt;/span&gt; -a&amp;lt;&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; controller specific &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;, where &lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt; is the controller index                          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Use&lt;/span&gt; -v -a&amp;lt;&lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt;&amp;gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; controller specific &lt;span class=&quot;keyword&quot;&gt;version&lt;/span&gt;, where &lt;span class=&quot;keyword&quot;&gt;n&lt;/span&gt; is the controller index                       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Use&lt;/span&gt; q to &lt;span class=&quot;keyword&quot;&gt;exit&lt;/span&gt; from $ prompt                                                                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Controller(s) Found                                                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HA-0 (Bus 3 DevFn 0)                                                                                &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$                                                                                                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$cfgforeign&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;clear&lt;/span&gt; a0                                                                                &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Foreign configuration 0 is cleared &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; controller 0.                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Foreign configuration 1 is cleared &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; controller 0.                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Exit&lt;/span&gt; Code = 0x0                                                                                     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$cfgldadd&lt;/span&gt; r1 [252:0,252:1] a0                                                                       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Adapter 0: Created VD 0                                                                             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Adapter 0: Configured the Adapter!!                                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Exit&lt;/span&gt; Code = 0x0                                                                                     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$q&lt;/span&gt;                                                                                                  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Press &amp;lt;CTL&amp;gt;&amp;lt;ALT&amp;gt;&amp;lt;DEL&amp;gt; to reboot.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;After Rebooting POST message will show&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;LSI&lt;/span&gt; MegaRAID SAS-MFI &lt;span class=&quot;keyword&quot;&gt;BIOS &lt;/span&gt;                                                                          &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;Version&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;38&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;00&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;Build &lt;/span&gt;October &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2012&lt;/span&gt;)                                                            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;Copyright&lt;/span&gt;(c) &lt;span class=&quot;number&quot;&gt;2012&lt;/span&gt; LSI Corporation                                                                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;HA&lt;/span&gt; -&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;Bus &lt;/span&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; Dev &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) Supermicro &lt;span class=&quot;keyword&quot;&gt;SMC2208 &lt;/span&gt;                                                             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;FW&lt;/span&gt; package: &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;0011&lt;/span&gt;                                                                            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Battery &lt;/span&gt;Status: Not present                                                                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;PCI&lt;/span&gt; SLOT ID LUN VENDOR    PRODUCT                   &lt;span class=&quot;keyword&quot;&gt;REVISION &lt;/span&gt;      CAPACITY                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-------- -- --- ------    -------                   --------       --------                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;               LSI       Supermicro &lt;span class=&quot;keyword&quot;&gt;SMC2208 &lt;/span&gt;       &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;240&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;05&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;2282&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;MB                           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;        &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;   SEAGATE   ST9146853SS               YS09           &lt;span class=&quot;number&quot;&gt;140014&lt;/span&gt;MB                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;        &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;   SEAGATE   ST9146853SS               YS09           &lt;span class=&quot;number&quot;&gt;140014&lt;/span&gt;MB                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;           &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;   LSI       Virtual Drive             RAID1          &lt;span class=&quot;number&quot;&gt;139236&lt;/span&gt;MB                         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; Virtual Drive(s) found on the host adapter.                                                       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; Virtual Drive(s) handled &lt;span class=&quot;keyword&quot;&gt;by &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;BIOS &lt;/span&gt;                                                                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;Press&lt;/span&gt; &amp;lt;Ctrl&amp;gt;&amp;lt;H&amp;gt; for WebBIOS or press &amp;lt;Ctrl&amp;gt;&amp;lt;Y&amp;gt; for Preboot CLI&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;issues&quot;&gt;&lt;a href=&quot;#issues&quot; class=&quot;headerlink&quot; title=&quot;issues&quot;&gt;&lt;/a&gt;issues&lt;/h3&gt;&lt;p&gt;错误信息为:&lt;br&gt;&lt;code&gt;PXE-E7B: Missing MTFTP server IP address&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;Cisco设备是PortFast&lt;br&gt;Huawei设备里是&lt;br&gt;临时关掉生成树&lt;br&gt;&lt;code&gt;stp disable&lt;/code&gt;&lt;br&gt;或者标记为边界端口&lt;br&gt;&lt;code&gt;stp edged-port enable&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;other-resources&quot;&gt;&lt;a href=&quot;#other-resources&quot; class=&quot;headerlink&quot; title=&quot;other resources&quot;&gt;&lt;/a&gt;other resources&lt;/h3&gt;&lt;h4 id=&quot;boot-ipxe&quot;&gt;&lt;a href=&quot;#boot-ipxe&quot; class=&quot;headerlink&quot; title=&quot;boot.ipxe&quot;&gt;&lt;/a&gt;boot.ipxe&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http://10.0.0.9/cgi-bin/pxe.py?mac=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;netX/mac&amp;#125;&lt;/span&gt;&amp;amp;manufacturer=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;manufacturer&amp;#125;&lt;/span&gt;&amp;amp;product=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;product&amp;#125;&lt;/span&gt;&amp;amp;serial=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;serial&amp;#125;&lt;/span&gt;&amp;amp;bserial=&lt;span class=&quot;variable&quot;&gt;$&amp;#123;smbios/board-serial:string&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;WS-Management&quot;&gt;&lt;a href=&quot;#WS-Management&quot; class=&quot;headerlink&quot; title=&quot;WS-Management&quot;&gt;&lt;/a&gt;WS-Management&lt;/h4&gt;&lt;p&gt;&lt;code&gt;wsman identify -h 10.0.0.100 -P 5985 -u ADMIN -p ADMIN&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;flashrom&quot;&gt;&lt;a href=&quot;#flashrom&quot; class=&quot;headerlink&quot; title=&quot;flashrom&quot;&gt;&lt;/a&gt;flashrom&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# flashrom-0.9.9 install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install -y zlib-devel libpciaccess-devel pciutils-devel libusb1-devel             &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make DESTDIR=/usr install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;Intel-BootUtil&quot;&gt;&lt;a href=&quot;#Intel-BootUtil&quot; class=&quot;headerlink&quot; title=&quot;Intel BootUtil&quot;&gt;&lt;/a&gt;Intel BootUtil&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install -y make gcc perl kernel-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./install &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bootutil64e &lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:&amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Intel(R) Ethernet Flash Firmware Utility&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BootUtil version 1.5.94.2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2003-2015 Intel Corporation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NIC= 1 MACAddress=0CC47AB4C12E&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NIC= 2 MACAddress=0CC47AB4C12F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Port Network Address Location Series  WOL Flash Firmware                Version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;==== =============== ======== ======= === ============================= =======&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  1   0CC47AB4C12E     1:00.0 Gigabit YES FLASH Not Present&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  2   0CC47AB4C12F     1:00.1 Gigabit NO  FLASH Not Present&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bootutil64e -nic 1 -saveimage -file 0CC47AB4C12E.rom&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bootutil64e -nic 1 -saveimage -file 80861521.rom&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;SerialNumber&quot;&gt;&lt;a href=&quot;#SerialNumber&quot; class=&quot;headerlink&quot; title=&quot;SerialNumber&quot;&gt;&lt;/a&gt;SerialNumber&lt;/h4&gt;&lt;p&gt;&lt;code&gt;dmidecode -s baseboard-serial-number&lt;/code&gt; instead of &lt;code&gt;dmidecode -s system-serial-number&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SuperMicro-Auto-Deploy&quot;&gt;&lt;a href=&quot;#SuperMicro-Auto-Deploy&quot; class=&quot;headerlink&quot; title=&quot;SuperMicro Auto Deploy&quot;&gt;&lt;/a&gt;SuperMicro Auto Depl
    
    </summary>
    
      <category term="Automatic" scheme="http://blog.wuliwala.net/categories/Automatic/"/>
    
    
      <category term="sysops" scheme="http://blog.wuliwala.net/tags/sysops/"/>
    
      <category term="ipmi" scheme="http://blog.wuliwala.net/tags/ipmi/"/>
    
      <category term="pxe" scheme="http://blog.wuliwala.net/tags/pxe/"/>
    
      <category term="dhcp" scheme="http://blog.wuliwala.net/tags/dhcp/"/>
    
  </entry>
  
  <entry>
    <title>Learning ElasticSearch</title>
    <link href="http://blog.wuliwala.net/2016/03/29/learning-elasticsearch/"/>
    <id>http://blog.wuliwala.net/2016/03/29/learning-elasticsearch/</id>
    <published>2016-03-29T02:42:00.000Z</published>
    <updated>2016-04-01T03:30:26.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Learning-ElasticSearch&quot;&gt;&lt;a href=&quot;#Learning-ElasticSearch&quot; class=&quot;headerlink&quot; title=&quot;Learning ElasticSearch&quot;&gt;&lt;/a&gt;Learning ElasticSearch&lt;/h2&gt;&lt;p&gt;最近在学习ElasticSearch，从底层的Lucene开始了解&lt;br&gt;特别推荐这两本书，非常非常感谢社区的贡献，有机会还是支持出版的纸质书籍&lt;br&gt;这篇文章等于是对这两本书阅读后做了摘要，方便零基础的用户快速上手ElasticSearch&lt;br&gt;&lt;a href=&quot;https://github.com/looly/elasticsearch-definitive-guide-cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Elasticsearch 权威指南（中文版）&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.gitbook.com/book/chenryn/kibana-guide-cn/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ELKstack 中文指南（ElasticSearch章节）&lt;/a&gt;  &lt;/p&gt;
&lt;h3 id=&quot;ES-vs-SQL&quot;&gt;&lt;a href=&quot;#ES-vs-SQL&quot; class=&quot;headerlink&quot; title=&quot;ES vs SQL&quot;&gt;&lt;/a&gt;ES vs SQL&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Relational DB&lt;/th&gt;
&lt;th&gt;Elasticsearch&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Databases&lt;/td&gt;
&lt;td&gt;Indices&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Tables&lt;/td&gt;
&lt;td&gt;Types&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Rows&lt;/td&gt;
&lt;td&gt;Documents&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Columns&lt;/td&gt;
&lt;td&gt;Fields&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Elasticsearch集群可以包含多个索引(indices)（数据库），每一个索引可以包含多个类型(types)（表），每一个类型包含多个文档(documents)（行），然后每个文档包含多个字段(Fields)（列）。  &lt;/p&gt;
&lt;h3 id=&quot;“索引”含义的区分&quot;&gt;&lt;a href=&quot;#“索引”含义的区分&quot; class=&quot;headerlink&quot; title=&quot;“索引”含义的区分&quot;&gt;&lt;/a&gt;“索引”含义的区分&lt;/h3&gt;&lt;p&gt;你可能已经注意到索引(index)这个词在Elasticsearch中有着不同的含义，所以有必要在此做一下区分:  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;索引（名词） 如上文所述，一个索引(index)就像是传统关系数据库中的数据库，它是相关文档存储的地方，index的复数是indices 或indexes。  &lt;/li&gt;
&lt;li&gt;索引（动词） 「索引一个文档」表示把一个文档存储到索引（名词）里，以便它可以被检索或者查询。这很像SQL中的INSERT关键字，差别是，如果文档已经存在，新的文档将覆盖旧的文档。  &lt;/li&gt;
&lt;li&gt;倒排索引 传统数据库为特定列增加一个索引，例如B-Tree索引来加速检索。Elasticsearch和Lucene使用一种叫做倒排索引(inverted index)的数据结构来达到相同目的。   &lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Excerise&quot;&gt;&lt;a href=&quot;#Excerise&quot; class=&quot;headerlink&quot; title=&quot;Excerise&quot;&gt;&lt;/a&gt;Excerise&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Ping &amp;amp; Server info&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http http://127.0.0.1:9200/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;cluster_name&quot;: &quot;elasticsearch&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;name&quot;: &quot;Goliath&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;status&quot;: 200, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;tagline&quot;: &quot;You Know, for Search&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;version&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;build_hash&quot;: &quot;c88f77ffc81301dfa9dfd81ca2232f09588bd512&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;build_snapshot&quot;: false, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;build_timestamp&quot;: &quot;2015-02-19T13:05:36Z&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;lucene_version&quot;: &quot;4.10.3&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;number&quot;: &quot;1.4.4&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;All rows&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &#39;http://localhost:9200/_count&#39;                   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;_shards&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;failed&quot;: 0, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;successful&quot;: 436, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;total&quot;: 436&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;count&quot;: 35672472&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;All indices&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &lt;span class=&quot;string&quot;&gt;&#39;localhost:9200/_cat/indices?v&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;health status index                pri rep docs&lt;span class=&quot;selector-class&quot;&gt;.count&lt;/span&gt; docs&lt;span class=&quot;selector-class&quot;&gt;.deleted&lt;/span&gt; store&lt;span class=&quot;selector-class&quot;&gt;.size&lt;/span&gt; pri&lt;span class=&quot;selector-class&quot;&gt;.store&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.size&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yellow open   &lt;span class=&quot;selector-class&quot;&gt;.kibana&lt;/span&gt;                &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;         &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;27.5&lt;/span&gt;kb         &lt;span class=&quot;number&quot;&gt;27.5&lt;/span&gt;kb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yellow open   logstash-&lt;span class=&quot;number&quot;&gt;2016.01&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;289193&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;170.8&lt;/span&gt;mb        &lt;span class=&quot;number&quot;&gt;170.8&lt;/span&gt;mb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yellow open   logstash-&lt;span class=&quot;number&quot;&gt;2016.03&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;597585&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;141.1&lt;/span&gt;mb        &lt;span class=&quot;number&quot;&gt;141.1&lt;/span&gt;mb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yellow open   logstash-&lt;span class=&quot;number&quot;&gt;2016.03&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;17&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;582696&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;138.5&lt;/span&gt;mb        &lt;span class=&quot;number&quot;&gt;138.5&lt;/span&gt;mb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yellow open   logstash-&lt;span class=&quot;number&quot;&gt;2016.02&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;304186&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;103.2&lt;/span&gt;mb        &lt;span class=&quot;number&quot;&gt;103.2&lt;/span&gt;mb &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yellow open   logstash-&lt;span class=&quot;number&quot;&gt;2016.02&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;number&quot;&gt;298755&lt;/span&gt;            &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;102.5&lt;/span&gt;mb        &lt;span class=&quot;number&quot;&gt;102.5&lt;/span&gt;mb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cluster health&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &#39;127.0.0.1:9200/_cluster/health?pretty&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;active_primary_shards&quot;: 436, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;active_shards&quot;: 436, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;cluster_name&quot;: &quot;elasticsearch&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;initializing_shards&quot;: 0, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;number_of_data_nodes&quot;: 1, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;number_of_nodes&quot;: 1, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;relocating_shards&quot;: 0, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;status&quot;: &quot;yellow&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;timed_out&quot;: false, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;unassigned_shards&quot;: 436&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Nodes list&lt;/p&gt;
&lt;figure class=&quot;highlight dns&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &#39;&lt;span class=&quot;number&quot;&gt;127.0.0.1&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9200&lt;/span&gt;/_cat/nodes&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;366d&lt;/span&gt;cee&lt;span class=&quot;number&quot;&gt;51992 172.17&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;5.127 78 80&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;21&lt;/span&gt; d * Goliath&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Task list&lt;/p&gt;
&lt;figure class=&quot;highlight accesslog&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &#39;http://&lt;span class=&quot;number&quot;&gt;127.0.0.1:9200&lt;/span&gt;/_cluster/pending_tasks&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;tasks&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;[]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Node health&lt;br&gt;&lt;strong&gt;jvm&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &#39;127.0.0.1:9200/_nodes/stats/jvm&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;cluster_name&quot;: &quot;elasticsearch&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;nodes&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;vwKzZrSrTDidFr-jtZdRjg&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;host&quot;: &quot;366dcee51992&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;ip&quot;: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;inet[/172.17.5.127:9300]&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;NONE&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ], &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;jvm&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;buffer_pools&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;direct&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;count&quot;: 1610, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;total_capacity_in_bytes&quot;: 39064123, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;used_in_bytes&quot;: 39064123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;mapped&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;count&quot;: 2656, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;total_capacity_in_bytes&quot;: 6260870265, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;used_in_bytes&quot;: 6260870265&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;gc&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;collectors&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;old&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;collection_count&quot;: 20469, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;collection_time_in_millis&quot;: 1804674&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;young&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;collection_count&quot;: 396171, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;collection_time_in_millis&quot;: 4463746&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;mem&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;heap_committed_in_bytes&quot;: 1037959168, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;heap_max_in_bytes&quot;: 1037959168, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;heap_used_in_bytes&quot;: 849427344, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;heap_used_percent&quot;: 81, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;non_heap_committed_in_bytes&quot;: 85303296, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;non_heap_used_in_bytes&quot;: 56807912, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;pools&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;old&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;max_in_bytes&quot;: 715849728, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;peak_max_in_bytes&quot;: 715849728, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;peak_used_in_bytes&quot;: 672561680, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;used_in_bytes&quot;: 602039528&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;survivor&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;max_in_bytes&quot;: 35782656, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;peak_max_in_bytes&quot;: 35782656, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;peak_used_in_bytes&quot;: 35782656, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;used_in_bytes&quot;: 6359176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;young&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;max_in_bytes&quot;: 286326784, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;peak_max_in_bytes&quot;: 286326784, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;peak_used_in_bytes&quot;: 286326784, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;used_in_bytes&quot;: 241028640&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;threads&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;count&quot;: 130, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;peak_count&quot;: 135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;timestamp&quot;: 1459242935482, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;uptime_in_millis&quot;: 2528035636&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;name&quot;: &quot;Goliath&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;timestamp&quot;: 1459242935482, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;transport_address&quot;: &quot;inet[/172.17.5.127:9300]&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;os&lt;/strong&gt;&lt;/p&gt;
 &lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &#39;127.0.0.1:9200/_nodes/stats/os&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;cluster_name&quot;: &quot;elasticsearch&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;nodes&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;vwKzZrSrTDidFr-jtZdRjg&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;host&quot;: &quot;366dcee51992&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;ip&quot;: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;inet[/172.17.5.127:9300]&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;NONE&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ], &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;name&quot;: &quot;Goliath&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;os&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;cpu&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;idle&quot;: 75, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;stolen&quot;: 0, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;sys&quot;: 2, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;usage&quot;: 17, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;user&quot;: 15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;load_average&quot;: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    3.23, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    2.33, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    2.27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ], &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;mem&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;actual_free_in_bytes&quot;: 5407027200, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;actual_used_in_bytes&quot;: 28110413824, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;free_in_bytes&quot;: 2586775552, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;free_percent&quot;: 16, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;used_in_bytes&quot;: 30930665472, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;used_percent&quot;: 83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;swap&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;free_in_bytes&quot;: 7885094912, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;used_in_bytes&quot;: 8892116992&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;timestamp&quot;: 1459245065474, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;uptime_in_millis&quot;: 21615006&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;timestamp&quot;: 1459245065474, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;transport_address&quot;: &quot;inet[/172.17.5.127:9300]&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Index info&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http http://127.0.0.1:9200/logstash-2016.03.29/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;logstash-2016.03.29&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;aliases&quot;: &amp;#123;&amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;mappings&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;_default_&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;_all&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;enabled&quot;: true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;dynamic_templates&quot;: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;string_fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;mapping&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;omit_norms&quot;: true, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;match&quot;: &quot;*&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;match_mapping_type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ], &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;properties&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;@version&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;geoip&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;dynamic&quot;: &quot;true&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;properties&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;location&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;geo_point&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;syslog&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;_all&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;enabled&quot;: true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;dynamic_templates&quot;: [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;string_fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;mapping&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;omit_norms&quot;: true, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;match&quot;: &quot;*&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;match_mapping_type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ], &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;properties&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;@timestamp&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;format&quot;: &quot;dateOptionalTime&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;date&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;@version&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;brief&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;count&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;geoip&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;dynamic&quot;: &quot;true&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;properties&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;location&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;geo_point&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;host&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;hostname&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;info&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;log_type&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;module&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;msg&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;oid&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;serverity&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;long&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;severity&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;status&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog5424_pri&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog_facility&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog_facility_code&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;long&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog_message&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog_program&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog_severity&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;syslog_severity_code&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;long&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;tags&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;timestamp&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;type&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;fields&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;raw&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;ignore_above&quot;: 256, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;index&quot;: &quot;not_analyzed&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;norms&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            &quot;enabled&quot;: false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;type&quot;: &quot;string&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;settings&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;index&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;creation_date&quot;: &quot;1459189864276&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;number_of_replicas&quot;: &quot;1&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;number_of_shards&quot;: &quot;5&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;refresh_interval&quot;: &quot;5s&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;uuid&quot;: &quot;qUZ_ZY3_RPOdhrdJ5mi32A&quot;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;version&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;created&quot;: &quot;1040499&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;warmers&quot;: &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;cat-接口的命令行使用&quot;&gt;&lt;a href=&quot;#cat-接口的命令行使用&quot; class=&quot;headerlink&quot; title=&quot;cat 接口的命令行使用&quot;&gt;&lt;/a&gt;cat 接口的命令行使用&lt;/h3&gt;&lt;p&gt;之前介绍的各种接口数据，其响应数据都是 JSON 格式，更适用于程序处理。对于我们日常运维，在 Linux 命令行终端环境来说，简单的分行和分列表格才是更方便的样式。为此，Elasticsearch 提供了 cat 接口。&lt;/p&gt;
&lt;p&gt;cat 接口可以读取各种监控数据，可用接口列表如下：&lt;/p&gt;
&lt;figure class=&quot;highlight groovy&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;allocation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;shards&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;shards/&amp;#123;index&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;nodes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;indices&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;indices/&amp;#123;index&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;segments&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;segments/&amp;#123;index&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;count&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;count/&amp;#123;index&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;recovery&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;recovery/&amp;#123;index&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;health&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;pending_tasks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;aliases&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;aliases/&amp;#123;alias&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;thread_pool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;plugins&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;fielddata&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;regexp&quot;&gt;/_cat/&lt;/span&gt;fielddata/&amp;#123;fields&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;增删改查&quot;&gt;&lt;a href=&quot;#增删改查&quot; class=&quot;headerlink&quot; title=&quot;增删改查&quot;&gt;&lt;/a&gt;增删改查&lt;/h3&gt;&lt;p&gt;增删改查是数据库的基础操作方法。ES 虽然不是数据库，但是很多场合下，都被人们当做一个文档型 NoSQL 数据库在使用，原因自然是因为在接口和分布式架构层面的相似性。虽然在 ELKstack 场景下，数据的写入和查询，分别由 Logstash 和 Kibana 代劳，作为测试、调研和排错时的基本功，还是需要了解一下 ES 的增删改查用法的。&lt;/p&gt;
&lt;h3 id=&quot;数据写入&quot;&gt;&lt;a href=&quot;#数据写入&quot; class=&quot;headerlink&quot; title=&quot;数据写入&quot;&gt;&lt;/a&gt;数据写入&lt;/h3&gt;&lt;p&gt;ES 的一大特点，就是全 RESTful 接口处理 JSON 请求。所以，数据写入非常简单：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XPOST http://127.0.0.1:9200/logstash-2015.06.21/testlog -d &#39;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;date&quot; : &quot;1434966686000&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;user&quot; : &quot;chenlin7&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;mesg&quot; : &quot;first message into Elasticsearch&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;命令返回响应结果为：&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;_index&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;logstash-2015.06.21&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_type&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;testlog&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_id&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;AU4ew3h2nBE6n0qcyVJK&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_version&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;created&quot;&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;数据获取&quot;&gt;&lt;a href=&quot;#数据获取&quot; class=&quot;headerlink&quot; title=&quot;数据获取&quot;&gt;&lt;/a&gt;数据获取&lt;/h3&gt;&lt;p&gt;“可以看到，在数据写入的时候，会返回该数据的 _id。这就是后续用来获取数据的关键：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;curl -XGET http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK&lt;/code&gt;&lt;br&gt;命令返回响应结果为：&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;_index&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;logstash-2015.06.21&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_type&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;testlog&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_id&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;AU4ew3h2nBE6n0qcyVJK&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_version&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;found&quot;&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_source&quot;&lt;/span&gt;:&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;date&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;1434966686000&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;user&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;chenlin7&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;mesg&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;first message into Elasticsearch&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个 _source 里的内容，正是之前写入的数据。&lt;/p&gt;
&lt;p&gt;如果觉得这个返回看起来有点太过麻烦，可以使用&lt;br&gt;&lt;code&gt;curl -XGET http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK/_source&lt;/code&gt;&lt;br&gt;来指明只获取源数据部分。&lt;/p&gt;
&lt;p&gt;更进一步的，如果你只想看数据中的一部分字段内容，可以使用&lt;br&gt;&lt;code&gt;curl -XGET http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK?fields=user,mesg&lt;/code&gt;&lt;br&gt;来指明获取字段，结果如下：&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;_index&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;logstash-2015.06.21&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_type&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;testlog&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_id&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;AU4ew3h2nBE6n0qcyVJK&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_version&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;found&quot;&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;fields&quot;&lt;/span&gt;:&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;user&quot;&lt;/span&gt;:[&lt;span class=&quot;string&quot;&gt;&quot;chenlin7&quot;&lt;/span&gt;],&lt;span class=&quot;attr&quot;&gt;&quot;mesg&quot;&lt;/span&gt;:[&lt;span class=&quot;string&quot;&gt;&quot;first message into Elasticsearch&quot;&lt;/span&gt;]&amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;数据删除&quot;&gt;&lt;a href=&quot;#数据删除&quot; class=&quot;headerlink&quot; title=&quot;数据删除&quot;&gt;&lt;/a&gt;数据删除&lt;/h3&gt;&lt;p&gt;要删除数据，修改发送的 HTTP 请求方法为 DELETE 即可：&lt;br&gt;&lt;code&gt;curl -XDELETE http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK&lt;/code&gt;&lt;br&gt;删除不单针对单条数据，还可以删除整个 type，乃至整个索引。甚至可以用通配符。&lt;br&gt;&lt;code&gt;curl -XDELETE http://127.0.0.1:9200/logstash-2015.06.0*&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;数据更新&quot;&gt;&lt;a href=&quot;#数据更新&quot; class=&quot;headerlink&quot; title=&quot;数据更新&quot;&gt;&lt;/a&gt;数据更新&lt;/h3&gt;&lt;p&gt;已经写过的数据，同样还是可以修改的。有两种办法，一种是全量提交，即指明 _id 再发送一次写入请求。&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XPOST http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK -d &#39;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;date&quot; : &quot;1434966686000&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;user&quot; : &quot;chenlin7&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;mesg&quot; &quot; &quot;first message into Elasticsearch but version 2&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;另一种是局部更新，使用 /_update 接口：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XPOST &#39;http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK/_update&#39; -d &#39;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;doc&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;user&quot; : &quot;someone&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XPOST &#39;http://127.0.0.1:9200/logstash-2015.06.21/testlog/AU4ew3h2nBE6n0qcyVJK/_update&#39; -d &#39;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;script&quot; : &quot;ctx._source.user = \&quot;someone\&quot;&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;搜索请求&quot;&gt;&lt;a href=&quot;#搜索请求&quot; class=&quot;headerlink&quot; title=&quot;搜索请求&quot;&gt;&lt;/a&gt;搜索请求&lt;/h3&gt;&lt;p&gt;上节介绍的，都是针对单条数据的操作。在 ES 环境中，更多的是搜索和聚合请求。在之前章节中，我们也介绍过数据获取和数据搜索的一点区别：==刚写入的数据，可以通过 translog 立刻获取；但是却要等到 refresh 成为一个 segment 后，才能被搜索到。==本节就介绍一下 ES 的搜索语法。&lt;/p&gt;
&lt;h3 id=&quot;全文搜索&quot;&gt;&lt;a href=&quot;#全文搜索&quot; class=&quot;headerlink&quot; title=&quot;全文搜索&quot;&gt;&lt;/a&gt;全文搜索&lt;/h3&gt;&lt;p&gt;ES 对搜索请求，有简易语法和完整语法两种方式。简易语法作为以后在 Kibana 上最常用的方式，一定是需要学会的。而在命令行里，我们可以通过最简单的方式来做到。还是上节输入的数据：&lt;br&gt;&lt;code&gt;curl -XGET http://127.0.0.1:9200/logstash-2015.06.21/testlog/_search?q=first&lt;/code&gt;&lt;br&gt;可以看到返回结果：&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;took&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;240&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;timed_out&quot;&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_shards&quot;&lt;/span&gt;:&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;total&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;successful&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;failed&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&amp;#125;,&lt;span class=&quot;attr&quot;&gt;&quot;hits&quot;&lt;/span&gt;:&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;total&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;max_score&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0.11506981&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;hits&quot;&lt;/span&gt;:[&amp;#123;&lt;span class=&quot;attr&quot;&gt;&quot;_index&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;logstash-2015.06.21&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_type&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;testlog&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_id&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;AU4ew3h2nBE6n0qcyVJK&quot;&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_score&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;0.11506981&lt;/span&gt;,&lt;span class=&quot;attr&quot;&gt;&quot;_source&quot;&lt;/span&gt;:&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;date&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;1434966686000&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;user&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;chenlin7&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;mesg&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;first message into Elasticsearch&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&amp;#125;]&amp;#125;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;还可以用下面语句搜索，结果是一样的。&lt;br&gt;&lt;code&gt;curl -XGET http://127.0.0.1:9200/logstash-2015.06.21/testlog/_search?q=user:&amp;quot;chenlin7&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Excerpt From: 饶琛琳. “ELKstack 中文指南.” iBooks. &lt;/p&gt;
&lt;h3 id=&quot;querystring-语法&quot;&gt;&lt;a href=&quot;#querystring-语法&quot; class=&quot;headerlink&quot; title=&quot;querystring 语法&quot;&gt;&lt;/a&gt;querystring 语法&lt;/h3&gt;&lt;p&gt;&lt;code&gt;curl -XGET http://127.0.0.1:9200/logstash-2016.03.29/_search?q=first&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;上例中，&lt;code&gt;?q=&lt;/code&gt;后面写的，就是 querystring 语法。鉴于这部分内容会在 Kibana 上经常使用，这里详细解析一下语法：  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;全文检索&lt;/strong&gt;：直接写搜索的单词，如上例中的 &lt;code&gt;first&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;单字段的全文检索&lt;/strong&gt;：在搜索单词之前加上字段名和冒号，比如如果知道单词 first 肯定出现在 mesg 字段，可以写作 &lt;code&gt;mesg:first&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;单字段的精确检索&lt;/strong&gt;：在搜索单词前后加双引号，比如 &lt;code&gt;user:&amp;quot;chenlin7&amp;quot;&lt;/code&gt;；&lt;br&gt;多个检索条件的组合：可以使用 NOT, AND 和 OR 来组合检索，注意必须是大写。比如 &lt;code&gt;user:(&amp;quot;chenlin7&amp;quot; OR &amp;quot;chenlin&amp;quot;) AND NOT mesg:first&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;字段是否存在&lt;/strong&gt;：&lt;code&gt;_exists_:user&lt;/code&gt; 表示要求 user 字段存在，&lt;code&gt;_missing_:user&lt;/code&gt; 表示要求 user 字段不存在；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;通配符&lt;/strong&gt;：用 ? 表示单字母，&lt;em&gt; 表示任意个字母。比如 `fir?t mess&lt;/em&gt;`；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;正则&lt;/strong&gt;：需要比通配符更复杂一点的表达式，可以使用正则。比如 &lt;code&gt;mesg:/mes{2}ages?/&lt;/code&gt;。注意 ES 中正则性能很差，而且支持的功能也不是特别强大，尽量不要使用。ES 支持的正则语法见：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html#regexp-syntax&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;query-dsl-regexp-query.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;近似搜索&lt;/strong&gt;：用 ~ 表示搜索单词可能有一两个字母写的不对，请 ES 按照相似度返回结果。比如 &lt;code&gt;frist~&lt;/code&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;范围搜索&lt;/strong&gt;：对数值和时间，ES 都可以使用范围搜索，比如：&lt;code&gt;rtt:&amp;gt;300&lt;/code&gt;，&lt;code&gt;date:[&amp;quot;now-6h&amp;quot; TO &amp;quot;now&amp;quot;}&lt;/code&gt; 等。其中，&lt;code&gt;[]&lt;/code&gt; 表示端点数值包含在范围内，&lt;code&gt;{}&lt;/code&gt; 表示端点数值不包含在范围内；&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;完整语法&quot;&gt;&lt;a href=&quot;#完整语法&quot; class=&quot;headerlink&quot; title=&quot;完整语法&quot;&gt;&lt;/a&gt;完整语法&lt;/h3&gt;&lt;p&gt;ES 支持各种类型的检索请求，除了可以用 querystring 语法表达的以外，还有很多其他类型，具体列表和示例可参见：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-queries.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;query-dsl-regexp-query.html&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;作为最简单和常用的示例，这里展示一下 term query 的写法，相当于 querystring 语法中的 &lt;code&gt;user:&amp;quot;chenlin7&amp;quot;&lt;/code&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -XGET http://127.0.0.1:9200/_search -d &#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &quot;query&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;term&quot;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;user&quot;: &quot;chenlin7&quot; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;聚合请求&quot;&gt;&lt;a href=&quot;#聚合请求&quot; class=&quot;headerlink&quot; title=&quot;聚合请求&quot;&gt;&lt;/a&gt;聚合请求&lt;/h3&gt;&lt;p&gt;在检索范围确定之后，ES 还支持对结果集做聚合查询，返回更直接的聚合统计结果。在 ES 1.0 版本之前，这个接口叫 Facet，1.0 版本之后，这个接口改为 Aggregation。&lt;/p&gt;
&lt;p&gt;Kibana 分别在 v3 中使用 Facet，v4 中使用 Aggregation。不过总的来说，Aggregation 是 Facet 接口的强化升级版本，我们直接了解 Aggregation 即可。本书后续章节也会介绍如何在 Kibana 的 v3 版本中使用 aggregation 接口做二次开发。&lt;/p&gt;
&lt;p&gt;Aggregation 分为 bucket 和 metric 两种，分别用作词元划分和数值计算。而其中的 bucket aggregation，还支持在自身结果集的基础上，叠加新的 aggregation。这就是 aggregation 比 facet 最领先的地方。比如实现一个时序百分比统计，在 facet 接口就无法直接完成，而在 aggregation 接口就很简单了：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# curl -XPOST &#39;http://127.0.0.1:9200/logstash-2015.06.22/_search?size=0&amp;amp;pretty&#39; -d&#39;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &quot;aggs&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &quot;percentile_over_time&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;date_histogram&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;field&quot;    : &quot;@timestamp&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;interval&quot; : &quot;1h&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &quot;aggs&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &quot;percentile_one_time&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &quot;percentiles&quot; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &quot;field&quot; : &quot;requesttime&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;得到结果如下：&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;took&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;151595&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;timed_out&quot;&lt;/span&gt; : &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;_shards&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;total&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;81&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;successful&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;81&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;failed&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;hits&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;total&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;3307142043&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;max_score&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hits&quot;&lt;/span&gt; : [ ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;aggregations&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;percentile_over_time&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;attr&quot;&gt;&quot;buckets&quot;&lt;/span&gt; : [ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;key_as_string&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;22/Jun/2015:22:00:00 +0000&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;key&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1435010400000&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;doc_count&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;459273981&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;percentile_one_time&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;attr&quot;&gt;&quot;values&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;1.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.004&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;5.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.006&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;25.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.023&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;50.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.035&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;75.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.08774675719725569&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;95.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.25732934416125663&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;99.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.7508899754871812&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;key_as_string&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;23/Jun/2015:00:00:00 +0000&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;key&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1435017600000&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;doc_count&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;768620219&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;percentile_one_time&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;attr&quot;&gt;&quot;values&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;1.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.004&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;5.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.007000000000000001&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;25.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.025&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;50.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.03987809503972864&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;75.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.10297843567746187&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;95.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.30047269327062875&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;99.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1.015495933753329&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;, &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;key_as_string&quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&quot;23/Jun/2015:02:00:00 +0000&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;key&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1435024800000&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;doc_count&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;849467060&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attr&quot;&gt;&quot;percentile_one_time&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;attr&quot;&gt;&quot;values&quot;&lt;/span&gt; : &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;1.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.004&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;5.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.008&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;25.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.027000000000000003&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;50.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.0439999899006102&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;75.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.1160416197625958&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;95.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;0.3383140614483838&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;attr&quot;&gt;&quot;99.0&quot;&lt;/span&gt; : &lt;span class=&quot;number&quot;&gt;1.0275839684542212&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ES 目前能支持的聚合请求列表，参见：&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;search-aggregations.html&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;GC&quot;&gt;&lt;a href=&quot;#GC&quot; class=&quot;headerlink&quot; title=&quot;GC&quot;&gt;&lt;/a&gt;GC&lt;/h3&gt;&lt;p&gt;对不了解 JVM 的 GC 的读者，这里先介绍一下 GC(垃圾收集)以及 GC 对 Elasticsearch 的影响。&lt;/p&gt;
&lt;p&gt;Java is a garbage-collected language, which means that the programmer does not manually manage memory allocation and deallocation. The programmer simply writes code, and the Java Virtual Machine (JVM) manages the process of allocating memory as needed, and then later cleaning up that memory when no longer needed. Java 是一个自动垃圾收集的编程语言，启动 JVM 虚拟机的时候，会分配到固定大小的内存块，这个块叫做 heap(堆)。JVM 会把 heap 分成两个组：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Young 新实例化的对象所分配的空间。这个空间一般来说只有 100MB 到 500MB 大小。Young 空间又分为两个 survivor(幸存)空间。当 Young 空间满，就会发生一次 young gc，还存活的对象，就被移入幸存空间里，已失效的对象则被移除。&lt;/li&gt;
&lt;li&gt;Old 老对象存储的空间。这些对象应该是长期存活而且在较长一段时间内不会变化的内容。“这个空间会大很多，在 ES 来说，一节点上可能就有 30GB 内存是这个空间。前面提到的 young gc 中，如果某个对象连续多次幸存下来，就会被移进 Old 空间内。而等到 Old 空间满，就会发生一次 old gc，把失效对象移除。&lt;br&gt;听起来很美好的样子，但是这些都是有代价的！在 GC 发生的时候，JVM 需要暂停程序运行，以便自己追踪对象图收集全部失效对象。在这期间，其他一切都不会继续运行。请求没有响应，ping 没有应答，分片不会分配……&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当然，young gc 一般来说执行极快，没太大影响。但是 old 空间那么大，稍慢一点的 gc 就意味着程序几秒乃至十几秒的不可用，这太危险了。&lt;/p&gt;
&lt;p&gt;JVM 本身对 gc 算法一直在努力优化，Elasticsearch 也尽量复用内部对象，复用网络缓冲，然后还提供像 Doc Values 这样的特性。但不管怎么说，gc 性能总是我们需要密切关注的数据，因为它是集群稳定性最大的影响因子。&lt;/p&gt;
&lt;p&gt;如果你的 ES 集群监控里发现经常有很耗时的 GC，说明集群负载很重，内存不足。严重情况下，这些 GC 导致节点无法正确响应集群之间的 ping ，可能就直接从集群里退出了。然后数据分片也随之在集群中重新迁移，引发更大的网络和磁盘 IO，正常的写入和搜索也会受到影响。&lt;/p&gt;
&lt;h3 id=&quot;查询慢&quot;&gt;&lt;a href=&quot;#查询慢&quot; class=&quot;headerlink&quot; title=&quot;查询慢&quot;&gt;&lt;/a&gt;查询慢&lt;/h3&gt;&lt;p&gt;更常见的可能，是集群存储长期数据导致索引映射数据确实大到了 master 节点内存不足以快速处理的地步。&lt;/p&gt;
&lt;p&gt;这时候，根据实际情况，可以有以下几种选择：&lt;/p&gt;
&lt;p&gt;索引就是特别多：给 master 加内存。&lt;br&gt;索引里字段太多：改用 nested object 方式节省字段数量。&lt;br&gt;索引多到内存就是不够了：把一部分数据拆出来另一个集群。&lt;/p&gt;
&lt;h3 id=&quot;Web-Console&quot;&gt;&lt;a href=&quot;#Web-Console&quot; class=&quot;headerlink&quot; title=&quot;Web Console&quot;&gt;&lt;/a&gt;Web Console&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/lmenezes/elasticsearch-kopf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;elasticsearch-kopf&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Learning-ElasticSearch&quot;&gt;&lt;a href=&quot;#Learning-ElasticSearch&quot; class=&quot;headerlink&quot; title=&quot;Learning ElasticSearch&quot;&gt;&lt;/a&gt;Learning ElasticSear
    
    </summary>
    
      <category term="search" scheme="http://blog.wuliwala.net/categories/search/"/>
    
    
      <category term="dev" scheme="http://blog.wuliwala.net/tags/dev/"/>
    
      <category term="elk" scheme="http://blog.wuliwala.net/tags/elk/"/>
    
      <category term="nosql" scheme="http://blog.wuliwala.net/tags/nosql/"/>
    
      <category term="search" scheme="http://blog.wuliwala.net/tags/search/"/>
    
  </entry>
  
  <entry>
    <title>segmentfault「我是工具控」分享</title>
    <link href="http://blog.wuliwala.net/2016/03/19/segmentfault-tools-sharing/"/>
    <id>http://blog.wuliwala.net/2016/03/19/segmentfault-tools-sharing/</id>
    <published>2016-03-19T09:42:00.000Z</published>
    <updated>2016-03-21T07:07:08.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;segmentfault-我是工具控-分享&quot;&gt;&lt;a href=&quot;#segmentfault-我是工具控-分享&quot; class=&quot;headerlink&quot; title=&quot;segmentfault[我是工具控]分享&quot;&gt;&lt;/a&gt;segmentfault[我是工具控]分享&lt;/h2&gt;&lt;p&gt; &lt;strong&gt;运维团队中的开发，4年运维工作经验，去年转开发。主要开发语言python，偶尔写shell、javascript.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我的工具箱可能跟别人不太一样&lt;br&gt;大家装机必备的就不提了&lt;/p&gt;
&lt;h3 id=&quot;命令行工具&quot;&gt;&lt;a href=&quot;#命令行工具&quot; class=&quot;headerlink&quot; title=&quot;命令行工具&quot;&gt;&lt;/a&gt;命令行工具&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ag&lt;/strong&gt; 搜索代码炒鸡快！&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;httpie&lt;/strong&gt; 人类用的http测试工具&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;jq&lt;/strong&gt; 格式化json用的，跟&lt;code&gt;python -m json.tool&lt;/code&gt;相比，是彩色的&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cowsay&lt;/strong&gt; &lt;strong&gt;lolcat&lt;/strong&gt; 好玩的，不解释&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;生活-效率&quot;&gt;&lt;a href=&quot;#生活-效率&quot; class=&quot;headerlink&quot; title=&quot;生活/效率&quot;&gt;&lt;/a&gt;生活/效率&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Keynote&lt;/strong&gt; 特别喜欢苹果的这款产品，简洁易用，码农也能做出很好的幻灯片。曾用它做演讲稿，从产品、前端那里赢得3次分享、项目评比冠军。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MacDown&lt;/strong&gt; 以前用Mou，后来发现MacDown，代码着色要比Mou好很多，配合&lt;strong&gt;Hexo&lt;/strong&gt;，也能用来写博客。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;eWallet&lt;/strong&gt; 管理密码的，从windows就开始用，Mac平台也有。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MindNode&lt;/strong&gt; 看图，不解释&lt;img src=&quot;/images/2016/03/19/mindnode.png&quot; alt=&quot;mindnode&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;编辑器&quot;&gt;&lt;a href=&quot;#编辑器&quot; class=&quot;headerlink&quot; title=&quot;编辑器&quot;&gt;&lt;/a&gt;编辑器&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MacVim&lt;/strong&gt;今年开始学习，平时一般用它，写写shell脚本、python小程序；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Atom&lt;/strong&gt;项目用它，写前端不要太爽。&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;TextMate&lt;/strong&gt;&lt;/em&gt; 刚从windows换到Mac的时候非常怀念极轻量的&lt;strong&gt;Editplus&lt;/strong&gt;，用了一阵，也还不错，今年主要学习vim，所以不用了。&lt;/li&gt;
&lt;li&gt;我不用 &lt;strong&gt;oh~my~zsh&lt;/strong&gt; 我用&lt;strong&gt;bash-it&lt;/strong&gt; ，因为做了4年运维，对bash较熟，用过oh~my~zsh，感觉各种行为好怪异，简直无法愉快玩耍。&lt;br&gt;自己改的bash主题&lt;img src=&quot;/images/2016/03/19/bash-it.png&quot; alt=&quot;bash-it&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;vim 插件，一天可是说不完的。。。&lt;/p&gt;
&lt;figure class=&quot;highlight sml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;VundleVim&lt;/span&gt;/&lt;span class=&quot;type&quot;&gt;Vundle&lt;/span&gt;.vim&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;Valloric&lt;/span&gt;/&lt;span class=&quot;type&quot;&gt;YouCompleteMe&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;scrooloose&lt;/span&gt;/nerdtree&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;scrooloose&lt;/span&gt;/nerdcommenter&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;scrooloose&lt;/span&gt;/syntastic&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;vim&lt;/span&gt;-airline/vim-airline&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;vim&lt;/span&gt;-airline/vim-airline-themes&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;vim&lt;/span&gt;-scripts/indentpython.vim&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;nvie&lt;/span&gt;/vim-flake8&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;Xuyuanp&lt;/span&gt;/nerdtree-git-plugin&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;xolox&lt;/span&gt;/vim-misc&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;xolox&lt;/span&gt;/vim-session&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;Plugin&lt;/span&gt; &lt;span class=&quot;symbol&quot;&gt;&#39;Chiel92&lt;/span&gt;/vim-autoformat&#39;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Atom插件&lt;/p&gt;
&lt;figure class=&quot;highlight vim&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;atom-beautify&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;atom-&lt;span class=&quot;keyword&quot;&gt;sync&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;color-picker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;file&lt;/span&gt;-icons&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git-control&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git-status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;linter&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;linter-jshint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;linter-pep8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;linter-&lt;span class=&quot;keyword&quot;&gt;python&lt;/span&gt;-pep8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;minimap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;python&lt;/span&gt;-tools&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tree-&lt;span class=&quot;keyword&quot;&gt;view&lt;/span&gt;-git-status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;vim&lt;/span&gt;-&lt;span class=&quot;keyword&quot;&gt;mode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;工位无码图&quot;&gt;&lt;a href=&quot;#工位无码图&quot; class=&quot;headerlink&quot; title=&quot;工位无码图&quot;&gt;&lt;/a&gt;工位无码图&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2016/03/19/seat.jpeg&quot; alt=&quot;工位无码图&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文参与了 SegmentFault&lt;a href=&quot;https://segmentfault.com/a/1190000004537274&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;「我是工具控」&lt;/a&gt;分享，如果你也手持利器，那就一起来分享吧。&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;segmentfault-我是工具控-分享&quot;&gt;&lt;a href=&quot;#segmentfault-我是工具控-分享&quot; class=&quot;headerlink&quot; title=&quot;segmentfault[我是工具控]分享&quot;&gt;&lt;/a&gt;segmentfault[我是工具控]分享&lt;/
    
    </summary>
    
    
      <category term="dev" scheme="http://blog.wuliwala.net/tags/dev/"/>
    
      <category term="tools" scheme="http://blog.wuliwala.net/tags/tools/"/>
    
  </entry>
  
  <entry>
    <title>Migration From Subversion(svn) to Git</title>
    <link href="http://blog.wuliwala.net/2016/03/14/migrate-to-git-from-svn/"/>
    <id>http://blog.wuliwala.net/2016/03/14/migrate-to-git-from-svn/</id>
    <published>2016-03-14T11:01:00.000Z</published>
    <updated>2016-03-14T11:13:16.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;migration-from-subversion-svn-to-git&quot;&gt;&lt;a href=&quot;#migration-from-subversion-svn-to-git&quot; class=&quot;headerlink&quot; title=&quot;migration from subversion(svn) to git&quot;&gt;&lt;/a&gt;migration from subversion(svn) to git&lt;/h2&gt;&lt;p&gt;git officiall documents&lt;br&gt;&lt;a href=&quot;https://git-scm.com/docs/git-svn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://git-scm.com/docs/git-svn&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://git-scm.com/book/en/v2/Git-and-Other-Systems-Migrating-to-Git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://git-scm.com/book/en/v2/Git-and-Other-Systems-Migrating-to-Git&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://git-scm.com/book/zh/v2/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E4%BD%9C%E4%B8%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84-Git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://git-scm.com/book/zh/v2/Git-与其他系统-作为客户端的-Git&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;install the latest git  &lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install subversion subversion-perl perl-TermReadKey curl-devel expat-devel gettext-devel openssl-devel zlib-devel asciidoc xmlto docbook2x docbook2X&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://www.kernel.org/pub/software/scm/git/git-2.7.3.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xvf git-2.7.3.tar.gz &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; git-2.7.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make configure&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/git2.7.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make -j8 all doc info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/git2.7.3/bin/git /usr/bin/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim ~/.subversion/servers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# let store-passwords = yes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; --username dev https://svn.yourdomain.com/yourrepo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; yourrepo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 首次 first time&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git branch &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git show-ref&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# push to gitlab server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote add origin ssh://git@gitlab.yourdomain.com/svn/yourrepo.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push -u origin master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 更新 update&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git svn fetch &amp;amp;&amp;amp; git svn rebase&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;migration-from-subversion-svn-to-git&quot;&gt;&lt;a href=&quot;#migration-from-subversion-svn-to-git&quot; class=&quot;headerlink&quot; title=&quot;migration from subve
    
    </summary>
    
    
      <category term="dev" scheme="http://blog.wuliwala.net/tags/dev/"/>
    
      <category term="git" scheme="http://blog.wuliwala.net/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Searchcode Server Community Deploy</title>
    <link href="http://blog.wuliwala.net/2016/03/08/searchcode-server-community-deploy/"/>
    <id>http://blog.wuliwala.net/2016/03/08/searchcode-server-community-deploy/</id>
    <published>2016-03-08T07:01:00.000Z</published>
    <updated>2016-04-13T08:49:28.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Searchcode-Server-Community-Deploy&quot;&gt;&lt;a href=&quot;#Searchcode-Server-Community-Deploy&quot; class=&quot;headerlink&quot; title=&quot;Searchcode Server Community Deploy&quot;&gt;&lt;/a&gt;Searchcode Server Community Deploy&lt;/h1&gt;&lt;h2 id=&quot;introduction&quot;&gt;&lt;a href=&quot;#introduction&quot; class=&quot;headerlink&quot; title=&quot;introduction&quot;&gt;&lt;/a&gt;introduction&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://searchcode.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://searchcode.com&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;query-syntax&quot;&gt;&lt;a href=&quot;#query-syntax&quot; class=&quot;headerlink&quot; title=&quot;query syntax&quot;&gt;&lt;/a&gt;query syntax&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://searchcode.com/#jumbo-examples&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://searchcode.com/#jumbo-examples&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;requirement&quot;&gt;&lt;a href=&quot;#requirement&quot; class=&quot;headerlink&quot; title=&quot;requirement&quot;&gt;&lt;/a&gt;requirement&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Linux (in this example, I’m using CentOS6)  &lt;/li&gt;
&lt;li&gt;JRE 8u65 &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/archive-139210.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.oracle.com/technetwork/java/javase/archive-139210.html&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;searchcode-server-community 1.0.0 &lt;a href=&quot;https://searchcode.com/static/searchcode-server-community.tar.gz&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://searchcode.com/static/searchcode-server-community.tar.gz&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;installation&quot;&gt;&lt;a href=&quot;#installation&quot; class=&quot;headerlink&quot; title=&quot;installation&quot;&gt;&lt;/a&gt;installation&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# download jre package from java archive website&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rpm -ivh jre-8u65-linux-x64.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://searchcode.com/static/searchcode-server-community.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xf searchcode-server-community.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;searchcode-server-community/release&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java -jar searchcode-1.0.0.jar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;visit &lt;a href=&quot;http://yourserverip:8080/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://yourserverip:8080/&lt;/a&gt;&lt;/strong&gt;  &lt;/p&gt;
&lt;h2 id=&quot;use-my-docker-image&quot;&gt;&lt;a href=&quot;#use-my-docker-image&quot; class=&quot;headerlink&quot; title=&quot;use my docker image&quot;&gt;&lt;/a&gt;use my docker image&lt;/h2&gt;&lt;h3 id=&quot;fresh-image-auto-build-and-keep-fresh-depend-on-author’s-api&quot;&gt;&lt;a href=&quot;#fresh-image-auto-build-and-keep-fresh-depend-on-author’s-api&quot; class=&quot;headerlink&quot; title=&quot;fresh image auto-build and keep fresh, depend on author’s api&quot;&gt;&lt;/a&gt;fresh image auto-build and keep fresh, depend on author’s api&lt;/h3&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -p 8080:8080 &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; docker.io/arkii/searchcode-server-community&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;run image directly  &lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -p 8080:8080 &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; docker.io/arkii/searchcode-server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;or run image with docker-compose&lt;br&gt;docker-compose.yml&lt;/p&gt;
&lt;figure class=&quot;highlight yml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;searchcode:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  image:&lt;/span&gt; arkii/searchcode-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  volumes:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; /db/searchcode/git/index:/srv/index&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; /db/searchcode/git/repo:/srv/repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; /db/searchcode/git/searchcode.properties:/srv/searchcode.properties&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; /db/searchcode/git/searchcode.sqlite:/srv/searchcode.sqlite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;  ports:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;bullet&quot;&gt;    -&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;8080:8080/tcp&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;visit &lt;a href=&quot;http://yourdockerserverip:8080/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://yourdockerserverip:8080/&lt;/a&gt;&lt;/strong&gt;  &lt;/p&gt;
&lt;p&gt;To administer your searchcode server instance you need to click on the Admin link in the top right.&lt;br&gt;Enter the default password &lt;strong&gt;Adm1n234&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;Dockerfiles&quot;&gt;&lt;a href=&quot;#Dockerfiles&quot; class=&quot;headerlink&quot; title=&quot;Dockerfiles&quot;&gt;&lt;/a&gt;Dockerfiles&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;build JRE 8u65 image&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight docker&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt;        centos:&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;MAINTAINER&lt;/span&gt;  Arkii sqy6@&lt;span class=&quot;number&quot;&gt;163&lt;/span&gt;.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;COPY&lt;/span&gt;        &lt;span class=&quot;bash&quot;&gt;./jre-8u65-linux-x64.rpm /tmp/jre-8u65-linux-x64.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;RUN&lt;/span&gt;         &lt;span class=&quot;bash&quot;&gt;rpm -ivh /tmp/jre-8u65-linux-x64.rpm &amp;amp;&amp;amp; rm &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; /tmp/jre-8u65-linux-x64.rpm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;build Searchcode Server Community 1.0.0 image&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight docker&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt;        arkii/centos6-jre-&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;u6&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;MAINTAINER&lt;/span&gt;  Arkii sqy6@&lt;span class=&quot;number&quot;&gt;163&lt;/span&gt;.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;COPY&lt;/span&gt;        &lt;span class=&quot;bash&quot;&gt;./searchcode-server-community/release /srv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;WORKDIR&lt;/span&gt;     &lt;span class=&quot;bash&quot;&gt;/srv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;CMD&lt;/span&gt;         &lt;span class=&quot;bash&quot;&gt;/usr/bin/java -jar searchcode-1.0.0.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;EXPOSE&lt;/span&gt;      &lt;span class=&quot;number&quot;&gt;8080&lt;/span&gt;/tcp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Searchcode-Server-Community-Deploy&quot;&gt;&lt;a href=&quot;#Searchcode-Server-Community-Deploy&quot; class=&quot;headerlink&quot; title=&quot;Searchcode Server Commun
    
    </summary>
    
      <category term="productivity" scheme="http://blog.wuliwala.net/categories/productivity/"/>
    
    
      <category term="dev" scheme="http://blog.wuliwala.net/tags/dev/"/>
    
      <category term="devops" scheme="http://blog.wuliwala.net/tags/devops/"/>
    
  </entry>
  
  <entry>
    <title>Wall-E web deployment</title>
    <link href="http://blog.wuliwala.net/2016/03/01/wall-e-web-deployment/"/>
    <id>http://blog.wuliwala.net/2016/03/01/wall-e-web-deployment/</id>
    <published>2016-03-01T06:20:00.000Z</published>
    <updated>2016-03-08T09:07:31.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Wall-E-web-deployment&quot;&gt;&lt;a href=&quot;#Wall-E-web-deployment&quot; class=&quot;headerlink&quot; title=&quot;Wall-E web deployment&quot;&gt;&lt;/a&gt;Wall-E web deployment&lt;/h1&gt;&lt;p&gt;项目地址&lt;br&gt;&lt;a href=&quot;http://walle-web.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://walle-web.io/&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;安装文档&lt;br&gt;&lt;a href=&quot;http://doc.huamanshu.com/%E7%93%A6%E5%8A%9B/2.%E5%AE%89%E8%A3%85/%E5%AE%89%E8%A3%85.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://doc.huamanshu.com/%E7%93%A6%E5%8A%9B/2.%E5%AE%89%E8%A3%85/%E5%AE%89%E8%A3%85.html&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;问题FAQ&lt;br&gt;&lt;a href=&quot;https://github.com/meolu/walle-web/blob/master/docs%2Ffaq.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/meolu/walle-web/blob/master/docs%2Ffaq.md&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/meolu/walle-web/archive/master.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/meolu/walle-web/archive/master.zip&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rpm -Uvh http://mirror.webtatic.com/yum/el6/latest.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install -y php56w.x86_64 php56w-cli.x86_64 php56w-common.x86_64 php56w-gd.x86_64 php56w-ldap.x86_64 php56w-mbstring.x86_64 php56w-mcrypt.x86_64 php56w-mysql.x86_64 php56w-pdo.x86_64 php56w-xml.x86_64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://getcomposer.org/installer &amp;amp;&amp;amp; php installer &amp;amp;&amp;amp; mv composer.phar /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/bin/composer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://github.com/meolu/walle-web/archive/master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unzip master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; walle-web-master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;composer install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#composer install --aprefer-dist --no-dev --optimize-autoloader -vvvv&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi config/local.php&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./yii walle/setup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; vendor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; bower-asset/ bower&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;VirtualHost *:80&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ServerName walle.xxx.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DocumentRoot /var/www/html/web&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;Directory &quot;/var/www/html/web&quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      Options  FollowSymLinks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        AllowOverride ALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Order allow,deny&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Allow from all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/Directory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/VirtualHost&amp;gt;&#39;&lt;/span&gt; &amp;gt; /etc/httpd/conf.d/walle.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;default account&lt;br&gt;admin:admin&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Wall-E-web-deployment&quot;&gt;&lt;a href=&quot;#Wall-E-web-deployment&quot; class=&quot;headerlink&quot; title=&quot;Wall-E web deployment&quot;&gt;&lt;/a&gt;Wall-E web deployment&lt;/
    
    </summary>
    
      <category term="productivity" scheme="http://blog.wuliwala.net/categories/productivity/"/>
    
    
      <category term="dev" scheme="http://blog.wuliwala.net/tags/dev/"/>
    
      <category term="devops" scheme="http://blog.wuliwala.net/tags/devops/"/>
    
  </entry>
  
  <entry>
    <title>ionic hybrid app development</title>
    <link href="http://blog.wuliwala.net/2016/02/15/ionic-web-app-dev/"/>
    <id>http://blog.wuliwala.net/2016/02/15/ionic-web-app-dev/</id>
    <published>2016-02-15T02:42:00.000Z</published>
    <updated>2016-03-23T06:55:44.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;ionic-hybrid-app-development&quot;&gt;&lt;a href=&quot;#ionic-hybrid-app-development&quot; class=&quot;headerlink&quot; title=&quot;ionic hybrid app development&quot;&gt;&lt;/a&gt;ionic hybrid app development&lt;/h1&gt;&lt;h2 id=&quot;Video-Show&quot;&gt;&lt;a href=&quot;#Video-Show&quot; class=&quot;headerlink&quot; title=&quot;Video Show&quot;&gt;&lt;/a&gt;Video Show&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;/images/2016/02/15/ionic-dev-icinga-zol-480p.mp4&quot;&gt;video show&lt;/a&gt;  &lt;/p&gt;
&lt;h2 id=&quot;Frontend&quot;&gt;&lt;a href=&quot;#Frontend&quot; class=&quot;headerlink&quot; title=&quot;Frontend&quot;&gt;&lt;/a&gt;Frontend&lt;/h2&gt;&lt;h3 id=&quot;ionic&quot;&gt;&lt;a href=&quot;#ionic&quot; class=&quot;headerlink&quot; title=&quot;ionic&quot;&gt;&lt;/a&gt;ionic&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://ionicframework.com/getting-started/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;getting-started&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://usecreator.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;usecreator&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://creator.ionic.io/app/dashboard/help/videos&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;videos for creator&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://codepen.io/ionic/pens/public/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Many examples on codepen&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.runoob.com/ionic&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;courses on w3school.cc&lt;/a&gt;  &lt;/p&gt;
&lt;h4 id=&quot;install-ionic&quot;&gt;&lt;a href=&quot;#install-ionic&quot; class=&quot;headerlink&quot; title=&quot;install ionic&quot;&gt;&lt;/a&gt;install ionic&lt;/h4&gt;&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install -g cordova ionic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic start myApp blank&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic start myApp tabs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic start myApp sidemenu&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;run-or-emulate-your-app&quot;&gt;&lt;a href=&quot;#run-or-emulate-your-app&quot; class=&quot;headerlink&quot; title=&quot;run or emulate your app&quot;&gt;&lt;/a&gt;run or emulate your app&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://ionicframework.com/docs/cli/run.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ionicframework.com/docs/cli/run.html&lt;/a&gt;  &lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装cordova/ionic&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install -g cordova ionic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#添加平台(ios相关操作请在mac机器下o(&amp;gt;﹏&amp;lt;)o)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic platform add android/ios&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#更新项目中的ionic js类库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic lib update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#展示ionic项目结果 (同时显示iOS和android上的样式)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic serve --lab&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#安装/删除crosswalk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic browser add/remove crosswalk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Icon-and-Splash-Screen-Image-Generation&quot;&gt;&lt;a href=&quot;#Icon-and-Splash-Screen-Image-Generation&quot; class=&quot;headerlink&quot; title=&quot;Icon and Splash Screen Image Generation&quot;&gt;&lt;/a&gt;Icon and Splash Screen Image Generation&lt;/h3&gt;&lt;p&gt;Guide below&lt;br&gt;&lt;a href=&quot;http://ionicframework.com/docs/cli/icon-splashscreen.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ionicframework.com/docs/cli/icon-splashscreen.html&lt;/a&gt;  &lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cp ~/Downloads/logo11/free_logo_11.ai ./resources/icon.ai&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ionic resources --icon&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;splash-screen&quot;&gt;&lt;a href=&quot;#splash-screen&quot; class=&quot;headerlink&quot; title=&quot;splash screen&quot;&gt;&lt;/a&gt;splash screen&lt;/h3&gt;&lt;p&gt;2208 x 2208 splash.png  &lt;/p&gt;
&lt;p&gt;search images on Google , set resolution to 2208 x 2208  &lt;/p&gt;
&lt;h2 id=&quot;Build-android-package&quot;&gt;&lt;a href=&quot;#Build-android-package&quot; class=&quot;headerlink&quot; title=&quot;Build android package&quot;&gt;&lt;/a&gt;Build android package&lt;/h2&gt;&lt;p&gt;Follow this guide&lt;br&gt;&lt;a href=&quot;http://ionicframework.com/docs/guide/publishing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ionicframework.com/docs/guide/publishing.html&lt;/a&gt;  &lt;/p&gt;
&lt;h3 id=&quot;安装android-sdk&quot;&gt;&lt;a href=&quot;#安装android-sdk&quot; class=&quot;headerlink&quot; title=&quot;安装android sdk&quot;&gt;&lt;/a&gt;安装android sdk&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://developer.android.com/sdk/installing/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://developer.android.com/sdk/installing/index.html&lt;/a&gt;&lt;br&gt;Download Stand-alone SDK Tools  &lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget &lt;span class=&quot;string&quot;&gt;&#39;http://dl.google.com/android/android-sdk_r24.4.1-macosx.zip&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unzip android-sdk_r24.4.1-macosx.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv android-sdk-macosx /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;export ANDROID_HOME=&quot;/usr/local/android-sdk-macosx&quot;&#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bash_profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;export PATH=&quot;$PATH:$ANDROID_HOME/tools&quot;&#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bash_profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;http.proxyPort=8123&#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.android/androidtool.cfg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;http.proxyHost=127.0.0.1&#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.android/androidtool.cfg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# android update sdk --no-ui&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;android update sdk --no-https --no-ui --filter platform,system-image,tool,platform-tool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$PROJECT_FOLDER&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim config.xml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#we should remove debug console plugin before generating the release builds&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cordova plugin rm cordova-plugin-console&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cordova build --release android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/bin/cp platforms/android/build/outputs/apk/android-release-unsigned.apk ./&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;keytool -genkey -v -keystore icinga-mobile-release-key.keystore -alias icinga_mobile -keyalg RSA -keysize 2048 -validity 10000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore android-release-unsigned.apk alias_name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore icinga-mobile-release-key.keystore android-release-unsigned.apk icinga_mobile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# zipalign -v 4 android-release-unsigned.apk icinga-dash.apk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/android-sdk-macosx/build-tools/23.0.2/zipalign -v 4 android-release-unsigned.apk icinga-dash.apk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;issues&quot;&gt;&lt;a href=&quot;#issues&quot; class=&quot;headerlink&quot; title=&quot;issues&quot;&gt;&lt;/a&gt;issues&lt;/h2&gt;&lt;p&gt;style is much mess on Android  &lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// .config(function($stateProvider, $urlRouterProvider) &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.config(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;$stateProvider, $urlRouterProvider , $ionicConfigProvider&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.ios.tabs.style(&lt;span class=&quot;string&quot;&gt;&#39;standard&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.ios.tabs.position(&lt;span class=&quot;string&quot;&gt;&#39;bottom&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.android.tabs.style(&lt;span class=&quot;string&quot;&gt;&#39;standard&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.android.tabs.position(&lt;span class=&quot;string&quot;&gt;&#39;standard&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.ios.navBar.alignTitle(&lt;span class=&quot;string&quot;&gt;&#39;center&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.android.navBar.alignTitle(&lt;span class=&quot;string&quot;&gt;&#39;left&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.ios.backButton.previousTitleText(&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;).icon(&lt;span class=&quot;string&quot;&gt;&#39;ion-ios-arrow-thin-left&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.android.backButton.previousTitleText(&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;).icon(&lt;span class=&quot;string&quot;&gt;&#39;ion-android-arrow-back&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.ios.views.transition(&lt;span class=&quot;string&quot;&gt;&#39;ios&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $ionicConfigProvider.platform.android.views.transition(&lt;span class=&quot;string&quot;&gt;&#39;android&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// Ionic uses AngularUI Router which uses the concept of states&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// Learn more here: https://github.com/angular-ui/ui-router&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// Set up the various states which the app can be in.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// Each state&#39;s controller can be found in controllers.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  $stateProvider&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Useful-resources&quot;&gt;&lt;a href=&quot;#Useful-resources&quot; class=&quot;headerlink&quot; title=&quot;Useful resources&quot;&gt;&lt;/a&gt;Useful resources&lt;/h2&gt;&lt;h3 id=&quot;vuejs&quot;&gt;&lt;a href=&quot;#vuejs&quot; class=&quot;headerlink&quot; title=&quot;vuejs&quot;&gt;&lt;/a&gt;vuejs&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://vuejs.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;vuejs&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/vuejs/awesome-vue&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;awesome-vue&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;MaterializeCSS&quot;&gt;&lt;a href=&quot;#MaterializeCSS&quot; class=&quot;headerlink&quot; title=&quot;MaterializeCSS&quot;&gt;&lt;/a&gt;MaterializeCSS&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://materializecss.com/mobile.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Materialize&lt;/a&gt;  &lt;/p&gt;
&lt;h2 id=&quot;Backend&quot;&gt;&lt;a href=&quot;#Backend&quot; class=&quot;headerlink&quot; title=&quot;Backend&quot;&gt;&lt;/a&gt;Backend&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://flask-restful.readthedocs.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Flask-RESTful&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;SDK-installation-output&quot;&gt;&lt;a href=&quot;#SDK-installation-output&quot; class=&quot;headerlink&quot; title=&quot;SDK installation output&quot;&gt;&lt;/a&gt;SDK installation output&lt;/h2&gt;&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Running command: /Users/arkii/Workspace/Projects/icinga-dashboard-mobile/frontend/hooks/after_prepare/010_add_platform_class.js /Users/arkii/Workspace/Projects/icinga-dashboard-mobile/frontend&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;add to body &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;: platform-android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;ERROR&lt;/span&gt; building &lt;span class=&quot;keyword&quot;&gt;one&lt;/span&gt; of the platforms: Please install Android target: &lt;span class=&quot;string&quot;&gt;&quot;android-23&quot;&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hint: &lt;span class=&quot;keyword&quot;&gt;Open&lt;/span&gt; the SDK manager &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; running: /usr/&lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt;/android-sdk-macosx/tools/android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;You will require:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1. &lt;span class=&quot;string&quot;&gt;&quot;SDK Platform&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; android-23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2. &quot;Android SDK Platform-tools (latest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3. &lt;span class=&quot;string&quot;&gt;&quot;Android SDK Build-tools&quot;&lt;/span&gt; (latest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;You may not have the required environment or OS to build this project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Error&lt;/span&gt;: Please install Android target: &lt;span class=&quot;string&quot;&gt;&quot;android-23&quot;&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hint: &lt;span class=&quot;keyword&quot;&gt;Open&lt;/span&gt; the SDK manager &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; running: /usr/&lt;span class=&quot;keyword&quot;&gt;local&lt;/span&gt;/android-sdk-macosx/tools/android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;You will require:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1. &lt;span class=&quot;string&quot;&gt;&quot;SDK Platform&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; android-23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2. &quot;Android SDK Platform-tools (latest)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3. &lt;span class=&quot;string&quot;&gt;&quot;Android SDK Build-tools&quot;&lt;/span&gt; (latest)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Android-build-process-output&quot;&gt;&lt;a href=&quot;#Android-build-process-output&quot; class=&quot;headerlink&quot; title=&quot;Android build process output&quot;&gt;&lt;/a&gt;Android build process output&lt;/h2&gt;&lt;figure class=&quot;highlight lasso&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Running command: /Users/arkii/Workspace/Projects/icinga&lt;span class=&quot;attr&quot;&gt;-dashboard&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-mobile&lt;/span&gt;/frontend/hooks/after_prepare/&lt;span class=&quot;number&quot;&gt;010&lt;/span&gt;_add_platform_class.js /Users/arkii/Workspace/Projects/icinga&lt;span class=&quot;attr&quot;&gt;-dashboard&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-mobile&lt;/span&gt;/frontend&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;add &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; body class: platform&lt;span class=&quot;attr&quot;&gt;-android&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ANDROID_HOME=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/android&lt;span class=&quot;attr&quot;&gt;-sdk&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-macosx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=/Library/Java/Home&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Downloading http:&lt;span class=&quot;comment&quot;&gt;//services.gradle.org/distributions/gradle-2.2.1-all.zip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;...&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:compileReleaseNdk UP&lt;span class=&quot;attr&quot;&gt;-TO&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-DATE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:compileReleaseSources&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:lintVitalRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:transformClassesWithDexForRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:mergeReleaseJniLibFolders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:transformNative_libsWithMergeJniLibsForRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:processReleaseJavaRes UP&lt;span class=&quot;attr&quot;&gt;-TO&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-DATE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:transformResourcesWithMergeJavaResForRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:packageRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:assembleRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;:cdvBuildRelease&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUILD SUCCESSFUL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Total time: &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; mins &lt;span class=&quot;number&quot;&gt;21.356&lt;/span&gt; secs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Built the following apk(s): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	/Users/arkii/Workspace/Projects/icinga&lt;span class=&quot;attr&quot;&gt;-dashboard&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-mobile&lt;/span&gt;/frontend/platforms/android/build/outputs/apk/android&lt;span class=&quot;attr&quot;&gt;-release&lt;/span&gt;&lt;span class=&quot;attr&quot;&gt;-unsigned&lt;/span&gt;.apk&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ionic-hybrid-app-development&quot;&gt;&lt;a href=&quot;#ionic-hybrid-app-development&quot; class=&quot;headerlink&quot; title=&quot;ionic hybrid app development&quot;&gt;&lt;/a&gt;io
    
    </summary>
    
      <category term="dev" scheme="http://blog.wuliwala.net/categories/dev/"/>
    
    
      <category term="ionic" scheme="http://blog.wuliwala.net/tags/ionic/"/>
    
      <category term="app" scheme="http://blog.wuliwala.net/tags/app/"/>
    
  </entry>
  
  <entry>
    <title>BitBar plugin icinga2 overview</title>
    <link href="http://blog.wuliwala.net/2016/01/25/bitbar-plugin-icinga-overview/"/>
    <id>http://blog.wuliwala.net/2016/01/25/bitbar-plugin-icinga-overview/</id>
    <published>2016-01-25T02:42:00.000Z</published>
    <updated>2016-04-01T01:50:18.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;MacBitBar-Plugin-icinga2-api-overview-py&quot;&gt;&lt;a href=&quot;#MacBitBar-Plugin-icinga2-api-overview-py&quot; class=&quot;headerlink&quot; title=&quot;MacBitBar Plugin icinga2-api-overview.py&quot;&gt;&lt;/a&gt;MacBitBar Plugin icinga2-api-overview.py&lt;/h1&gt;&lt;p&gt;Plugin to show icinga2 tactical overview, developed by python, in order to use this plugin, you should enable icinga2-api first.  &lt;/p&gt;
&lt;h2 id=&quot;Screenshot&quot;&gt;&lt;a href=&quot;#Screenshot&quot; class=&quot;headerlink&quot; title=&quot;Screenshot&quot;&gt;&lt;/a&gt;Screenshot&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;/images/2016/01/25/macbitbar-icinga-overview-480p.mp4&quot;&gt;screencast here&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;/images/2016/01/25/icinga2-api-overview.png&quot; alt=&quot;&quot;&gt;  &lt;/p&gt;
&lt;h2 id=&quot;Install-MacBitBar&quot;&gt;&lt;a href=&quot;#Install-MacBitBar&quot; class=&quot;headerlink&quot; title=&quot;Install MacBitBar&quot;&gt;&lt;/a&gt;Install MacBitBar&lt;/h2&gt;&lt;p&gt;Download the latest package from site below&lt;br&gt;&lt;a href=&quot;https://github.com/matryer/bitbar/releases&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/matryer/bitbar/releases&lt;/a&gt;&lt;br&gt;Or install it by brew cask&lt;br&gt;&lt;code&gt;brew cask install bitbar&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;Get-plugin&quot;&gt;&lt;a href=&quot;#Get-plugin&quot; class=&quot;headerlink&quot; title=&quot;Get plugin&quot;&gt;&lt;/a&gt;Get plugin&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/arkii/gadgets/blob/master/Utility/BitBar/icinga2-api-overview.py&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/arkii/gadgets/blob/master/Utility/BitBar/icinga2-api-overview.py&lt;/a&gt;  &lt;/p&gt;
&lt;h2 id=&quot;Install-Plugin&quot;&gt;&lt;a href=&quot;#Install-Plugin&quot; class=&quot;headerlink&quot; title=&quot;Install Plugin&quot;&gt;&lt;/a&gt;Install Plugin&lt;/h2&gt;&lt;p&gt;Just download the plugin of your choice into your BitBar plugins directory and choose Refresh from one of the BitBar menu.  &lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;chmod +x icinga2-api-overview.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; Plugins/Enabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Enable uptime plugin and change update interval to 30 seconds&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ln &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; ../Utility/icinga2-api-overview.py icinga.30s.py&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Other-plugins-built-by-me&quot;&gt;&lt;a href=&quot;#Other-plugins-built-by-me&quot; class=&quot;headerlink&quot; title=&quot;Other plugins built by me&quot;&gt;&lt;/a&gt;Other plugins built by me&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/arkii/gadgets/blob/master/Utility/BitBar/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/arkii/gadgets/Utility/BitBar/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;MacBitBar&quot;&gt;&lt;a href=&quot;#MacBitBar&quot; class=&quot;headerlink&quot; title=&quot;MacBitBar&quot;&gt;&lt;/a&gt;MacBitBar&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/images/2016/01/25/bitbar-logo@2x.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;The BitBar app lets you put the output from any script or program right in your Mac OS X menu bar. And it’s completely free. An impressive number of plugins have already been contributed by a wide range of developers just like you, and this site makes it easy to find them.  &lt;/p&gt;
&lt;p&gt;Homepage:&lt;br&gt;&lt;a href=&quot;https://getbitbar.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://getbitbar.com&lt;/a&gt;&lt;br&gt;Projects:&lt;br&gt;&lt;a href=&quot;https://github.com/matryer/bitbar&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BitBar&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/matryer/bitbar-plugins&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BitBar-Plugins&lt;/a&gt;  &lt;/p&gt;
&lt;h2 id=&quot;NagBar&quot;&gt;&lt;a href=&quot;#NagBar&quot; class=&quot;headerlink&quot; title=&quot;NagBar&quot;&gt;&lt;/a&gt;NagBar&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/images/2016/01/25/nagbarapp.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;NagBar is a freeware Nagios, Icinga and Thruk monitoring client which runs in the status bar and give updates about the monitored services. NagBar is a Mac OS X native application created using the Cocoa framework.  &lt;/p&gt;
&lt;p&gt;Homepage:&lt;br&gt;&lt;a href=&quot;https://sites.google.com/site/nagbarapp/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://sites.google.com/site/nagbarapp/&lt;/a&gt;&lt;br&gt;Screenshots:&lt;br&gt;&lt;a href=&quot;https://sites.google.com/site/nagbarapp/screenshots&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://sites.google.com/site/nagbarapp/screenshots&lt;/a&gt;  &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;MacBitBar-Plugin-icinga2-api-overview-py&quot;&gt;&lt;a href=&quot;#MacBitBar-Plugin-icinga2-api-overview-py&quot; class=&quot;headerlink&quot; title=&quot;MacBitBar Pl
    
    </summary>
    
      <category term="gadget" scheme="http://blog.wuliwala.net/categories/gadget/"/>
    
    
      <category term="monitoring" scheme="http://blog.wuliwala.net/tags/monitoring/"/>
    
      <category term="sysops" scheme="http://blog.wuliwala.net/tags/sysops/"/>
    
  </entry>
  
  <entry>
    <title>icinga2 influxdb grafana integration</title>
    <link href="http://blog.wuliwala.net/2015/12/09/icinga2-influxdb-grafana-integration/"/>
    <id>http://blog.wuliwala.net/2015/12/09/icinga2-influxdb-grafana-integration/</id>
    <published>2015-12-09T03:57:25.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;icinga2-influxdb-grafana-integration&quot;&gt;&lt;a href=&quot;#icinga2-influxdb-grafana-integration&quot; class=&quot;headerlink&quot; title=&quot;icinga2 influxdb grafana integration&quot;&gt;&lt;/a&gt;icinga2 influxdb grafana integration&lt;/h1&gt;&lt;p&gt;Using influxdb as storage, icinga2 passing the performance data which returned by plugins, and grafana is used for data visulizing.  &lt;/p&gt;
&lt;h2 id=&quot;preparation&quot;&gt;&lt;a href=&quot;#preparation&quot; class=&quot;headerlink&quot; title=&quot;preparation&quot;&gt;&lt;/a&gt;preparation&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;plugins’ output is STRICTLY nagios standard output&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight cs&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# OK - load average: 0.69, 0.97, 0.94|load1=0.690;16.000;30.000;0; load5=0.970;20.000;32.000;0; load15=0.940;24.000;34.000;0; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# hosts&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;icinga2.server1.host.hostalive.perfdata.pl.&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1449566712&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;icinga2.server1.host.hostalive.perfdata.rta.&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.0041609999999999998&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1449566712&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# services&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;icinga2.server1.service.nrpe_load.perfdata.load1.&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.01&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1449567314&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;icinga2.server1.service.nrpe_load.perfdata.load5.&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1449567314&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;icinga2.server1.service.nrpe_load.perfdata.load15.&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1449567314&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;enable-icinga2-graphite-feature&quot;&gt;&lt;a href=&quot;#enable-icinga2-graphite-feature&quot; class=&quot;headerlink&quot; title=&quot;enable icinga2 graphite feature&quot;&gt;&lt;/a&gt;enable icinga2 graphite feature&lt;/h2&gt;&lt;p&gt;&lt;code&gt;# icinga2 feature enable perfdata&lt;/code&gt;&lt;br&gt;&lt;code&gt;# icinga2 feature enable graphite&lt;/code&gt;&lt;br&gt;&lt;code&gt;# vim /etc/icinga2/features-enabled/graphite.conf&lt;/code&gt;  &lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * The GraphiteWriter type writes check result metrics and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * performance data to a graphite tcp socket.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;library &lt;span class=&quot;string&quot;&gt;&quot;perfdata&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;object GraphiteWriter &lt;span class=&quot;string&quot;&gt;&quot;graphite&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//host = &quot;127.0.0.1&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//port = 2003&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  host = &lt;span class=&quot;string&quot;&gt;&quot;influxdb-server-with-graphite-plugin&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  port = &lt;span class=&quot;number&quot;&gt;2004&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Optional. Metric prefix for host name. Defaults to &quot;icinga2.$host.name$.host.$host.check_command$&quot;.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;host_name_template = &lt;span class=&quot;string&quot;&gt;&quot;icinga2.$host.name$.host.$host.check_command$&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;service_name_template = &lt;span class=&quot;string&quot;&gt;&quot;icinga2.$host.name$.service.$service.name$&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// service_name_template = &quot;icinga2.$host.name$.service.$service.vars.nrpe_command$&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// service_name_template = &quot;icinga2.$host.name$.service.$service.name$.$service.check_command$&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Optional. Metric prefix for service name. Defaults to &quot;icinga2.$host.name$.services.$service.name$.$service.check_command$&quot;.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// enable_send_thresholds = false // Optional. Send additional threshold metrics. Defaults to false.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// enable_send_metadata = false   // Optional. Send additional metadata metrics. Defaults to false.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// enable_legacy_mode = false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;## &lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; the internal link, guiding to grafana dashboard  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`&lt;span class=&quot;meta&quot;&gt;# vim /etc/icinga2/conf.d/templates.conf`&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;``` cpp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;template&lt;/span&gt; Service &lt;span class=&quot;string&quot;&gt;&quot;grafana-svc&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// http://grafana.yourdomain.com/dashboard/db/icinga?var-HOST=kddi-zol-dealer-web1&amp;amp;var-CMD=nrpe_ss&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  notes_url = &lt;span class=&quot;string&quot;&gt;&quot;http://grafana.yourdomain.com/dashboard/db/icinga?var-HOST=$HOSTNAME$&amp;amp;var-CMD=$SERVICEDESC$&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;## apply the template  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`&lt;span class=&quot;meta&quot;&gt;# vim /etc/icinga2/conf.d/services.conf`&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;``` cpp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply Service &lt;span class=&quot;string&quot;&gt;&quot;nrpe_ss&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        import &lt;span class=&quot;string&quot;&gt;&quot;generic-service&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        import &lt;span class=&quot;string&quot;&gt;&quot;grafana-svc&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                check_command = &lt;span class=&quot;string&quot;&gt;&quot;nrpe&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                assign where &lt;span class=&quot;string&quot;&gt;&quot;webserver&quot;&lt;/span&gt; in host.groups&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                vars.nrpe_timeout = &lt;span class=&quot;number&quot;&gt;240&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                vars.nrpe_command = &lt;span class=&quot;string&quot;&gt;&quot;check_ss&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;icinga2 daemon -C &amp;amp;&amp;amp; service icinga2 reload&lt;/code&gt;  &lt;/p&gt;
&lt;h2 id=&quot;Influxdb-graphite-plugin-configuration&quot;&gt;&lt;a href=&quot;#Influxdb-graphite-plugin-configuration&quot; class=&quot;headerlink&quot; title=&quot;Influxdb graphite plugin configuration&quot;&gt;&lt;/a&gt;Influxdb graphite plugin configuration&lt;/h2&gt;&lt;p&gt;&lt;code&gt;# vim /etc/influxdb/influxdb.conf&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[[graphite]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  enabled = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  database = &quot;icinga&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bind-address = &quot;:2004&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  protocol = &quot;tcp&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  consistency-level = &quot;one&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ignore-unnamed = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name-separator = &quot;|&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # name-separator = &quot;_&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  templates = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &quot;icinga2.*.host.*.perfdata.*.*                   .measurement..cmd..metric.value&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &quot;icinga2.*.service.*.perfdata.*.*                .measurement..cmd..metric.value&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[graphite]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  enabled = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  database = &quot;graphite&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  bind-address = &quot;:2003&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  protocol = &quot;tcp&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  consistency-level = &quot;one&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # name-separator = &quot;;&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name-separator = &quot;.&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # These next lines control how batching works. You should have this enabled&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # otherwise you could get dropped metrics or poor performance. Batching&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # will buffer points in memory if you have many coming in.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # batch-size = 1000 # will flush if this many points get buffered&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # batch-pending = 5 # number of batches that may be pending in memory&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # batch-timeout = &quot;1s&quot; # will flush at least this often even if we haven&#39;t hit buffer limit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # udp-read-buffer = 0 # UDP Read buffer size, 0 means OS default. UDP listener will fail if set above OS max.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## &quot;name-schema&quot; configures tag names for parsing the metric name from graphite protocol;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## separated by `name-separator`.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## The &quot;measurement&quot; tag is special and the corresponding field will become&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## the name of the metric.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## e.g. &quot;type.host.measurement.device&quot; will parse &quot;server.localhost.cpu.cpu0&quot; as&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ##     measurement: &quot;cpu&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ##     tags: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ##         &quot;type&quot;: &quot;server&quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ##         &quot;host&quot;: &quot;localhost,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ##         &quot;device&quot;: &quot;cpu0&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ##     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # name-schema = &quot;type.host.measurement.device&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## If set to true, when the input metric name has more fields than `name-schema` specified,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## the extra fields will be ignored.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ## Otherwise an error will be logged and the metric rejected.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # ignore-unnamed = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;###&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;### [collectd]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;###&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;### Controls the listener for collectd data.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;###&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# grafana template variables&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$HOST&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SHOW&lt;/span&gt; MEASUREMENTS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$CMD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SHOW&lt;/span&gt; TAG &lt;span class=&quot;keyword&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;$HOST&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;cmd&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$METRIC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;SHOW&lt;/span&gt; TAG &lt;span class=&quot;keyword&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;$HOST&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;KEY&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;metric&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;WHERE&lt;/span&gt; cmd = &lt;span class=&quot;string&quot;&gt;&#39;$CMD&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;``&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;`  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;**grafana query below**  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;![grafana-query](/images/2015/12/1.png)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;## Get the share link from grafana dashboard  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;``&lt;/span&gt; html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;iframe src=&lt;span class=&quot;string&quot;&gt;&quot;http://grafana.yourdomain.com/dashboard-solo/db/icinga?panelId=1&amp;amp;fullscreen&amp;amp;var-HOST=server1&amp;amp;var-CMD=nrpe_ss&quot;&lt;/span&gt; width=&lt;span class=&quot;string&quot;&gt;&quot;450&quot;&lt;/span&gt; height=&lt;span class=&quot;string&quot;&gt;&quot;200&quot;&lt;/span&gt; frameborder=&lt;span class=&quot;string&quot;&gt;&quot;0&quot;&lt;/span&gt;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;cd /etc/icingaweb2/enabledModules/pnp4nagios/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;icingaweb2 modules API here&lt;br&gt;&lt;code&gt;/usr/share/icingaweb2/modules/monitoring/library/Monitoring/Object/Service.php&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;add grafana integration into icingaweb2   &lt;/p&gt;
&lt;p&gt;&lt;code&gt;/usr/share/icingaweb2/modules/pnp4nagios/library/Pnp4nagios/Grapher.php&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Grapher&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;GrapherHook&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .........OLD COLD BLOCK........&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; $baseUrl = &lt;span class=&quot;string&quot;&gt;&#39;/pnp4nagios&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt; $grafanaBaseUrl = &lt;span class=&quot;string&quot;&gt;&#39;http://yourdomain.com/dashboard-solo/db/icinga?panelId=1&amp;amp;fullscreen&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    .........OLD COLD BLOCK........&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getPreviewHtml&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(MonitoredObject $object)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        .........OLD COLD BLOCK........&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $html .= &lt;span class=&quot;string&quot;&gt;&quot;  &amp;lt;/tr&amp;gt;\n  &amp;lt;tr&amp;gt;\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; ($viewKeys &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $view) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $html .= &lt;span class=&quot;string&quot;&gt;&#39;    &amp;lt;td style=&quot;border-left: 1px solid #555; padding-right: 3px&quot;&amp;gt;&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   . $this-&amp;gt;getPreviewImg($host, $service, $view)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   . &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;/td&amp;gt;\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Arkii 2015.12.14 added Grafana Integration&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ($service != &lt;span class=&quot;string&quot;&gt;&#39;_HOST_&#39;&lt;/span&gt; &amp;amp;&amp;amp; $object-&amp;gt;service_notes_url) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $html .= &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;tr&amp;gt;\n &amp;lt;td&amp;gt;\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $grafanaIframe = sprintf(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;iframe src=&quot;%s&amp;amp;var-HOST=%s&amp;amp;var-CMD=%s&quot; width=&quot;480&quot; height=&quot;150&quot; frameborder=&quot;0&quot;&amp;gt;&amp;lt;/iframe&amp;gt;&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $this-&amp;gt;grafanaBaseUrl,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $host,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $service);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $html .= $grafanaIframe;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $html .= &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;/td&amp;gt;\n &amp;lt;/tr&amp;gt;\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// end of Grafana Integration&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $html .= &lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;/tr&amp;gt;&amp;lt;/table&amp;gt;\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;demos&quot;&gt;&lt;a href=&quot;#demos&quot; class=&quot;headerlink&quot; title=&quot;demos&quot;&gt;&lt;/a&gt;demos&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;work with pnp4nagios&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/2015/12/5.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;strong&gt;click the notes_url&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/2015/12/2.png&quot; alt=&quot;icinga-&quot;&gt;&lt;br&gt;&lt;strong&gt;jumped to your grafana dashboard&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/2015/12/3.png&quot; alt=&quot;grafana-1&quot;&gt;&lt;br&gt;&lt;strong&gt;another metric&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/2015/12/4.png&quot; alt=&quot;grafana-2&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;many-useful-links&quot;&gt;&lt;a href=&quot;#many-useful-links&quot; class=&quot;headerlink&quot; title=&quot;many useful links&quot;&gt;&lt;/a&gt;many useful links&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://play.grafana.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;so many grafana examples here&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/addons-plugins#addons-graphing-influxdb&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;enable influxdb writer&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.infoq.com/articles/graphite-intro&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;graphite-intro-en&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.infoq.com/cn/articles/graphite-intro&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;graphite-intro-cn&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/influxdb/influxdb/tree/master/services/graphite&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;InfluxDB hook up Graphite as an input source&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/monitoring-basics#runtime-macros&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;icinga2-runtime-macros&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/object-types#objecttype-graphitewriter&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;icinga2-objecttype-graphitewriter&lt;/a&gt;&lt;br&gt;&lt;strong&gt;Intruduced Performance Data Pipe of icinga2 in GREAT DETAIL[非常详细的icinga2性能数据管道说明]:&lt;/strong&gt;&lt;br&gt;&lt;a href=&quot;http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/icinga2-features#performance-data&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;icinga2-performance-data&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;icinga2-influxdb-grafana-integration&quot;&gt;&lt;a href=&quot;#icinga2-influxdb-grafana-integration&quot; class=&quot;headerlink&quot; title=&quot;icinga2 influxdb gra
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>how to build tinycorelinux docker image</title>
    <link href="http://blog.wuliwala.net/2015/12/07/how-to-build-tinycorelinux-docker-image/"/>
    <id>http://blog.wuliwala.net/2015/12/07/how-to-build-tinycorelinux-docker-image/</id>
    <published>2015-12-07T02:14:57.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;how-to-build-tinycorelinux-docker-image&quot;&gt;&lt;a href=&quot;#how-to-build-tinycorelinux-docker-image&quot; class=&quot;headerlink&quot; title=&quot;how to build tinycorelinux docker image&quot;&gt;&lt;/a&gt;how to build tinycorelinux docker image&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget http://tinycorelinux.net/6.x/x86_64/release/distribution_files/corepure64.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir chroot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gunzip corepure64.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd chroot/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cpio -i &amp;lt; ../corepure64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd ..&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -C chroot -c . | docker import - tinycorelinux&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;how-to-build-tinycorelinux-docker-image&quot;&gt;&lt;a href=&quot;#how-to-build-tinycorelinux-docker-image&quot; class=&quot;headerlink&quot; title=&quot;how to build t
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>how to configure httpd proxy with authentication</title>
    <link href="http://blog.wuliwala.net/2015/12/02/how-to-configure-httpd-proxy-with-authentication/"/>
    <id>http://blog.wuliwala.net/2015/12/02/how-to-configure-httpd-proxy-with-authentication/</id>
    <published>2015-12-01T23:20:31.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;how-to-configure-httpd-proxy-with-authentication&quot;&gt;&lt;a href=&quot;#how-to-configure-httpd-proxy-with-authentication&quot; class=&quot;headerlink&quot; title=&quot;how to configure httpd proxy with authentication&quot;&gt;&lt;/a&gt;how to configure httpd proxy with authentication&lt;/h1&gt;&lt;p&gt;&lt;code&gt;vi gen.php&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo base64_encode(&amp;quot;user:password&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;php gen.php&lt;/code&gt;&lt;br&gt;&lt;code&gt;dXNlcjpwYXNzd29yZA==&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;RewriteEngine On&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RewriteRule ^/orin/(.*)$    http://target.lb.com/$1   [NC,L,P]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;LocationMatch &amp;quot;^/orin/(.*)$&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #AddDefaultCharset GBK&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RequestHeader set Authorization &amp;quot;dXNlcjpwYXNzd29yZA==&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ProxyPass http://target.lb.com/$1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/LocationMatch&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;via-httpd-apache-org&quot;&gt;&lt;a href=&quot;#via-httpd-apache-org&quot; class=&quot;headerlink&quot; title=&quot;via:httpd.apache.org&quot;&gt;&lt;/a&gt;via:httpd.apache.org&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://httpd.apache.org/docs/2.4/mod/mod_headers.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mod_headers&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_p&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;rewrite flags&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://httpd.apache.org/docs/2.4/mod/mod_proxy.html#proxypassreverse&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mod_proxy.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;how-to-configure-httpd-proxy-with-authentication&quot;&gt;&lt;a href=&quot;#how-to-configure-httpd-proxy-with-authentication&quot; class=&quot;headerlink&quot; tit
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>how to configure httpd with ldap authentication</title>
    <link href="http://blog.wuliwala.net/2015/12/01/how-to-configure-httpd-with-ldap-authentication/"/>
    <id>http://blog.wuliwala.net/2015/12/01/how-to-configure-httpd-with-ldap-authentication/</id>
    <published>2015-12-01T00:07:06.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;how-to-configure-httpd-with-ldap-authentication&quot;&gt;&lt;a href=&quot;#how-to-configure-httpd-with-ldap-authentication&quot; class=&quot;headerlink&quot; title=&quot;how to configure httpd with ldap authentication&quot;&gt;&lt;/a&gt;how to configure httpd with ldap authentication&lt;/h1&gt;&lt;h2 id=&quot;httpd-2-4-ldap&quot;&gt;&lt;a href=&quot;#httpd-2-4-ldap&quot; class=&quot;headerlink&quot; title=&quot;httpd 2.4 ldap&quot;&gt;&lt;/a&gt;httpd 2.4 ldap&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LoadModule authn_core_module modules/mod_authn_core.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule authz_host_module modules/mod_authz_host.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule authz_user_module modules/mod_authz_user.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule authz_core_module modules/mod_authz_core.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule access_compat_module modules/mod_access_compat.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule auth_basic_module modules/mod_auth_basic.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule ldap_module modules/mod_ldap.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LoadModule authnz_ldap_module modules/mod_authnz_ldap.so&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;VirtualHost *:*&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ProxyPass / http://elk-kibana:5601/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ProxyPassReverse / http://elk-kibana:5601/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;Proxy *&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Require all granted&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# LDAPSharedCacheSize 500000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# LDAPCacheEntries 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# LDAPCacheTTL 600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# LDAPOpCacheEntries 1024&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# LDAPOpCacheTTL 600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AuthType Basic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AuthName &amp;quot;Login with LDAP&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AuthBasicProvider ldap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AuthLDAPURL &amp;quot;ldap://&amp;lt;YOUR LDAP SERVER&amp;gt;:3268/OU=Offices,DC=company,DC=com?sAMAccountName?sub?(objectClass=person)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AuthLDAPBindDN &amp;quot;CN=Operator,OU=Service Accounts,DC=company,DC=com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;AuthLDAPBindPassword &amp;lt;PUT Operator&amp;apos;s PASSWORD HERE&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;require valid-user&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/Proxy&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;via-httpd-apache-org&quot;&gt;&lt;a href=&quot;#via-httpd-apache-org&quot; class=&quot;headerlink&quot; title=&quot;via:httpd.apache.org&quot;&gt;&lt;/a&gt;via:httpd.apache.org&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://httpd.apache.org/docs/2.4/mod/mod_ldap.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mod_ldap&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://httpd.apache.org/docs/2.4/mod/mod_authnz_ldap.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mod_authnz_ldap&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;how-to-configure-httpd-with-ldap-authentication&quot;&gt;&lt;a href=&quot;#how-to-configure-httpd-with-ldap-authentication&quot; class=&quot;headerlink&quot; title
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>how to configure nginx with ldap authentication</title>
    <link href="http://blog.wuliwala.net/2015/12/01/how-to-configure-nginx-with-ldap-authentication/"/>
    <id>http://blog.wuliwala.net/2015/12/01/how-to-configure-nginx-with-ldap-authentication/</id>
    <published>2015-11-30T23:42:43.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;how-to-configure-nginx-with-ldap-authentication&quot;&gt;&lt;a href=&quot;#how-to-configure-nginx-with-ldap-authentication&quot; class=&quot;headerlink&quot; title=&quot;how to configure nginx with ldap authentication&quot;&gt;&lt;/a&gt;how to configure nginx with ldap authentication&lt;/h1&gt;&lt;h2 id=&quot;build-from-source&quot;&gt;&lt;a href=&quot;#build-from-source&quot; class=&quot;headerlink&quot; title=&quot;build from source&quot;&gt;&lt;/a&gt;build from source&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;version=&amp;apos;1.8.0&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt-get install -y wget unzip make gcc libzip-dev libssl-dev libpcre3-dev libldap2-dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir build &amp;amp;&amp;amp; cd build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://github.com/kvspb/nginx-auth-ldap/archive/master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unzip master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://nginx.org/download/nginx-$&amp;#123;version&amp;#125;.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xvf nginx-$&amp;#123;version&amp;#125;.tar.gz &amp;amp;&amp;amp; cd nginx-$&amp;#123;version&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--prefix=/etc/nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--sbin-path=/usr/sbin/nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--conf-path=/etc/nginx/nginx.conf \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--error-log-path=/var/log/nginx/error.log \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--http-log-path=/var/log/nginx/access.log \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--pid-path=/var/run/nginx.pid \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--lock-path=/var/run/nginx.lock \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--http-client-body-temp-path=/var/cache/nginx/client_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--http-proxy-temp-path=/var/cache/nginx/proxy_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--http-scgi-temp-path=/var/cache/nginx/scgi_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--user=nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--group=nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_ssl_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_realip_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_addition_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_sub_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_dav_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_flv_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_mp4_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_gunzip_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_gzip_static_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_random_index_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_secure_link_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_stub_status_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_auth_request_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-mail \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-mail_ssl_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-file-aio \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-http_spdy_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-ipv6 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--add-module=../nginx-auth-ldap-master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Dockerfile&quot;&gt;&lt;a href=&quot;#Dockerfile&quot; class=&quot;headerlink&quot; title=&quot;Dockerfile&quot;&gt;&lt;/a&gt;Dockerfile&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;FROM debian:jessie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# bugs here https://github.com/kvspb/nginx-auth-ldap/issues/88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# nginx: [emerg] http_auth_ldap: parse_require in /etc/nginx/nginx.conf:45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# nginx: [emerg] http_auth_ldap: Setting group in /etc/nginx/nginx.conf:45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MAINTAINER Arkii &amp;quot;sqy6@163.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RUN echo &amp;apos;Asia/Shanghai&amp;apos; &amp;gt; /etc/timezone &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    groupadd -g 396 nginx &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    useradd nginx -u 396 -g 396 -M -c &amp;apos;Nginx web server&amp;apos; -s /sbin/nologin -d /var/lib/nginx &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mkdir -p /var/log/nginx /var/lib/nginx /var/cache/nginx /usr/share/nginx &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    chown -R nginx:nginx /var/log/nginx /var/lib/nginx /var/cache/nginx &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ln -sf /dev/stdout /var/log/nginx/access.log &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ln -sf /dev/stderr /var/log/nginx/error.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ENV NGINX_VERSION 1.8.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RUN apt-get update &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    apt-get install -y wget unzip make gcc libzip-dev libssl-dev libpcre3-dev libldap2-dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RUN mkdir /tmp/build &amp;amp;&amp;amp; cd /tmp/build &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    wget https://github.com/kvspb/nginx-auth-ldap/archive/master.zip &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    unzip master.zip &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    wget http://nginx.org/download/nginx-$&amp;#123;NGINX_VERSION&amp;#125;.tar.gz &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tar xf nginx-$&amp;#123;NGINX_VERSION&amp;#125;.tar.gz &amp;amp;&amp;amp; cd nginx-$&amp;#123;NGINX_VERSION&amp;#125; &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ./configure \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --prefix=/etc/nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --sbin-path=/usr/sbin/nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --conf-path=/etc/nginx/nginx.conf \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --error-log-path=/var/log/nginx/error.log \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --http-log-path=/var/log/nginx/access.log \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --pid-path=/var/run/nginx.pid \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --lock-path=/var/run/nginx.lock \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --http-client-body-temp-path=/var/cache/nginx/client_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --http-proxy-temp-path=/var/cache/nginx/proxy_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --http-scgi-temp-path=/var/cache/nginx/scgi_temp \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --user=nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --group=nginx \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_ssl_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_realip_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_addition_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_sub_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_dav_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_flv_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_mp4_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_gunzip_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_gzip_static_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_random_index_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_secure_link_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_stub_status_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_auth_request_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-mail \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-mail_ssl_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-file-aio \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-http_spdy_module \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --with-ipv6 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    --add-module=../nginx-auth-ldap-master &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RUN apt-get remove -y gcc wget make unzip &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       rm -rf /var/lib/apt/lists/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EXPOSE 80 443 8000 8080&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ENTRYPOINT [&amp;quot;nginx&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CMD [&amp;quot;-g&amp;quot;, &amp;quot;daemon off;&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;configfile-example&quot;&gt;&lt;a href=&quot;#configfile-example&quot; class=&quot;headerlink&quot; title=&quot;configfile example&quot;&gt;&lt;/a&gt;configfile example&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# user  nobody;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;worker_processes  1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# error_log  logs/error.log;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# error_log  logs/error.log  notice;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# error_log  logs/error.log  info;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# pid        logs/nginx.pid;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;events &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    worker_connections  1024;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    include       mime.types;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default_type  application/octet-stream;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #log_format  main  &amp;apos;$remote_addr - $remote_user [$time_local] &amp;quot;$request&amp;quot; &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #                  &amp;apos;$status $body_bytes_sent &amp;quot;$http_referer&amp;quot; &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #                  &amp;apos;&amp;quot;$http_user_agent&amp;quot; &amp;quot;$http_x_forwarded_for&amp;quot;&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #access_log  logs/access.log  main;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sendfile        on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #tcp_nopush     on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #keepalive_timeout  0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    keepalive_timeout  65;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #gzip  on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    auth_ldap_cache_enabled on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    auth_ldap_cache_expiration_time 10000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    auth_ldap_cache_size 1000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ldap_server ad_1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      url &amp;quot;ldap://&amp;lt;YOUR LDAP SERVER&amp;gt;:3268/OU=Offices,DC=company,DC=com?sAMAccountName?sub?(objectClass=person)&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      binddn &amp;quot;CN=Operator,OU=Service Accounts,DC=company,DC=com&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      binddn_passwd &amp;lt;PUT Operator&amp;apos;s PASSWORD HERE&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      #connect_timeout 5s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      #bind_timeout 5s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      #request_timeout 5s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      group_attribute member;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      group_attribute_is_dn on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      satisfy any;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      require group &amp;quot;CN=Admins,OU=My Security Groups,DC=company,DC=com&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ldap_server ad_2 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      url &amp;quot;ldap://&amp;lt;YOUR LDAP SERVER&amp;gt;:3268/OU=Offices,DC=company,DC=com?sAMAccountName?sub?(objectClass=person)&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      binddn &amp;quot;CN=Operator,OU=Service Accounts,DC=company,DC=com&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      binddn_passwd &amp;lt;PUT Operator&amp;apos;s PASSWORD HERE&amp;gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      #connect_timeout 5s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      #bind_timeout 5s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      #request_timeout 5s;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      group_attribute member;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      group_attribute_is_dn on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      satisfy any;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      require group &amp;quot;CN=Admins,OU=My Security Groups,DC=company,DC=com&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        listen       80;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        server_name  localhost;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        auth_ldap &amp;quot;Login with LDAP account&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        auth_ldap_servers ad_1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        auth_ldap_servers ad_2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #charset koi8-r;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #access_log  logs/host.access.log  main;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            root   html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            index  index.html index.htm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #error_page  404              /404.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        # redirect server error pages to the static page /50x.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        error_page   500 502 503 504  /50x.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        location = /50x.html &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            root   html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;image-on-Docker-hub&quot;&gt;&lt;a href=&quot;#image-on-Docker-hub&quot; class=&quot;headerlink&quot; title=&quot;image on Docker hub&quot;&gt;&lt;/a&gt;image on Docker hub&lt;/h2&gt;&lt;p&gt;&lt;code&gt;docker pull docker.io/arkii/nginx-ldap:1.8.0&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/kvspb/nginx-auth-ldap&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;github&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://deezx.github.io/blog/2015/04/24/how-to-configure-nginx-with-ldap-authentication/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;blog&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;how-to-configure-nginx-with-ldap-authentication&quot;&gt;&lt;a href=&quot;#how-to-configure-nginx-with-ldap-authentication&quot; class=&quot;headerlink&quot; title
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>When A Man Loves A Woman</title>
    <link href="http://blog.wuliwala.net/2015/11/27/when-a-man-loves-a-woman/"/>
    <id>http://blog.wuliwala.net/2015/11/27/when-a-man-loves-a-woman/</id>
    <published>2015-11-27T06:41:01.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;When-A-Man-Loves-A-Woman&quot;&gt;&lt;a href=&quot;#When-A-Man-Loves-A-Woman&quot; class=&quot;headerlink&quot; title=&quot;When A Man Loves A Woman&quot;&gt;&lt;/a&gt;When A Man Loves A Woman&lt;/h1&gt;&lt;p&gt;作词 : Calvin Lewis/Andrew Wright&lt;br&gt;原唱 : Percy Sledge&lt;br&gt;翻唱 : Michael Bolton, 金润吉&lt;br&gt;当一个男人爱上一个女人&lt;br&gt;他的脑子就再也装不下任何东西&lt;br&gt;他宁愿出卖整个世界&lt;br&gt;就为了他寻得的挚爱&lt;br&gt;如果她很坏，他也看不到&lt;br&gt;她不会错&lt;br&gt;他甚至会背弃最好的朋友&lt;br&gt;如果朋友敢轻视她  &lt;/p&gt;
&lt;p&gt;当一个男人爱上一个女人&lt;br&gt;会花光他的每一分&lt;br&gt;来维持他所需要的&lt;br&gt;他愿意放弃所有安逸&lt;br&gt;露宿街头 睡在雨中&lt;br&gt;如果她说就该做这些事  &lt;/p&gt;
&lt;p&gt;当一个男人爱上一个女人&lt;br&gt;他会献出自己的所有&lt;br&gt;试图保住 这份宝贵的爱&lt;br&gt;宝贝请别忽视我  &lt;/p&gt;
&lt;p&gt;当一个男人爱上一个女人&lt;br&gt;他的灵魂深处&lt;br&gt;她能使他痛苦如斯&lt;br&gt;如果她玩弄他如一个傻瓜&lt;br&gt;他也永远后知后觉&lt;br&gt;陷入爱河的人总是盲目  &lt;/p&gt;
&lt;p&gt;是的当一个男人爱上一个女人&lt;br&gt;我完全了解他的心思  &lt;/p&gt;
&lt;p&gt;当一个男人爱上一个女人  &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;When-A-Man-Loves-A-Woman&quot;&gt;&lt;a href=&quot;#When-A-Man-Loves-A-Woman&quot; class=&quot;headerlink&quot; title=&quot;When A Man Loves A Woman&quot;&gt;&lt;/a&gt;When A Man Lov
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>给gitlab添加gitlab-ci和gitlab-runner</title>
    <link href="http://blog.wuliwala.net/2015/11/19/gitlab-ci-and-runner/"/>
    <id>http://blog.wuliwala.net/2015/11/19/gitlab-ci-and-runner/</id>
    <published>2015-11-19T00:52:33.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;给gitlab添加gitlab-ci和gitlab-runner&quot;&gt;&lt;a href=&quot;#给gitlab添加gitlab-ci和gitlab-runner&quot; class=&quot;headerlink&quot; title=&quot;给gitlab添加gitlab-ci和gitlab-runner&quot;&gt;&lt;/a&gt;给gitlab添加gitlab-ci和gitlab-runner&lt;/h1&gt;&lt;h3 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h3&gt;&lt;p&gt;使用的是&lt;strong&gt;gitlab v7.13.3&lt;/strong&gt;。&lt;br&gt;run在docker中。&lt;br&gt;配置了ldap登录，和smtp邮件通知。&lt;strong&gt;失败时会发送邮件通知&lt;/strong&gt;&lt;br&gt;最近测试gitlab-ci服务。  &lt;/p&gt;
&lt;h3 id=&quot;服务配置&quot;&gt;&lt;a href=&quot;#服务配置&quot; class=&quot;headerlink&quot; title=&quot;服务配置:&quot;&gt;&lt;/a&gt;服务配置:&lt;/h3&gt;&lt;p&gt;直接在配置文件gitlab.rb底部打开相关配置，即可使用。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;############################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Url on which GitLab CI will be reachable #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;############################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/tree/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/gitlab-ci/README.md&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ci_external_url &amp;apos;http://ci.gitlab.yourdomain.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# application.yml configuration #&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 这个app_id在gitlab中创建application后获得&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;gitlab_server&amp;apos;] = &amp;#123; &amp;quot;url&amp;quot; =&amp;gt; &amp;apos;http://gitlab.yourdomain.com&amp;apos;, &amp;quot;app_id&amp;quot; =&amp;gt; &amp;apos;xxxxxxxxxxxx&amp;apos;, &amp;quot;app_se&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cret&amp;quot; =&amp;gt; &amp;apos;yyyyyyyyyyyyyyy&amp;apos; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;gitlab_ci_email_from&amp;apos;] = &amp;apos;gitlab@yourdomain.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;gitlab_ci_support_email&amp;apos;] = &amp;apos;sysop@yourdomain.com&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;gitlab_ci_all_broken_builds&amp;apos;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;gitlab_ci_add_pusher&amp;apos;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;builds_directory&amp;apos;] = &amp;apos;/var/opt/gitlab/gitlab-ci/builds&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;gravatar_enabled&amp;apos;] = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# gitlab_ci[&amp;apos;gravatar_plain_url&amp;apos;] = &amp;quot;http://www.gravatar.com/avatar/%&amp;#123;hash&amp;#125;?s=%&amp;#123;size&amp;#125;&amp;amp;d=mm&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# gitlab_ci[&amp;apos;gravatar_ssl_url&amp;apos;] =  &amp;quot;https://secure.gravatar.com/avatar/%&amp;#123;hash&amp;#125;?s=%&amp;#123;size&amp;#125;&amp;amp;d=mm&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;## For setting up backups&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#backups&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab_ci[&amp;apos;backup_path&amp;apos;] = &amp;quot;/var/opt/gitlab/ci-backups&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# gitlab_ci[&amp;apos;backup_keep_time&amp;apos;] = 604800&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# gitlab_ci[&amp;apos;backup_upload_connection&amp;apos;] = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;apos;provider&amp;apos; =&amp;gt; &amp;apos;AWS&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;apos;region&amp;apos; =&amp;gt; &amp;apos;eu-west-1&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;apos;aws_access_key_id&amp;apos; =&amp;gt; &amp;apos;AKIAKIAKI&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#   &amp;apos;aws_secret_access_key&amp;apos; =&amp;gt; &amp;apos;secret123&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;配置gitlab-runner&quot;&gt;&lt;a href=&quot;#配置gitlab-runner&quot; class=&quot;headerlink&quot; title=&quot;配置gitlab-runner&quot;&gt;&lt;/a&gt;配置gitlab-runner&lt;/h4&gt;&lt;p&gt;PS:新版本gitlab-runner从ruby改为go语言实现，名字为gitlab-ci-multi-runner，软链接为gitlab-runner&lt;br&gt;官方文档:&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-ci-multi-runner/blob/master/docs/install/docker.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Run gitlab-runner in a container&lt;/a&gt;&lt;br&gt;启动gitlab-runner服务&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -d --name gitlab-runner --restart always \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -v /srv/gitlab-runner/config:/etc/gitlab-runner \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  gitlab/gitlab-runner:latest&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;也可以用官方的另一个实现：&lt;br&gt;&lt;figure class=&quot;highlight dns&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gitlab/gitlab-runner    latest              &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;e&lt;span class=&quot;number&quot;&gt;8077e209f5&lt;/span&gt;        &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; hours ago        &lt;span class=&quot;number&quot;&gt;304&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; MB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gitlab/gitlab-runner    alpine              &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;c431ac8f30f        &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt; hours ago        &lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;98&lt;/span&gt; MB&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注册runner&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker exec -it gitlab-runner gitlab-runner register&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please enter the gitlab-&lt;span class=&quot;keyword&quot;&gt;ci&lt;/span&gt; coordinator URL (&lt;span class=&quot;keyword&quot;&gt;e&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;g&lt;/span&gt;. https:&lt;span class=&quot;comment&quot;&gt;//gitlab.com/ci):&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http:&lt;span class=&quot;comment&quot;&gt;//ci.gitlab.yourdomain.com/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please enter the gitlab-&lt;span class=&quot;keyword&quot;&gt;ci&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; this runner:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 这个&lt;span class=&quot;keyword&quot;&gt;token&lt;/span&gt;在gitlab-&lt;span class=&quot;keyword&quot;&gt;ci&lt;/span&gt;中Runners选项卡获得&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;e0ab42c98fff06b3dd4f3d4c776bc4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please enter the gitlab-&lt;span class=&quot;keyword&quot;&gt;ci&lt;/span&gt; description &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; this runner:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[3366d1121148]: &lt;span class=&quot;keyword&quot;&gt;test&lt;/span&gt;-&lt;span class=&quot;keyword&quot;&gt;ci&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please enter the gitlab-&lt;span class=&quot;keyword&quot;&gt;ci&lt;/span&gt; tags &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; this runner (comma separated):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;delpoy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INFO[0086] e0ab42c9 Registering runner... succeeded                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please enter the executor: ssh, &lt;span class=&quot;keyword&quot;&gt;shell&lt;/span&gt;, parallels, docker, docker-ssh:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[]: &lt;span class=&quot;keyword&quot;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INFO[0097] Runner registered successfully. Feel free to start it, but &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; it&#39;s running already the config should be automatically reloaded!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注册成功后，查看生成的配置文件&lt;/strong&gt;&lt;br&gt;&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat  /srv/gitlab-runner/config/config.toml &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;concurrent&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[runners]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;url&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;http://ci.gitlab.yourdomain.com/&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;token&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;c87c7ad883af316b7d173c1094c6fe&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;test-ci&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;executor&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;shell&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [runners.ssh]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [runners.docker]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;image&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;privileged&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  [runners.parallels]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;base_name&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;debug:&lt;/strong&gt;&lt;br&gt;&lt;code&gt;docker logs -f gitlab-runner&lt;/code&gt;&lt;br&gt;&lt;code&gt;docker exec -it gitlab-runner gitlab-runner --help&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;使用gitlab-ci&quot;&gt;&lt;a href=&quot;#使用gitlab-ci&quot; class=&quot;headerlink&quot; title=&quot;使用gitlab-ci&quot;&gt;&lt;/a&gt;使用gitlab-ci&lt;/h4&gt;&lt;p&gt;打开&lt;a href=&quot;http://ci.gitlab.yourdomain.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://ci.gitlab.yourdomain.com&lt;/a&gt; ，会跳转到&lt;a href=&quot;http://gitlab.yourdomain.com去做验证，然后跳回。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gitlab.yourdomain.com去做验证，然后跳回。&lt;/a&gt;&lt;br&gt;选择一个需要CI的项目，点击”Add project to CI”。&lt;/p&gt;
&lt;p&gt;#####.gitlab-ci.yml配置:&lt;br&gt;在项目中添加.gitlab-ci.yml文件，然后push到gitlab&lt;br&gt;&lt;code&gt;git add . ; git commit -m &amp;#39;test&amp;#39; ; git push&lt;/code&gt;&lt;br&gt;&lt;strong&gt;注意：有坑！如果按照官方最新文档的话，会构建失败，因为句法有变化，可用下面这个链接在线验证配置文件。&lt;/strong&gt;&lt;br&gt;&lt;a href=&quot;http://ci.gitlab.yourdomain.com/lint&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线编辑器&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面是一个栗子&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;staging:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  type: deploy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  script:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - echo &amp;apos;deploy to test env&amp;apos; &amp;gt;&amp;gt; /tmp/test-ci.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - echo &amp;quot;CI:$CI CI_SERVER:$CI_SERVER CI_SERVER_NAME:$CI_SERVER_NAME GITLAB_CI:$GITLAB_CI CI_SERVER_VERSION:$CI_SERVER_VERSION CI_SERVER_REVISION:$CI_SERVER_REVISION CI_BUILD_REF:$CI_BUILD_REF CI_BUILD_BEFORE_SHA:$CI_BUILD_BEFORE_SHA  CI_BUILD_REF_NAME:$CI_BUILD_REF_NAME CI_BUILD_ID:$CI_BUILD_ID CI_BUILD_REPO:$CI_BUILD_REPO CI_PROJECT_DIR:$CI_PROJECT_DIR&amp;quot; &amp;gt;&amp;gt;/tmp/test-ci.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  only:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#  - master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;production:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  type: deploy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  script:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - echo &amp;apos;deploy to production env&amp;apos;  &amp;gt;&amp;gt; /tmp/test-ci.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - echo &amp;quot;CI:$CI CI_SERVER:$CI_SERVER CI_SERVER_NAME:$CI_SERVER_NAME GITLAB_CI:$GITLAB_CI CI_SERVER_VERSION:$CI_SERVER_VERSION CI_SERVER_REVISION:$CI_SERVER_REVISION CI_BUILD_REF:$CI_BUILD_REF CI_BUILD_BEFORE_SHA:$CI_BUILD_BEFORE_SHA  CI_BUILD_REF_NAME:$CI_BUILD_REF_NAME CI_BUILD_ID:$CI_BUILD_ID CI_BUILD_REPO:$CI_BUILD_REPO CI_PROJECT_DIR:$CI_PROJECT_DIR&amp;quot; &amp;gt;&amp;gt;/tmp/test-ci.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  only:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - tags&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  # except:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  #   - stable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  #   - /^deploy-.*$/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;# cat /tmp/test-ci.log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deploy to test env&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CI:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CI_SERVER&lt;/span&gt;:yes &lt;span class=&quot;built_in&quot;&gt;CI_SERVER_NAME&lt;/span&gt;:GitLab CI GITLAB_CI:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CI_SERVER_VERSION&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;CI_SERVER_REVISION&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REF&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;66&lt;/span&gt;b8d99e51ff39e98629068bb5e9ef302288e899 &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_BEFORE_SHA&lt;/span&gt;:b7c8b5d458375902426bb0777da3c0ddf553f308  &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REF_NAME&lt;/span&gt;:my-dev &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_ID&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REPO&lt;/span&gt;:http:&lt;span class=&quot;comment&quot;&gt;//gitlab-ci-token:e0ab42c98fff06b3dd4f3d4c776bc4@gitlab.yourdomain.com/arkii/test-ci.git CI_PROJECT_DIR:builds/53b58d35/0/arkii/test-ci&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deploy to production env&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CI:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CI_SERVER&lt;/span&gt;:yes &lt;span class=&quot;built_in&quot;&gt;CI_SERVER_NAME&lt;/span&gt;:GitLab CI GITLAB_CI:&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CI_SERVER_VERSION&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;CI_SERVER_REVISION&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REF&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;66&lt;/span&gt;b8d99e51ff39e98629068bb5e9ef302288e899 &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_BEFORE_SHA&lt;/span&gt;:b7c8b5d458375902426bb0777da3c0ddf553f308  &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REF_NAME&lt;/span&gt;:my-dev &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_ID&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REPO&lt;/span&gt;:http:&lt;span class=&quot;comment&quot;&gt;//gitlab-ci-token:e0ab42c98fff06b3dd4f3d4c776bc4@gitlab.yourdomain.com/arkii/test-ci.git CI_PROJECT_DIR:builds/0c3c27e4/0/arkii/test-ci&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;#####看到这些变量的输出，大家有思路该怎么玩了吗？&lt;/p&gt;
&lt;p&gt;官方文档&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-ci/blob/7-13-stable/doc/builds_configuration/README.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Configuration of your builds with .gitlab-ci.yml&lt;/a&gt;&lt;br&gt;特别重要的说明&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-ci/blob/7-13-stable/doc/examples/README.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方说明&lt;/a&gt;&lt;br&gt;&lt;strong&gt;How your build script is run&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The runner runs the line below before it runs the commands in your build script:&lt;br&gt;&lt;code&gt;cd /gitlab-ci-runner/tmp/builds &amp;amp;&amp;amp; git clone git@gitlab_server_fqdn:group/project.git project-1 &amp;amp;&amp;amp; cd project-1 &amp;amp;&amp;amp; git checkout master&lt;/code&gt;&lt;br&gt;&lt;strong&gt;Build script example&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;bundle install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bundle &lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt; rake db:create RAILS_ENV=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bundle &lt;span class=&quot;built_in&quot;&gt;exec&lt;/span&gt; rake db:migrate RAILS_ENV=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;script/run_all_tests&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;Environmental variables&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The runner sets the following environmental variables:&lt;br&gt;&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CI=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_SERVER&lt;/span&gt;=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_SERVER_NAME&lt;/span&gt;=GitLab CI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GITLAB_CI=&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_SERVER_VERSION&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_SERVER_REVISION&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REF&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_BUILD_BEFORE_SHA&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REF_NAME&lt;/span&gt; (branch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_BUILD_ID&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_BUILD_REPO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CI_PROJECT_DIR&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;给gitlab添加gitlab-ci和gitlab-runner&quot;&gt;&lt;a href=&quot;#给gitlab添加gitlab-ci和gitlab-runner&quot; class=&quot;headerlink&quot; title=&quot;给gitlab添加gitlab-ci和gitlab-ru
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>aliyunEC云主机磁盘安全扩容</title>
    <link href="http://blog.wuliwala.net/2015/11/19/aliyun-disk-growth-online/"/>
    <id>http://blog.wuliwala.net/2015/11/19/aliyun-disk-growth-online/</id>
    <published>2015-11-18T18:49:29.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;p&gt;云主机磁盘（块设备），实际是虚拟文件，当磁盘空间不够时，可以在云服务提供商后台增加磁盘容量，下面是用户需要做的操作。  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统版本：CentOS6&lt;/li&gt;
&lt;li&gt;数据盘文件系统：xfs&lt;/li&gt;
&lt;li&gt;数据盘挂载点：/mount_point&lt;/li&gt;
&lt;li&gt;数据盘设备名：/dev/xvdb&lt;/li&gt;
&lt;li&gt;当前容量: &lt;code&gt;df -lh&lt;/code&gt;&lt;br&gt;&lt;code&gt;/dev/xvdb1       27G   23G  4.0G  85% /mount_point&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;扩容后容量：&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;步骤：&quot;&gt;&lt;a href=&quot;#步骤：&quot; class=&quot;headerlink&quot; title=&quot;步骤：&quot;&gt;&lt;/a&gt;步骤：&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;停止服务 &lt;code&gt;service nginx stop&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看是否有其他程序正在打开分区&lt;code&gt;lsof /mount_point&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;umount分区 &lt;code&gt;umount /mount_point&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看磁盘信息，可看到这块盘已经是100GB大小，但是系统还不能使用。&lt;/p&gt;
&lt;figure class=&quot;highlight dns&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# fdisl -l /dev/xvdb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/xvdb: &lt;span class=&quot;number&quot;&gt;107&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; GB, &lt;span class=&quot;number&quot;&gt;107374182400&lt;/span&gt; bytes, &lt;span class=&quot;number&quot;&gt;209715200&lt;/span&gt;     sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Device       Start      End         Blocks     Id  System&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvdb1   &lt;span class=&quot;number&quot;&gt;7999488&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;62914559&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;27457536&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;83&lt;/span&gt;  Linux&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;修改分区表&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# fdisk /dev/xvdb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Welcome to fdisk (util-linux 2.23.2).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Changes will remain in memory only, until you decide to write them.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Be careful before using the write command.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m for &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;): p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/xvdb: &lt;span class=&quot;number&quot;&gt;107.4&lt;/span&gt; GB, &lt;span class=&quot;number&quot;&gt;107374182400&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;209715200&lt;/span&gt; sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = sectors &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;logical&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;physical&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;minimum&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;optimal&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk label &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt;: dos&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: &lt;span class=&quot;number&quot;&gt;0x000dc675&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Device Boot      &lt;span class=&quot;keyword&quot;&gt;Start&lt;/span&gt;         &lt;span class=&quot;keyword&quot;&gt;End&lt;/span&gt;      Blocks   &lt;span class=&quot;keyword&quot;&gt;Id&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;System&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvdb1         &lt;span class=&quot;number&quot;&gt;7999488&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;62914559&lt;/span&gt;    &lt;span class=&quot;number&quot;&gt;27457536&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;83&lt;/span&gt;  Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;): d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Selected &lt;span class=&quot;keyword&quot;&gt;partition&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Partition&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; deleted&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;): p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/xvdb: &lt;span class=&quot;number&quot;&gt;107.4&lt;/span&gt; GB, &lt;span class=&quot;number&quot;&gt;107374182400&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;209715200&lt;/span&gt; sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = sectors &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;logical&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;physical&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;minimum&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;optimal&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk label &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt;: dos&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: &lt;span class=&quot;number&quot;&gt;0x000dc675&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Device Boot      &lt;span class=&quot;keyword&quot;&gt;Start&lt;/span&gt;         &lt;span class=&quot;keyword&quot;&gt;End&lt;/span&gt;      Blocks   &lt;span class=&quot;keyword&quot;&gt;Id&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;System&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;): n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Partition&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   p   primary (&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; primary, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extended&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; free)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   e   &lt;span class=&quot;keyword&quot;&gt;extended&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Select&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; p): p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Partition&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-4&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;First&lt;/span&gt; sector (&lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-209715199&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2048&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;7999488&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Last&lt;/span&gt; sector, +sectors &lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; +&lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt;&amp;#123;K,M,G&amp;#125; (&lt;span class=&quot;number&quot;&gt;7999488&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-209715199&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;209715199&lt;/span&gt;): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Using&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;209715199&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Partition&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt; Linux &lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;96.2&lt;/span&gt; GiB &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;): p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/xvdb: &lt;span class=&quot;number&quot;&gt;107.4&lt;/span&gt; GB, &lt;span class=&quot;number&quot;&gt;107374182400&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;209715200&lt;/span&gt; sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = sectors &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;logical&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;physical&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O &lt;span class=&quot;keyword&quot;&gt;size&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;minimum&lt;/span&gt;/&lt;span class=&quot;keyword&quot;&gt;optimal&lt;/span&gt;): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk label &lt;span class=&quot;keyword&quot;&gt;type&lt;/span&gt;: dos&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: &lt;span class=&quot;number&quot;&gt;0x000dc675&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Device Boot      &lt;span class=&quot;keyword&quot;&gt;Start&lt;/span&gt;         &lt;span class=&quot;keyword&quot;&gt;End&lt;/span&gt;      Blocks   &lt;span class=&quot;keyword&quot;&gt;Id&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;System&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvdb1         &lt;span class=&quot;number&quot;&gt;7999488&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;209715199&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;100857856&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;83&lt;/span&gt;  Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;help&lt;/span&gt;): wq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The &lt;span class=&quot;keyword&quot;&gt;partition&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; has been altered!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Calling&lt;/span&gt; ioctl() &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; re-&lt;span class=&quot;keyword&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;partition&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Syncing disks.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看修改结果&lt;/p&gt;
&lt;figure class=&quot;highlight armasm&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# fdisk -l /dev/xvdb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;Disk&lt;/span&gt; /dev/xvdb: &lt;span class=&quot;number&quot;&gt;107&lt;/span&gt;.&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; GB, &lt;span class=&quot;number&quot;&gt;107374182400&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes, &lt;/span&gt;&lt;span class=&quot;number&quot;&gt;209715200&lt;/span&gt; sectors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;Units&lt;/span&gt; = sectors of &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;Sector&lt;/span&gt; size (logical/physical): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes &lt;/span&gt;/ &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;I/O size (minimum/optimal): &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes &lt;/span&gt;/ &lt;span class=&quot;number&quot;&gt;512&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;span class=&quot;symbol&quot;&gt;Disk&lt;/span&gt; label type: dos&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;Disk&lt;/span&gt; identifier: &lt;span class=&quot;number&quot;&gt;0x000dc675&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Device &lt;span class=&quot;keyword&quot;&gt;Boot &lt;/span&gt;     Start         &lt;span class=&quot;meta&quot;&gt;End&lt;/span&gt;      &lt;span class=&quot;keyword&quot;&gt;Blocks &lt;/span&gt;  Id  System&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvdb1         &lt;span class=&quot;number&quot;&gt;7999488&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;209715199&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;100857856&lt;/span&gt;   &lt;span class=&quot;number&quot;&gt;83&lt;/span&gt;  Linux&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用xfs_growfs命令对xfs文件系统进行扩容&lt;/p&gt;
&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# xfs_growfs /dev/xvdb1 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;meta-data=/dev/xvdb1&lt;/span&gt;             &lt;span class=&quot;attr&quot;&gt;isize=256&lt;/span&gt;    &lt;span class=&quot;attr&quot;&gt;agcount=4,&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;agsize=1716096&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;blks&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         =                       &lt;span class=&quot;attr&quot;&gt;sectsz=512&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;attr=2,&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;projid32bit=0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         =                       &lt;span class=&quot;attr&quot;&gt;crc=0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;data&lt;/span&gt;     =                       &lt;span class=&quot;attr&quot;&gt;bsize=4096&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;blocks=6864384,&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;imaxpct=25&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         =                       &lt;span class=&quot;attr&quot;&gt;sunit=0&lt;/span&gt;      &lt;span class=&quot;attr&quot;&gt;swidth=0&lt;/span&gt; blks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;naming&lt;/span&gt;   =version &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;              &lt;span class=&quot;attr&quot;&gt;bsize=4096&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;ascii-ci=0&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;ftype=0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;log&lt;/span&gt;      =internal               &lt;span class=&quot;attr&quot;&gt;bsize=4096&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;blocks=3351,&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;version=2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         =                       &lt;span class=&quot;attr&quot;&gt;sectsz=512&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;sunit=0&lt;/span&gt; blks, &lt;span class=&quot;attr&quot;&gt;lazy-count=1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;realtime&lt;/span&gt; =none                   &lt;span class=&quot;attr&quot;&gt;extsz=4096&lt;/span&gt;   &lt;span class=&quot;attr&quot;&gt;blocks=0,&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;rtextents=0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data blocks changed from &lt;span class=&quot;number&quot;&gt;6864384&lt;/span&gt; to &lt;span class=&quot;number&quot;&gt;25214464&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;挂载分区&lt;code&gt;# mount -a&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;查看目前可用空间&lt;figure class=&quot;highlight applescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# df -lh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem      Size  Used Avail Use% Mounted &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvdb1       &lt;span class=&quot;number&quot;&gt;97&lt;/span&gt;G   &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;G   &lt;span class=&quot;number&quot;&gt;74&lt;/span&gt;G  &lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;% /mount_point&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://bbs.aliyun.com/read/239398.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;aliyun磁盘原地扩容官方说明&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://help.aliyun.com/document_detail/ecs/operation-guide/disk-operation/resize.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;aliyun磁盘原地扩容官方操作说明&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;云主机磁盘（块设备），实际是虚拟文件，当磁盘空间不够时，可以在云服务提供商后台增加磁盘容量，下面是用户需要做的操作。  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统版本：CentOS6&lt;/li&gt;
&lt;li&gt;数据盘文件系统：xfs&lt;/li&gt;
&lt;li&gt;数据盘挂载点：/mount_point&lt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>icinga2/nagios 分级通知</title>
    <link href="http://blog.wuliwala.net/2015/09/22/icinga2-escalation-notification/"/>
    <id>http://blog.wuliwala.net/2015/09/22/icinga2-escalation-notification/</id>
    <published>2015-09-21T22:52:12.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;p&gt;icinga是nagios的派生版，但又增加了很多改进，icinga2版本配置文件变化较大。&lt;br&gt;下面是设置分级别通知策略的配置方法。&lt;br&gt;分级通知主要用于 业务负责人员未收到通知的情况通知全体联系人。   &lt;/p&gt;
&lt;p&gt;下面的配置解析：&lt;br&gt;出现问题后立刻通知web组管理员，如果15分钟后问题没有得到处理，接下来的30分钟以每5分钟一次的频率再次通知web组管理员；45分钟后问题仍存在，通知所有管理员。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vim /etc/icinga2/conf.d/notifications.conf&lt;/code&gt;  &lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// &lt;span class=&quot;keyword&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; escalation notification &lt;span class=&quot;keyword&quot;&gt;level&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;apply&lt;/span&gt; Notification &lt;span class=&quot;string&quot;&gt;&quot;wechat-2nd-level-web&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; Service &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;wechat-service-notification-template&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  user_groups = [ &lt;span class=&quot;string&quot;&gt;&quot;admins-web&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;interval&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  times = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;45&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; service.&lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;ping4&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;nrpe_disk_read_write&quot;&lt;/span&gt;, service.&lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;apply&lt;/span&gt; Notification &lt;span class=&quot;string&quot;&gt;&quot;wechat-1st-level-web&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;to&lt;/span&gt; Service &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;wechat-service-notification-template&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  user_groups = [ &lt;span class=&quot;string&quot;&gt;&quot;icingaadmins&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;interval&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  times = &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;begin&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;45&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; service.&lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;ping4&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;match&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;nrpe_disk_read_write&quot;&lt;/span&gt;, service.&lt;span class=&quot;keyword&quot;&gt;name&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &lt;span class=&quot;keyword&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; escalation notification &lt;span class=&quot;keyword&quot;&gt;level&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;官方的文档如下&quot;&gt;&lt;a href=&quot;#官方的文档如下&quot; class=&quot;headerlink&quot; title=&quot;官方的文档如下&quot;&gt;&lt;/a&gt;官方的文档如下&lt;/h3&gt;&lt;p&gt;Similar example for advanced notification apply rule filters: If the service attribute notes contains the has gold support 24x7 string AND one of the two condition passes: Either the customer host custom attribute is set to customer-xy OR the host custom attribute always_notify is set to true.&lt;/p&gt;
&lt;p&gt;The notification is ignored for services whose host name ends with *internal OR the priority custom attribute is less than 2.&lt;/p&gt;
&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;template Notification &lt;span class=&quot;string&quot;&gt;&quot;cust-xy-notification&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;users&lt;/span&gt; = [ &lt;span class=&quot;string&quot;&gt;&quot;noc-xy&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;mgmt-xy&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;command&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;mail-service-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply Notification &lt;span class=&quot;string&quot;&gt;&quot;notify-cust-xy-mysql&quot;&lt;/span&gt; to Service &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;cust-xy-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign where match(&lt;span class=&quot;string&quot;&gt;&quot;*has gold support 24x7*&quot;&lt;/span&gt;, service.notes) &amp;amp;&amp;amp; (host.vars.&lt;span class=&quot;attr&quot;&gt;customer&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;customer-xy&quot;&lt;/span&gt; || host.vars.&lt;span class=&quot;attr&quot;&gt;always_notify&lt;/span&gt; == &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ignore where match(&lt;span class=&quot;string&quot;&gt;&quot;*internal&quot;&lt;/span&gt;, host.name) || (service.vars.priority &amp;lt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;amp;&amp;amp; host.vars.&lt;span class=&quot;attr&quot;&gt;is_clustered&lt;/span&gt; == &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;If the problem does not get resolved nor acknowledged preventing further notifications the escalation-sms-1st-level user will be escalated 1h after the initial problem was notified, but only for one hour (2h as end key for the times dictionary).  &lt;/p&gt;
&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apply Notification &lt;span class=&quot;string&quot;&gt;&quot;mail&quot;&lt;/span&gt; to Service &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;generic-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;command&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;mail-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;users&lt;/span&gt; = [ &lt;span class=&quot;string&quot;&gt;&quot;icingaadmin&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign where service.&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;ping4&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply Notification &lt;span class=&quot;string&quot;&gt;&quot;escalation-sms-2nd-level&quot;&lt;/span&gt; to Service &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;generic-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;command&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;sms-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;users&lt;/span&gt; = [ &lt;span class=&quot;string&quot;&gt;&quot;icinga-oncall-2nd-level&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;times&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;begin&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;end&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign where service.&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;ping4&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apply Notification &lt;span class=&quot;string&quot;&gt;&quot;escalation-sms-1st-level&quot;&lt;/span&gt; to Service &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;generic-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;command&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;sms-notification&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;users&lt;/span&gt; = [ &lt;span class=&quot;string&quot;&gt;&quot;icinga-oncall-1st-level&quot;&lt;/span&gt; ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;times&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;begin&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;end&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assign where service.&lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt; == &lt;span class=&quot;string&quot;&gt;&quot;ping4&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/object-types#objecttype-notification&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方关于notification定义的文档&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/monitoring-basics#notification-delay&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方关于notification配置技巧文档&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;icinga是nagios的派生版，但又增加了很多改进，icinga2版本配置文件变化较大。&lt;br&gt;下面是设置分级别通知策略的配置方法。&lt;br&gt;分级通知主要用于 业务负责人员未收到通知的情况通知全体联系人。   &lt;/p&gt;
&lt;p&gt;下面的配置解析：&lt;br&gt;出现问题后立刻通知we
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ssh注入秘钥要求密码</title>
    <link href="http://blog.wuliwala.net/2015/09/15/ssh-key-auth-require-password/"/>
    <id>http://blog.wuliwala.net/2015/09/15/ssh-key-auth-require-password/</id>
    <published>2015-09-14T23:59:34.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;p&gt;已经通过kickstart安装过程中注入ssh秘钥的系统，启动后ssh连接的时候仍然要求输入密码。&lt;br&gt;但是再执行一遍ssh-copy-id后，ssh就又能免密码连接。&lt;br&gt;最后确认是selinux问题。&lt;br&gt;解决办法是执行&lt;code&gt;/sbin/restorecon -r /root/.ssh&lt;/code&gt;&lt;br&gt;安装系统时关闭SELinux，可以在kickstart中增加一行&lt;code&gt;selinux --disabled&lt;/code&gt;。&lt;br&gt;已经完整完系统的，可以&lt;code&gt;sed -i -e &amp;#39;/SELINUX/s/enforcing/disabled/&amp;#39; /etc/selinux/config&lt;/code&gt; 重启系统来关闭SELinux。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;已经通过kickstart安装过程中注入ssh秘钥的系统，启动后ssh连接的时候仍然要求输入密码。&lt;br&gt;但是再执行一遍ssh-copy-id后，ssh就又能免密码连接。&lt;br&gt;最后确认是selinux问题。&lt;br&gt;解决办法是执行&lt;code&gt;/sbin/restorecon
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>pnp4nagios数值缩短问题</title>
    <link href="http://blog.wuliwala.net/2015/09/08/pnp4nagioszi-dong-diao-zheng-shu-zhi/"/>
    <id>http://blog.wuliwala.net/2015/09/08/pnp4nagioszi-dong-diao-zheng-shu-zhi/</id>
    <published>2015-09-07T23:27:51.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;p&gt;其实就是指定rrdtool的一个参数 –units-exponent 0&lt;br&gt;&lt;code&gt;vim /usr/local/pnp4nagios/share/templates/get_cdn_bw_usage.php&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight cos&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Plugin: get_cdn_bw_usage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Output: Last &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;mins &lt;span class=&quot;number&quot;&gt;10140.73218&lt;/span&gt;Mbp/&lt;span class=&quot;keyword&quot;&gt;s&lt;/span&gt; | data=&lt;span class=&quot;number&quot;&gt;11040.73218&lt;/span&gt;Mbps&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;$opt&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot; --units-exponent 0 --vertical-label \&quot;&lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;$UNIT&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]\&lt;span class=&quot;string&quot;&gt;&quot; --title \&quot;&lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;$servicedesc&lt;/span&gt;\&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;$def&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]  = &lt;span class=&quot;string&quot;&gt;&quot;DEF:var1=$RRDFILE[1]:$DS[1]:AVERAGE &quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;$def&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] .= &lt;span class=&quot;string&quot;&gt;&quot;AREA:var1#0066FF:\&quot;&lt;/span&gt;bandwidth\&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;$def&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] .= &lt;span class=&quot;string&quot;&gt;&quot;GPRINT:var1:LAST:\&quot;&lt;/span&gt;%.&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;lf &lt;span class=&quot;built_in&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;$UNIT&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] last\&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;$def&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] .= &lt;span class=&quot;string&quot;&gt;&quot;GPRINT:var1:AVERAGE:\&quot;&lt;/span&gt;%.&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;lf &lt;span class=&quot;built_in&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;$UNIT&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] avg\&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;$def&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] .= &lt;span class=&quot;string&quot;&gt;&quot;GPRINT:var1:MAX:\&quot;&lt;/span&gt;%.&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;lf &lt;span class=&quot;built_in&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;built_in&quot;&gt;$UNIT&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] max\\n\&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;其实就是指定rrdtool的一个参数 –units-exponent 0&lt;br&gt;&lt;code&gt;vim /usr/local/pnp4nagios/share/templates/get_cdn_bw_usage.php&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;hig
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>rsyslog收集本地系统和服务日志到logstash</title>
    <link href="http://blog.wuliwala.net/2015/09/07/rsyslog-send-locallog-to-logstash/"/>
    <id>http://blog.wuliwala.net/2015/09/07/rsyslog-send-locallog-to-logstash/</id>
    <published>2015-09-07T01:54:24.000Z</published>
    <updated>2016-01-25T11:18:39.000Z</updated>
    
    <content type="html">&lt;p&gt;最近做了一个项目，将Linux服务器的系统日志以及服务日志收集到elk。&lt;br&gt;期间从头学习了syslog rsyslog。&lt;br&gt;有几个比较重要的概念: facility, input module。&lt;br&gt;input module使用了imfile，功能为：将文本文件读取到rsyslog。&lt;br&gt;将所有服务软件的日志标记为service，最后使用规则匹配，之后发送到远端logstash服务器。&lt;br&gt;我使用local3作为所有服务软件的facility配置。主要是为了便于日志归集，因为默认情况下读取文件的内容会记录到本机/var/log/messages一份。&lt;br&gt;步骤如下&lt;br&gt;首先增加rsyslog主配置文件:&lt;br&gt;&lt;code&gt;sed -i -e &amp;#39;/\/var\/log\/messages/s/^/&amp;amp;local3.none\;/&amp;#39; -e &amp;#39;6a\$ModLoad imfile\n&amp;#39; /etc/rsyslog.conf&lt;/code&gt;&lt;br&gt;&lt;code&gt;echo &amp;quot;if \$programname == &amp;#39;service&amp;#39; then @@elk.zol.com.cn&amp;quot;  &amp;gt;&amp;gt;/etc/rsyslog.conf&lt;/code&gt;&lt;br&gt;添加Apache错误日志:  &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat &amp;lt;&amp;lt;-&amp;quot;RSYSLOGEOF&amp;quot; &amp;gt;/etc/rsyslog.d/httpd.conf 
$InputFileName /var/log/httpd/error_log
$InputFileStateFile httpd_error.stat
$InputFileTag service:
$InputFileFacility local3
$InputRunFileMonitor
$InputFilePollingInterval 60
RSYSLOGEOF
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;重启rsyslog&lt;br&gt;&lt;code&gt;service rsyslog restart&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然后，如果Apache服务报错，而且已经开启日志记录到/var/log/httpd/error_log，远端kibana界面中就能搜索到。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近做了一个项目，将Linux服务器的系统日志以及服务日志收集到elk。&lt;br&gt;期间从头学习了syslog rsyslog。&lt;br&gt;有几个比较重要的概念: facility, input module。&lt;br&gt;input module使用了imfile，功能为：将文本文件读
    
    </summary>
    
    
  </entry>
  
</feed>
