<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tranquility Garden</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Focus on Python Cloud Container DevOps.">
<meta property="og:type" content="website">
<meta property="og:title" content="Tranquility Garden">
<meta property="og:url" content="http://blog.wuliwala.net/page/2/index.html">
<meta property="og:site_name" content="Tranquility Garden">
<meta property="og:description" content="Focus on Python Cloud Container DevOps.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tranquility Garden">
<meta name="twitter:description" content="Focus on Python Cloud Container DevOps.">
  
    <link rel="alternate" href="http://blog.wuliwala.net/atom.xml" title="Tranquility Garden" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
<!--  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-72217808-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tranquility Garden</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="http://blog.wuliwala.net">Home</a>
        
          <a class="main-nav-link" href="http://blog.wuliwala.net/archives">Archives</a>
        
          <a class="main-nav-link" href="http://blog.wuliwala.net/about">About</a>
        
          <a class="main-nav-link" href="https://github.com/arkii">GitHub</a>
        
          <a class="main-nav-link" href="https://hub.docker.com/u/arkii">DockerHub</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="http://blog.wuliwala.net/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.wuliwala.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-rsyslog-send-locallog-to-logstash" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/07/rsyslog-send-locallog-to-logstash/" class="article-date">
  <time datetime="2015-09-07T01:54:24.000Z" itemprop="datePublished">2015-09-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/07/rsyslog-send-locallog-to-logstash/">rsyslog收集本地系统和服务日志到logstash</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近做了一个项目，将Linux服务器的系统日志以及服务日志收集到elk。<br>期间从头学习了syslog rsyslog。<br>有几个比较重要的概念: facility, input module。<br>input module使用了imfile，功能为：将文本文件读取到rsyslog。<br>将所有服务软件的日志标记为service，最后使用规则匹配，之后发送到远端logstash服务器。<br>我使用local3作为所有服务软件的facility配置。主要是为了便于日志归集，因为默认情况下读取文件的内容会记录到本机/var/log/messages一份。<br>步骤如下<br>首先增加rsyslog主配置文件:<br><code>sed -i -e &#39;/\/var\/log\/messages/s/^/&amp;local3.none\;/&#39; -e &#39;6a\$ModLoad imfile\n&#39; /etc/rsyslog.conf</code><br><code>echo &quot;if \$programname == &#39;service&#39; then @@elk.zol.com.cn&quot;  &gt;&gt;/etc/rsyslog.conf</code><br>添加Apache错误日志:  </p>
<pre><code>cat &lt;&lt;-&quot;RSYSLOGEOF&quot; &gt;/etc/rsyslog.d/httpd.conf 
$InputFileName /var/log/httpd/error_log
$InputFileStateFile httpd_error.stat
$InputFileTag service:
$InputFileFacility local3
$InputRunFileMonitor
$InputFilePollingInterval 60
RSYSLOGEOF
</code></pre><p>重启rsyslog<br><code>service rsyslog restart</code></p>
<p>然后，如果Apache服务报错，而且已经开启日志记录到/var/log/httpd/error_log，远端kibana界面中就能搜索到。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/09/07/rsyslog-send-locallog-to-logstash/" data-id="cilvxzsp20011d9s6qenvqqb1" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/09/07/rsyslog-send-locallog-to-logstash/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-set-esxi-log-server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/31/set-esxi-log-server/" class="article-date">
  <time datetime="2015-08-30T23:48:32.000Z" itemprop="datePublished">2015-08-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/31/set-esxi-log-server/">vmware esxi log server</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ESXi client –&gt; Configuration –&gt; Advanced Settings –&gt; Syslog –&gt; Syslog.global.logHost=udp://your-syslog-server:514  </p>
<p>ESXi client –&gt; Configuration –&gt; Security Profile –&gt; Firewall –&gt; Properties –&gt; √ syslog</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/31/set-esxi-log-server/" data-id="cilvxzsp30012d9s6mbc48nam" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/31/set-esxi-log-server/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-compile-tool-for-esxi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/31/compile-tool-for-esxi/" class="article-date">
  <time datetime="2015-08-30T22:18:17.000Z" itemprop="datePublished">2015-08-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/31/compile-tool-for-esxi/">给esxi编译ipmitool</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>vmware 的 ESXi服务器是不带包管理系统的，也不带任何编译工具，所以遇到需要安装软件的情况，需要其他Linux环境来编译跨平台二进制文件。<br>本文主要讲述在CentOS下给ESXi服务器编译ipmitool。<br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">yum -y install autoconf make gcc gcc-c++ glibc glibc-<span class="keyword">static</span> glibc-devel libstdc++ libstdc++-devel</span><br><span class="line">wget <span class="string">http:</span><span class="comment">//nchc.dl.sourceforge.net/project/ipmitool/ipmitool/1.8.15/ipmitool-1.8.15.tar.bz2</span></span><br><span class="line">tar xvf ipmitool<span class="number">-1.8</span><span class="number">.15</span>.tar.bz2</span><br><span class="line">cd ipmitool<span class="number">-1.8</span><span class="number">.15</span></span><br><span class="line">./configure CFLAGS=-m32 LDFLAGS=-<span class="keyword">static</span></span><br><span class="line">make -j8</span><br><span class="line">scp src<span class="regexp">/ipmitool root@your-esxi-host-ip:/</span>opt/</span><br></pre></td></tr></table></figure></p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/opt # ./</span>ipmitool mc info</span><br><span class="line">Device <span class="string">ID                 :</span> <span class="number">32</span></span><br><span class="line">Device <span class="string">Revision           :</span> <span class="number">0</span></span><br><span class="line">Firmware <span class="string">Revision         :</span> <span class="number">1.50</span></span><br><span class="line">IPMI <span class="string">Version              :</span> <span class="number">2.0</span></span><br><span class="line">Manufacturer <span class="string">ID           :</span> <span class="number">674</span></span><br><span class="line">Manufacturer <span class="string">Name         :</span> DELL Inc</span><br><span class="line">Product <span class="string">ID                :</span> <span class="number">256</span> (<span class="number">0x0100</span>)</span><br><span class="line">Product <span class="string">Name              :</span> Unknown (<span class="number">0x100</span>)</span><br><span class="line">Device <span class="string">Available          :</span> yes</span><br><span class="line">Provides Device <span class="string">SDRs      :</span> yes</span><br><span class="line">Additional Device <span class="string">Support :</span></span><br><span class="line">    Sensor Device</span><br><span class="line">    SDR Repository Device</span><br><span class="line">    SEL Device</span><br><span class="line">    FRU Inventory Device</span><br><span class="line">    IPMB Event Receiver</span><br><span class="line">    Bridge</span><br><span class="line">    Chassis Device</span><br><span class="line">Aux Firmware Rev <span class="string">Info     :</span> </span><br><span class="line">    <span class="number">0x00</span></span><br><span class="line">    <span class="number">0x18</span></span><br><span class="line">    <span class="number">0x00</span></span><br><span class="line">    <span class="number">0x00</span></span><br></pre></td></tr></table></figure>
<p><code>/opt # ./ipmitool lan print</code>  </p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Set</span> <span class="keyword">in</span> <span class="attribute">Progress</span>         : <span class="built_in">Set</span> Complete</span><br><span class="line">Auth Type <span class="attribute">Support</span>       : NONE MD2 MD5 PASSWORD </span><br><span class="line">Auth Type <span class="attribute">Enable</span>        : <span class="attribute">Callback</span> : MD2 <span class="attribute">MD5</span> </span><br><span class="line">                        : <span class="attribute">User</span>     : MD2 <span class="attribute">MD5</span> </span><br><span class="line">                        : <span class="attribute">Operator</span> : MD2 <span class="attribute">MD5</span> </span><br><span class="line">                        : <span class="attribute">Admin</span>    : MD2 <span class="attribute">MD5</span> </span><br><span class="line">                        : <span class="attribute">OEM</span>      : </span><br><span class="line">IP Address <span class="attribute">Source</span>       : Static Address</span><br><span class="line">IP <span class="attribute">Address</span>              : <span class="number">10.3</span><span class="number">.0</span><span class="number">.35</span></span><br><span class="line">Subnet <span class="attribute">Mask</span>             : <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">MAC <span class="attribute">Address</span>             : <span class="attribute">e4</span>:<span class="number">5</span><span class="attribute">b</span>:<span class="attribute">dd</span>:<span class="attribute">dd</span>:<span class="attribute">dd</span>:<span class="attribute">dd</span><br><span class="line">SNMP Community String</span>   : public</span><br><span class="line">IP <span class="attribute">Header</span>               : TTL=<span class="number">0x40</span> Flags=<span class="number">0x40</span> Precedence=<span class="number">0x00</span> TOS=<span class="number">0x10</span></span><br><span class="line">Default Gateway <span class="attribute">IP</span>      : <span class="number">10.3</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">Default Gateway <span class="attribute">MAC</span>     : <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">Backup Gateway <span class="attribute">IP</span>       : <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">Backup Gateway <span class="attribute">MAC</span>      : <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line"><span class="number">802.1</span>q VLAN <span class="attribute">ID</span>          : Disabled</span><br><span class="line"><span class="number">802.1</span>q VLAN <span class="attribute">Priority</span>    : <span class="number">0</span></span><br><span class="line">RMCP+ Cipher <span class="attribute">Suites</span>     : <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span></span><br><span class="line">Cipher Suite Priv <span class="attribute">Max</span>   : <span class="attribute">aaaaaaaaaaaaaaa</span></span><br><span class="line">                        :     X=Cipher Suite <span class="attribute">Unused</span></span><br><span class="line">                        :     c=<span class="attribute">CALLBACK</span></span><br><span class="line">                        :     u=<span class="attribute">USER</span></span><br><span class="line">                        :     o=<span class="attribute">OPERATOR</span></span><br><span class="line">                        :     a=<span class="attribute">ADMIN</span></span><br><span class="line">                        :     O=OEM</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/31/compile-tool-for-esxi/" data-id="cilvxzsnl0009d9s6m2jwnr7g" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/31/compile-tool-for-esxi/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cygwin-mysqld" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/24/cygwin-mysqld/" class="article-date">
  <time datetime="2015-08-24T05:12:40.000Z" itemprop="datePublished">2015-08-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/24/cygwin-mysqld/">cygwin下安装mysqld</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><p>首先运行cygwin_setup，选装包：<br>mysql （客户端）<br>mysqld （服务端）</p>
<h3 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h3><p><code>#mysql_install_db</code><br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Installing MySQL system tables...</span><br><span class="line">OK</span><br><span class="line">Filling <span class="keyword">help</span> <span class="keyword">tables</span>...</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> <span class="keyword">start</span> mysqld <span class="keyword">at</span> boot <span class="keyword">time</span> you have <span class="keyword">to</span> copy</span><br><span class="line">support-files/mysql.<span class="keyword">server</span> <span class="keyword">to</span> the <span class="keyword">right</span> place <span class="keyword">for</span> your <span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">PLEASE REMEMBER <span class="keyword">TO</span> <span class="keyword">SET</span> A <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> THE MySQL root <span class="keyword">USER</span> !</span><br><span class="line"><span class="keyword">To</span> <span class="keyword">do</span> so, <span class="keyword">start</span> the <span class="keyword">server</span>, <span class="keyword">then</span> issue the <span class="keyword">following</span> commands:</span><br><span class="line"></span><br><span class="line">/usr/<span class="keyword">bin</span>/mysqladmin -u root <span class="keyword">password</span> <span class="string">'new-password'</span></span><br><span class="line">/usr/<span class="keyword">bin</span>/mysqladmin -u root -h brix <span class="keyword">password</span> <span class="string">'new-password'</span></span><br><span class="line"></span><br><span class="line">Alternatively you can run:</span><br><span class="line">/usr/<span class="keyword">bin</span>/mysql_secure_installation</span><br><span class="line"></span><br><span class="line">which will also give you the <span class="keyword">option</span> <span class="keyword">of</span> removing the <span class="keyword">test</span></span><br><span class="line"><span class="keyword">databases</span> <span class="keyword">and</span> anonymous <span class="keyword">user</span> created <span class="keyword">by</span> <span class="keyword">default</span>.  This <span class="keyword">is</span></span><br><span class="line">strongly recommended <span class="keyword">for</span> production servers.</span><br><span class="line"></span><br><span class="line">See the <span class="keyword">manual</span> <span class="keyword">for</span> more instructions.</span><br><span class="line"></span><br><span class="line">You can <span class="keyword">start</span> the MySQL daemon <span class="keyword">with</span>:</span><br><span class="line">cd /usr ; /usr/bin/mysqld_safe &amp;</span><br><span class="line"></span><br><span class="line">You can test the MySQL daemon with mysql-test-run.pl</span><br><span class="line">cd /usr/mysql-test ; perl mysql-test-run.pl</span><br><span class="line"></span><br><span class="line">Please report any problems at http://bugs.mysql.com/</span><br></pre></td></tr></table></figure></p>
<h3 id="启动mysqld服务"><a href="#启动mysqld服务" class="headerlink" title="启动mysqld服务"></a>启动mysqld服务</h3><p>执行<code>cd /usr ; /usr/bin/mysqld_safe &amp;</code>启动mysql的守护进程。<br>执行<code>mysql_secure_installation</code>，设置root用户的密码，配置一些安全选项。</p>
<p>基本上mysql就安装完了，以后就可以用下面两条命令开启和关闭mysql守护进程：</p>
<p><code>mysqld_safe &amp;</code><br><code>mysqladmin -u root -p shutdown</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/24/cygwin-mysqld/" data-id="cilvxzsnp000ad9s6u0k1sju1" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/24/cygwin-mysqld/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-icinga2-pnp4nagios" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/24/icinga2-pnp4nagios/" class="article-date">
  <time datetime="2015-08-23T23:31:06.000Z" itemprop="datePublished">2015-08-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/24/icinga2-pnp4nagios/">icinga2集成pnp4nagios</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/2015/08/icinga2-pnp4nagios-ifio-2-1.png" alt="alt"></p>
<h1 id="PNP4nagios"><a href="#PNP4nagios" class="headerlink" title="PNP4nagios"></a>PNP4nagios</h1><p><code>cp -r modules/* /usr/share/icingaweb2/modules/</code><br><code>ln -s /usr/local/pnp4nagios/etc/* /etc/pnp4nagios/</code><br><code>#vim /etc/pnp4nagios/npcd.cfg</code><br><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">user</span> = icinga</span><br><span class="line"><span class="attr">group</span> = icinga</span><br><span class="line"><span class="attr">log_type</span> = file</span><br><span class="line"><span class="attr">log_file</span> = /usr/local/pnp4nagios/var/npcd.log</span><br><span class="line"><span class="attr">max_logfile_size</span> = <span class="number">10485760</span></span><br><span class="line"><span class="attr">log_level</span> = <span class="number">0</span> #debug时打开</span><br><span class="line"><span class="attr">perfdata_file_run_cmd</span> = /usr/local/pnp4nagios/libexec/process_perfdata.pl</span><br><span class="line"><span class="attr">perfdata_file_run_cmd_args</span> = --bulk</span><br><span class="line"><span class="attr">identify_npcd</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">npcd_max_threads</span> = <span class="number">5</span></span><br><span class="line"><span class="attr">sleep_time</span> = <span class="number">15</span></span><br><span class="line"><span class="attr">load_threshold</span> = <span class="number">0.0</span></span><br><span class="line"><span class="attr">pid_file</span>=/var/run/npcd.pid</span><br><span class="line"><span class="attr">perfdata_file</span> = /usr/local/pnp4nagios/var/perfdata.dump</span><br><span class="line"><span class="attr">perfdata_spool_dir</span> = /var/spool/icinga2/perfdata</span><br><span class="line"><span class="attr">perfdata_spool_filename</span> = perfdata</span><br><span class="line"><span class="attr">perfdata_file_processing_interval</span> = <span class="number">15</span></span><br></pre></td></tr></table></figure></p>
<p><code>#vim /etc/pnp4nagios/process_perfdata.cfg</code></p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="attr">TIMEOUT</span> = <span class="number">15</span></span><br><span class="line"><span class="attr">USE_RRDs</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">RRDPATH</span> = /usr/local/pnp4nagios/var/perfdata</span><br><span class="line"><span class="attr">RRDTOOL</span> = /usr/bin/rrdtool</span><br><span class="line"><span class="attr">CFG_DIR</span> = /usr/local/pnp4nagios/etc</span><br><span class="line"><span class="attr">RRD_STORAGE_TYPE</span> = SINGLE</span><br><span class="line"><span class="attr">RRD_HEARTBEAT</span> = <span class="number">8460</span></span><br><span class="line"><span class="attr">RRA_CFG</span> = /usr/local/pnp4nagios/etc/rra.cfg</span><br><span class="line"><span class="attr">RRA_STEP</span> = <span class="number">60</span></span><br><span class="line"><span class="attr">LOG_FILE</span> = /usr/local/pnp4nagios/var/perfdata.log</span><br><span class="line"><span class="attr">LOG_LEVEL</span> = <span class="number">0</span> <span class="comment">#debug时打开</span></span><br><span class="line"><span class="attr">XML_ENC</span> = UTF-<span class="number">8</span></span><br><span class="line"><span class="attr">XML_UPDATE_DELAY</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">RRD_DAEMON_OPTS</span> = </span><br><span class="line"><span class="attr">STATS_DIR</span> = /usr/local/pnp4nagios/var/stats</span><br><span class="line"><span class="attr">PREFORK</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">GEARMAN_HOST</span> = localhost:<span class="number">4730</span></span><br><span class="line"><span class="attr">REQUESTS_PER_CHILD</span> = <span class="number">10000</span></span><br><span class="line"><span class="attr">ENCRYPTION</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">KEY</span> = should_be_changed</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">`<span class="comment">#vim /etc/icinga2/features-enabled/perfdata.conf`</span></span><br></pre></td></tr></table></figure>
<p>library “perfdata”<br>object PerfdataWriter “perfdata” {<br>  service_format_template = “DATATYPE::SERVICEPERFDATA\tTIMET::$icinga.timet$\tHOSTNAME::$host.name$\tSERVICEDESC::$service.name$\tSERVICEPERFDATA::$service.<br>  perfdata$\tSERVICECHECKCOMMAND::$service.check_command$$pnp_check_arg1$\tHOSTSTATE::$host.state$\tHOSTSTATETYPE::$host.state_type$\tSERVICESTATE::$service.<br>  state$\tSERVICESTATETYPE::$service.state_type$”<br>}<br><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">`# vim /etc/icinga2/<span class="keyword">conf</span>.<span class="keyword">d</span>/templates.<span class="keyword">conf</span>`</span><br></pre></td></tr></table></figure></p>
<p>template Service “pnp-svc” {<br>  action_url = “/pnp4nagios/graph?host=$HOSTNAME$&amp;srv=$SERVICEDESC$”<br>  vars.pnp_check_arg1 = “”<br>}<br><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">`#vim /etc/icinga2/<span class="keyword">conf</span>.<span class="keyword">d</span>/services.<span class="keyword">conf</span>`</span><br></pre></td></tr></table></figure></p>
<p>apply Service “nrpe_traffic” {<br>  import “generic-service”<br>  import “pnp-svc”<br>  check_command = “nrpe”<br>  assign where host.name == “kddi-pxe”<br>  assign where host.name == “kddi-deploy”<br>  vars.nrpe_timeout = 240<br>  vars.nrpe_command = “check_traffic”<br>  vars.pnp_check_arg1 = “!$nrpe_command$”<br>}<br><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">`#vim <span class="regexp">/usr/</span>local<span class="regexp">/pnp4nagios/</span>etc<span class="regexp">/check_commands/</span>nrpe.cfg`</span><br></pre></td></tr></table></figure></p>
<p>CUSTOM_TEMPLATE = 0,1<br>DATATYPE = GAUGE<br>USE_MAX_ON_CREATE = 0<br><figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">`#vim /usr/local/pnp4nagios/var/perfdata/kddi-deploy/nrpe_traffic.xml`  </span><br><span class="line"></span><br><span class="line">看这个值  </span><br><span class="line"></span><br><span class="line">`&lt;TEMPLATE&gt;nrpe_check_traffic&lt;/TEMPLATE&gt;`  </span><br><span class="line"></span><br><span class="line">然后根据xml中的名字创建模板  </span><br><span class="line"></span><br><span class="line">`#vim /usr/local/pnp4nagios/share/templates/nrpe_check_traffic.php`</span><br></pre></td></tr></table></figure></p>
<p>&lt;?php<br>#</p>
<h1 id="Copyright-c-2006-2010-Joerg-Linge-http-www-pnp4nagios-org"><a href="#Copyright-c-2006-2010-Joerg-Linge-http-www-pnp4nagios-org" class="headerlink" title="Copyright (c) 2006-2010 Joerg Linge (http://www.pnp4nagios.org)"></a>Copyright (c) 2006-2010 Joerg Linge (<a href="http://www.pnp4nagios.org" target="_blank" rel="external">http://www.pnp4nagios.org</a>)</h1><h1 id="Plugin-check-bmon"><a href="#Plugin-check-bmon" class="headerlink" title="Plugin: check_bmon"></a>Plugin: check_bmon</h1><h1 id="Output-TRAFFIC-OK-in-131-9Bps-out-185Bps"><a href="#Output-TRAFFIC-OK-in-131-9Bps-out-185Bps" class="headerlink" title="Output: TRAFFIC OK|in=131.9Bps; out=185Bps;"></a>Output: TRAFFIC OK|in=131.9Bps; out=185Bps;</h1><p>$opt[1] = “–vertical-label \”Bytes/s\” –title \”$servicedesc\” “;</p>
<p>$def[1]  = “DEF:var1=$RRDFILE[1]:$DS[1]:AVERAGE “ ;<br>$def[1] .= “DEF:var2=$RRDFILE[2]:$DS[2]:AVERAGE “ ;<br>$def[1] .= “CDEF:var3=var2,-1,* “ ;<br>$def[1] .= “AREA:var1#00ff00:\”in\” “ ;<br>$def[1] .= “GPRINT:var1:LAST:\”%.1lf %SBytes last\” “ ;<br>$def[1] .= “GPRINT:var1:AVERAGE:\”%.1lf %SBytes avg\” “ ;<br>$def[1] .= “GPRINT:var1:MAX:\”%.1lf %SBytes max\n\” “ ;</p>
<h1 id="def-1-“AREA-var2-0066FF-”out-”-“"><a href="#def-1-“AREA-var2-0066FF-”out-”-“" class="headerlink" title="$def[1] .= “AREA:var2#0066FF:\”out\” “ ;"></a>$def[1] .= “AREA:var2#0066FF:\”out\” “ ;</h1><p>$def[1] .= “AREA:var3#0066FF:\”out\” “ ;<br>$def[1] .= “GPRINT:var2:LAST:\”%.1lf %SBytes last\” “ ;<br>$def[1] .= “GPRINT:var2:AVERAGE:\”%.1lf %SBytes avg\” “ ;<br>$def[1] .= “GPRINT:var2:MAX:\”%.1lf %SBytes max\” “;<br>?&gt;<br>```<br>pnp template 文档<br><a href="https://docs.pnp4nagios.org/pnp-0.6/tpl_custom" target="_blank" rel="external">https://docs.pnp4nagios.org/pnp-0.6/tpl_custom</a><br>icinga2官方集成pnp4nagios模板攻略<br><a href="http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/addons-plugins?highlight-search=pnp4nagios#addons-graphing-pnp-custom-templates" target="_blank" rel="external">http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/addons-plugins?highlight-search=pnp4nagios#addons-graphing-pnp-custom-templates</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/24/icinga2-pnp4nagios/" data-id="cilvxzsoe000pd9s6homblzd3" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/24/icinga2-pnp4nagios/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cacti-add-multi-devices-graphs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/21/cacti-add-multi-devices-graphs/" class="article-date">
  <time datetime="2015-08-20T18:46:31.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/cacti-add-multi-devices-graphs/">cacti批量添加device和graph</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>cacti添加监控项和绘图项不一般得麻烦，华为s5700交换机有48口，鼠标点得点到死。<br>好在有一些cli工具可以帮助我们批量添加。<br>工具目录：<br>/var/www/html/cli<br>脚本中涉及到的host-id template-id 等各种id请参阅文章底部的使用手册，理明白各id用途再使用本脚本。<br><code>cat add_multi.sh</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># path=/var/www/html/cli</span><br><span class="line">for host_ip in $(cat hosts)</span><br><span class="line">do</span><br><span class="line">    echo $host_ip</span><br><span class="line">    php -q add_device.php --description=$host_ip --ip=&quot;$host_ip&quot; --template=6</span><br><span class="line">    host_id=$(php -q add_graphs.php --list-hosts --quiet|grep $host_ip|awk -F &quot; &quot; &apos;&#123;print $1&#125;&apos;)</span><br><span class="line">    php -q add_graphs.php --host-id=$host_id --graph-type=cg --graph-template-id=24</span><br><span class="line">    ######php add_graphs.php --host-id=$host_id --snmp-field=ifDescr --list-snmp-values</span><br><span class="line">    for host_if in $(php -q add_graphs.php --host-id=$host_id --snmp-field=ifDescr --list-snmp-values --quiet)</span><br><span class="line">    do</span><br><span class="line">        echo $host_if</span><br><span class="line">        php -q add_graphs.php --host-id=$host_id --graph-type=ds --graph-title=&apos;|host_description| - Traffic - |query_ifName|&apos; --graph-template-id=12 --snmp-quer</span><br><span class="line">y-id=3 --snmp-query-type-id=6 --snmp-field=ifDescr --snmp-value=&quot;$host_if&quot;</span><br><span class="line">    done</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<p><code>sh add_multi.sh</code><br><figure class="highlight qml"><table><tr><td class="code"><pre><span class="line">bj-cnc<span class="number">-1.</span>arkii.cn</span><br><span class="line">Adding bj-cnc<span class="number">-1.</span>arkii.cn (bj-cnc-s5700<span class="number">-1.</span>arkii.cn) <span class="keyword">as</span> <span class="string">"Huawei"</span> using SNMP v2 <span class="keyword">with</span> community <span class="string">"public"</span></span><br><span class="line">Success - <span class="keyword">new</span> device-<span class="attribute">id:</span><span class="emphasis"> (100)</span><br><span class="line">Graph</span> Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7835) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6968</span>)</span><br><span class="line">Console9/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7836) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6969</span>, <span class="number">6969</span>)</span><br><span class="line">Eth-Trunk1</span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7837) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6970</span>, <span class="number">6970</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7838) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6971</span>, <span class="number">6971</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">10</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7839) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6972</span>, <span class="number">6972</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">11</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7840) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6973</span>, <span class="number">6973</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">12</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7841) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6974</span>, <span class="number">6974</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">13</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7842) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6975</span>, <span class="number">6975</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">14</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7843) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6976</span>, <span class="number">6976</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">15</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7844) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6977</span>, <span class="number">6977</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">16</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7845) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6978</span>, <span class="number">6978</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">17</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7846) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6979</span>, <span class="number">6979</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">18</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7847) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6980</span>, <span class="number">6980</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">19</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7848) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6981</span>, <span class="number">6981</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">2</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7849) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6982</span>, <span class="number">6982</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">20</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7850) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6983</span>, <span class="number">6983</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">21</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7851) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6984</span>, <span class="number">6984</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">22</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7852) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6985</span>, <span class="number">6985</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">23</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7853) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6986</span>, <span class="number">6986</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">24</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7854) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6987</span>, <span class="number">6987</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">25</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7855) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6988</span>, <span class="number">6988</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">26</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7856) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6989</span>, <span class="number">6989</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">27</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7857) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6990</span>, <span class="number">6990</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">28</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7858) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6991</span>, <span class="number">6991</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">29</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7859) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6992</span>, <span class="number">6992</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">3</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7860) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6993</span>, <span class="number">6993</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">30</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7861) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6994</span>, <span class="number">6994</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">31</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7862) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6995</span>, <span class="number">6995</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">32</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7863) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6996</span>, <span class="number">6996</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">33</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7864) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6997</span>, <span class="number">6997</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">34</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7865) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6998</span>, <span class="number">6998</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">35</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7866) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">6999</span>, <span class="number">6999</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">36</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7867) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7000</span>, <span class="number">7000</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">37</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7868) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7001</span>, <span class="number">7001</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">38</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7869) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7002</span>, <span class="number">7002</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">39</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7870) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7003</span>, <span class="number">7003</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">4</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7871) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7004</span>, <span class="number">7004</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">40</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7872) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7005</span>, <span class="number">7005</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">41</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7873) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7006</span>, <span class="number">7006</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">42</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7874) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7007</span>, <span class="number">7007</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">43</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7875) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7008</span>, <span class="number">7008</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">44</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7876) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7009</span>, <span class="number">7009</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">45</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7877) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7010</span>, <span class="number">7010</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">46</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7878) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7011</span>, <span class="number">7011</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">47</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7879) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7012</span>, <span class="number">7012</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">48</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7880) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7013</span>, <span class="number">7013</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">5</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7881) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7014</span>, <span class="number">7014</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">6</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7882) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7015</span>, <span class="number">7015</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">7</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7883) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7016</span>, <span class="number">7016</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">8</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7884) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7017</span>, <span class="number">7017</span>)</span><br><span class="line">GigabitEthernet0/<span class="number">0</span>/<span class="number">9</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7885) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7018</span>, <span class="number">7018</span>)</span><br><span class="line">InLoopBack0</span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7886) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7019</span>, <span class="number">7019</span>)</span><br><span class="line">MEth0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7887) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7020</span>, <span class="number">7020</span>)</span><br><span class="line">NULL0</span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7888) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7021</span>, <span class="number">7021</span>)</span><br><span class="line">Vlanif1</span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7889) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7022</span>, <span class="number">7022</span>)</span><br><span class="line">Vlanif200</span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7890) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7023</span>, <span class="number">7023</span>)</span><br><span class="line">XGigabitEthernet0/<span class="number">1</span>/<span class="number">1</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7891) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7024</span>, <span class="number">7024</span>)</span><br><span class="line">XGigabitEthernet0/<span class="number">1</span>/<span class="number">2</span></span><br><span class="line">Graph Added - graph-<span class="attribute">id:</span><span class="emphasis"> (7892) - data</span>-source-<span class="attribute">ids</span>: (<span class="number">7025</span>, <span class="number">7025</span>)</span><br></pre></td></tr></table></figure></p>
<p>参考资料<br><a href="http://www.cacti.net/downloads/docs/html/cli_add_graphs.html" target="_blank" rel="external">www.cacti.net</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/21/cacti-add-multi-devices-graphs/" data-id="cilvxzsnf0004d9s6f55l9c75" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/21/cacti-add-multi-devices-graphs/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ssh-automatic" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/18/ssh-automatic/" class="article-date">
  <time datetime="2015-08-18T00:06:45.000Z" itemprop="datePublished">2015-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/ssh-automatic/">自动化中使用ssh命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>有一台master服务器，做自动部署，其中一个环节是使用ssh命令链接新装完系统的服务器，做一些初始化工作，但是由于dhcp池会重复分配IP，ssh在脚本中会报如下两个错误。<br><figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line"><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@</span><br><span class="line">@</span>    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     <span class="comment">@</span><br><span class="line">@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span><span class="comment">@@</span></span><br><span class="line">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br><span class="line">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br><span class="line">It is also possible that the RSA host <span class="built_in">key</span> has just been changed.</span><br><span class="line">The fingerprint <span class="keyword">for</span> the RSA <span class="built_in">key</span> sent by the remote host is</span><br><span class="line">j8:<span class="number">98</span>:o8:cm:<span class="number">23</span>:<span class="number">16</span>:<span class="number">62</span>:cd.</span><br><span class="line">Please contact your <span class="keyword">system</span> administrator.</span><br><span class="line">Add correct host <span class="built_in">key</span> in /root/.ssh/known_hosts to get rid of this message.</span><br><span class="line">Offending <span class="built_in">key</span> in /root/.ssh/known_hosts:<span class="number">6</span></span><br><span class="line">RSA host <span class="built_in">key</span> <span class="keyword">for</span> <span class="number">10.0</span><span class="number">.0</span><span class="number">.13</span> has changed <span class="keyword">and</span> you have requested strict checking.</span><br><span class="line">Host <span class="built_in">key</span> verification failed.</span><br></pre></td></tr></table></figure></p>
<figure class="highlight vbnet"><table><tr><td class="code"><pre><span class="line">The authenticity <span class="keyword">of</span> host <span class="comment">'10.0.0.13 (10.0.0.13)' can't be established.</span></span><br><span class="line">RSA <span class="keyword">key</span> fingerprint <span class="keyword">is</span> j8:<span class="number">98</span>:o8:cm:<span class="number">23</span>:<span class="number">16</span>:<span class="number">62</span>:cd.</span><br><span class="line">Are you sure you want <span class="keyword">to</span> <span class="keyword">continue</span> connecting (yes/no)?</span><br></pre></td></tr></table></figure>
<p>在ssh配置文件中添加如下两行:<br>~/.ssh/config<br><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">StrictHostKeyChecking <span class="literal">no</span></span><br><span class="line">UserKnownHostsFile /dev/<span class="literal">null</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/18/ssh-automatic/" data-id="cilvxzsp60014d9s6u2fpwlzh" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/18/ssh-automatic/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-icinga2-my-notification" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/10/icinga2-my-notification/" class="article-date">
  <time datetime="2015-08-10T02:54:36.000Z" itemprop="datePublished">2015-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/10/icinga2-my-notification/">icinga2添加自定义通知插件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>添加模板<br>/etc/icinga2/conf.d/templates.conf<br><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">template Notification <span class="string">"wechat-host-notification"</span> &#123;</span><br><span class="line">  <span class="attr">command</span> = <span class="string">"wechat-host-notification"</span></span><br><span class="line">  <span class="attr">states</span> = [ Up, Down ]</span><br><span class="line">  <span class="attr">types</span> = [ Problem, Recovery ]</span><br><span class="line">  <span class="attr">period</span> = <span class="string">"24x7"</span></span><br><span class="line">&#125;</span><br><span class="line">template Notification <span class="string">"wechat-service-notification"</span> &#123;</span><br><span class="line">  <span class="attr">command</span> = <span class="string">"wechat-service-notification"</span></span><br><span class="line">  <span class="attr">states</span> = [ OK, Warning, Critical, Unknown ]</span><br><span class="line">  <span class="attr">types</span> = [ Problem, Recovery ]</span><br><span class="line">  <span class="attr">period</span> = <span class="string">"24x7"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>添加command<br>/etc/icinga2/conf.d/commands.conf<br><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">object NotificationCommand <span class="string">"wechat-host-notification"</span> &#123;</span><br><span class="line">  <span class="built_in">import</span> <span class="string">"plugin-notification-command"</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">command</span> = [ SysconfDir + <span class="string">"/icinga2/scripts/wechat-host-notification.sh"</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="attr">env</span> = &#123;</span><br><span class="line">    <span class="attr">NOTIFICATIONTYPE</span> = <span class="string">"$notification.type$"</span></span><br><span class="line">    <span class="attr">HOSTALIAS</span> = <span class="string">"$host.display_name$"</span></span><br><span class="line">    <span class="attr">HOSTADDRESS</span> = <span class="string">"$address$"</span></span><br><span class="line">    <span class="attr">HOSTSTATE</span> = <span class="string">"$host.state$"</span></span><br><span class="line">    <span class="attr">LONGDATETIME</span> = <span class="string">"$icinga.long_date_time$"</span></span><br><span class="line">    <span class="attr">SHORTDATETIME</span> = <span class="string">"$icinga.short_date_time$"</span></span><br><span class="line">    <span class="attr">TIME</span> = <span class="string">"$icinga.time$"</span></span><br><span class="line">    <span class="attr">HOSTOUTPUT</span> = <span class="string">"$host.output$"</span></span><br><span class="line">    <span class="attr">NOTIFICATIONAUTHORNAME</span> = <span class="string">"$notification.author$"</span></span><br><span class="line">    <span class="attr">NOTIFICATIONCOMMENT</span> = <span class="string">"$notification.comment$"</span></span><br><span class="line">    <span class="attr">HOSTDISPLAYNAME</span> = <span class="string">"$host.display_name$"</span></span><br><span class="line">    <span class="attr">USEREMAIL</span> = <span class="string">"$user.email$"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">object NotificationCommand <span class="string">"wechat-service-notification"</span> &#123;</span><br><span class="line">  <span class="built_in">import</span> <span class="string">"plugin-notification-command"</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">command</span> = [ SysconfDir + <span class="string">"/icinga2/scripts/wechat-service-notification.sh"</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="attr">env</span> = &#123;</span><br><span class="line">    <span class="attr">NOTIFICATIONTYPE</span> = <span class="string">"$notification.type$"</span></span><br><span class="line">    <span class="attr">SERVICEDESC</span> = <span class="string">"$service.name$"</span></span><br><span class="line">    <span class="attr">HOSTALIAS</span> = <span class="string">"$host.display_name$"</span></span><br><span class="line">    <span class="attr">HOSTADDRESS</span> = <span class="string">"$address$"</span></span><br><span class="line">    <span class="attr">SERVICESTATE</span> = <span class="string">"$service.state$"</span></span><br><span class="line">    <span class="attr">LONGDATETIME</span> = <span class="string">"$icinga.long_date_time$"</span></span><br><span class="line">    <span class="attr">SHORTDATETIME</span> = <span class="string">"$icinga.short_date_time$"</span></span><br><span class="line">    <span class="attr">TIME</span> = <span class="string">"$icinga.time$"</span></span><br><span class="line">    <span class="attr">SERVICEOUTPUT</span> = <span class="string">"$service.output$"</span></span><br><span class="line">    <span class="attr">NOTIFICATIONAUTHORNAME</span> = <span class="string">"$notification.author$"</span></span><br><span class="line">    <span class="attr">NOTIFICATIONCOMMENT</span> = <span class="string">"$notification.comment$"</span></span><br><span class="line">    <span class="attr">HOSTDISPLAYNAME</span> = <span class="string">"$host.display_name$"</span></span><br><span class="line">    <span class="attr">SERVICEDISPLAYNAME</span> = <span class="string">"$service.display_name$"</span></span><br><span class="line">    <span class="attr">USEREMAIL</span> = <span class="string">"$user.email$"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注册通知到主机和服务<br>/etc/icinga2/conf.d/notifications.conf<br><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">apply Notification <span class="string">"wechat-icingaadmin"</span> to Host &#123;</span><br><span class="line">  import <span class="string">"wechat-host-notification"</span></span><br><span class="line">  user_groups = host<span class="selector-class">.vars</span><span class="selector-class">.notification</span><span class="selector-class">.mail</span><span class="selector-class">.groups</span></span><br><span class="line">  assign where host<span class="selector-class">.vars</span><span class="selector-class">.notification</span><span class="selector-class">.mail</span></span><br><span class="line">  interval = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply Notification <span class="string">"wechat-icingaadmin"</span> to Service &#123;</span><br><span class="line">  import <span class="string">"wechat-service-notification"</span></span><br><span class="line">  user_groups = host<span class="selector-class">.vars</span><span class="selector-class">.notification</span><span class="selector-class">.mail</span><span class="selector-class">.groups</span></span><br><span class="line">  assign where host<span class="selector-class">.vars</span><span class="selector-class">.notification</span><span class="selector-class">.mail</span></span><br><span class="line">  interval = <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>路径/etc/icinga2/scripts  </p>
<p><code># cat wechat-host-notification.sh</code>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">template=\`cat &lt;&lt;TEMPLATE</span><br><span class="line"><span class="variable">$SHORTDATETIME</span>|<span class="variable">$HOSTALIAS</span>|<span class="variable">$HOSTADDRESS</span>|<span class="variable">$HOSTSTATE</span>|<span class="variable">$HOSTOUTPUT</span></span><br><span class="line">TEMPLATE</span><br><span class="line">\`</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/send_wechat.py <span class="variable">$USEREMAIL</span> <span class="string">"<span class="variable">$template</span>"</span></span><br></pre></td></tr></table></figure>
<p><code># cat wechat-service-notification.sh</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">template=\`cat &lt;&lt;TEMPLATE</span><br><span class="line"><span class="variable">$SHORTDATETIME</span>|<span class="variable">$HOSTALIAS</span>|<span class="variable">$HOSTADDRESS</span>|<span class="variable">$SERVICEDESC</span>|<span class="variable">$SERVICESTATE</span>|<span class="variable">$SERVICEOUTPUT</span></span><br><span class="line">TEMPLATE</span><br><span class="line">\`</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/send_wechat.py <span class="variable">$USEREMAIL</span> <span class="string">"<span class="variable">$template</span>"</span></span><br></pre></td></tr></table></figure>
<p>检查配置文件<br>icinga2 daemon -C</p>
<p>重启icinga2</p>
<p>service icinga2 restart</p>
<p>相关资料：  <a href="http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/migration" target="_blank" rel="external">http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/migration</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/10/icinga2-my-notification/" data-id="cilvxzspc001ad9s6dev9m5k2" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/10/icinga2-my-notification/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mp4box-concat-mp4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/07/mp4box-concat-mp4/" class="article-date">
  <time datetime="2015-08-06T23:22:14.000Z" itemprop="datePublished">2015-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/07/mp4box-concat-mp4/">OSX下合并MP4文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>brew install mp4box</code><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MP4Box -cat 1.mp4 -cat 2.mp4 -cat 3.mp4 output.mp4</span><br><span class="line">Appending file 1.mp4</span><br><span class="line">No suitable destination track found - creating new one (<span class="built_in">type</span> vide)</span><br><span class="line">No suitable destination track found - creating new one (<span class="built_in">type</span> soun)</span><br><span class="line">Appending file 2.mp4                             </span><br><span class="line">Appending file 3.mp4                             </span><br><span class="line">Saving to output.mp4: 0.500 secs Interleaving</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/07/mp4box-concat-mp4/" data-id="cilvxzsoo000ud9s6s6ztm8vy" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/07/mp4box-concat-mp4/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-gitlab-service-deploy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/gitlab-service-deploy/" class="article-date">
  <time datetime="2015-08-05T19:46:05.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/gitlab-service-deploy/">gitlab服务搭建，配置ldap登陆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>准备数据目录<br><code>mkdir -p /srv/gitlab/config /srv/gitlab/logs /srv/gitlab/data</code></p>
<p>docker-compose.yml文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitlabCE:</span><br><span class="line">  image: gitlab/gitlab-ce</span><br><span class="line">  dns: 172.17.42.1</span><br><span class="line">  ports:</span><br><span class="line">    - &quot;8443:443&quot;</span><br><span class="line">    - &quot;8008:80&quot;</span><br><span class="line">    - &quot;2222:22&quot;</span><br><span class="line">  volumes:</span><br><span class="line">    - /srv/gitlab/config:/etc/gitlab</span><br><span class="line">    - /srv/gitlab/logs:/var/log/gitlab</span><br><span class="line">    - /srv/gitlab/data:/var/opt/gitlab</span><br><span class="line">  environment:</span><br><span class="line">    - PATH=/sbin:/usr/sbin:/bin:/usr/bin</span><br></pre></td></tr></table></figure></p>
<p>配置ldap登陆<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitlab_rails[&apos;ldap_enabled&apos;] = true</span><br><span class="line">gitlab_rails[&apos;ldap_servers&apos;] = YAML.load &lt;&lt;-&apos;EOS&apos; # remember to close this block with &apos;EOS&apos; below</span><br><span class="line">  main: # &apos;main&apos; is the GitLab &apos;provider ID&apos; of this LDAP server</span><br><span class="line">    label: &apos;LDAP&apos;</span><br><span class="line">    host: &apos;10.x.xx.xx&apos;</span><br><span class="line">    port: 389</span><br><span class="line">    uid: &apos;sAMAccountName&apos;</span><br><span class="line">    method: &apos;plain&apos; # &quot;tls&quot; or &quot;ssl&quot; or &quot;plain&quot;</span><br><span class="line">    bind_dn: &apos;cn=sysop,ou=zol,dc=office,dc=zol&apos;</span><br><span class="line">    password: &apos;password&apos;</span><br><span class="line">    active_directory: true</span><br><span class="line">    allow_username_or_email_login: false</span><br><span class="line">    block_auto_created_users: false</span><br><span class="line">    base: &apos;ou=zol,dc=office,dc=zol&apos;</span><br><span class="line">    user_filter: &apos;&apos;</span><br><span class="line">EOS</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/06/gitlab-service-deploy/" data-id="cilvxzso0000hd9s6tpwtr0xd" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/06/gitlab-service-deploy/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-centos6-update-kernel-to-3-10" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/04/centos6-update-kernel-to-3-10/" class="article-date">
  <time datetime="2015-08-04T03:21:40.000Z" itemprop="datePublished">2015-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/04/centos6-update-kernel-to-3-10/">CentOS6免编译yum升级3.10内核</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用elrepo来更新<br>导入key<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span><br></pre></td></tr></table></figure></p>
<p>安装repo<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm</span><br></pre></td></tr></table></figure></p>
<p>安装kernel<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install kernel<span class="_">-lt</span> kernel<span class="_">-lt</span>-firmware kernel<span class="_">-lt</span>-headers</span><br></pre></td></tr></table></figure></p>
<p>启用新kernel<br><code>vi /etc/grub.conf</code><br>修改<br><code>default=0</code><br>查看当前kernel版本<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># uname -a</span></span><br><span class="line">Linux localhost.localdomain 2.6.32-504.30.3.el6.x86_64 <span class="comment">#1 SMP Wed Jul 15 10:13:09 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure></p>
<p>重启系统<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># uname -a</span></span><br><span class="line">Linux localhost.localdomain 3.10.84-1.el6.elrepo.x86_64 <span class="comment">#1 SMP Sat Jul 11 11:33:48 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/08/04/centos6-update-kernel-to-3-10/" data-id="cilvxzsnk0008d9s622xa6m9t" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/08/04/centos6-update-kernel-to-3-10/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-elk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/25/elk/" class="article-date">
  <time datetime="2015-07-25T01:31:43.000Z" itemprop="datePublished">2015-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/25/elk/">elk分析nginx访问日志</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用rsyslog + elk分析nginx访问日志。<br>elk日志分析栈，即elasticsearch logstash kibana。<br>为了减少对现有系统的改造，故使用rsyslog来读取应用服务器的nginx access_log，使用udp的方式发送到elk日志分析服务器的logstash，logstash解析日志后写入elasticsearch，进行存储和索引，最后由kibana来查询elasticsearch中的数据进行分析。</p>
<p>nginx.conf<br><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">log_format</span>  main  <span class="string">'<span class="variable">$request_time</span> <span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] "<span class="variable">$request</span>" <span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> "<span class="variable">$http_referer</span>" "<span class="variable">$http_user_agent</span>" "<span class="variable">$http_x_forwarded_for</span>"'</span>;</span><br></pre></td></tr></table></figure></p>
<p>nginx日志<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0.083 111.112.113.119 - - [25/Jul/2015:17:39:12 +0800] &quot;POST /m/write?&amp;title=xxx&amp;img= HTTP/1.1&quot; 200 83 &quot;-&quot; &quot;Dalvik/1.6.0 (Linux; U; Android 4.4.4; MI 4LTE MIUI/V6.5.3.0.KXGCNCD)&quot; &quot;-&quot;</span><br></pre></td></tr></table></figure></p>
<p>/etc/rsyslog.conf<br><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line">$ModLoad imuxsock</span><br><span class="line">$ModLoad imklog</span><br><span class="line">$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat</span><br><span class="line">$IncludeConfig /etc/rsyslog.d/*.conf</span><br><span class="line">*.info;mail.none;authpriv.none;cron.none                /var/log/messages</span><br><span class="line">authpriv.*                                              /var/log/secure</span><br><span class="line">mail.*                                                  -/var/log/maillog</span><br><span class="line">cron.*                                                  /var/log/cron</span><br><span class="line">*.emerg                                                 *</span><br><span class="line">uucp,news.crit                                          /var/log/spooler</span><br><span class="line">local7.*                                                /var/log/boot.log</span><br><span class="line">$ModLoad imfile</span><br><span class="line">$InputFileName /var/log/nginx/access.log</span><br><span class="line">$InputFileTag nginx-access:</span><br><span class="line">$InputFileStateFile state-nginx-accesslog</span><br><span class="line">$InputRunFileMonitor</span><br><span class="line">$InputFilePollInterval <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> $programname == <span class="string">'nginx-access'</span> <span class="keyword">then</span> @@YOUR_ELK_IP:<span class="number">514</span></span><br><span class="line"><span class="keyword">if</span> $programname == <span class="string">'nginx-access'</span> <span class="keyword">then</span> ~</span><br></pre></td></tr></table></figure></p>
<p>最终logstash接收到的信息如下：<br>里面包含了一些rsyslog附加的信息。<br><figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line">&lt;<span class="number">133</span>&gt;Jul <span class="number">25</span> <span class="number">10</span>:<span class="number">37</span>:<span class="number">45</span> APPSERVE_RNAME nginx-access: <span class="number">0</span>.<span class="number">455</span> <span class="number">111.112.113.119</span> - - <span class="string">[25/Jul/2015:10:37:43 +0800]</span> <span class="string">"<span class="keyword">POST</span> /m/write?&amp;title=xxx&amp;create=1 HTTP/1.1"</span> <span class="number">200</span> <span class="number">121</span> <span class="string">"-"</span> <span class="string">"Dalvik/v3.3.86_update2 (Linux; U; Android 4.4.4; m1 Build/KTU84P)"</span> <span class="string">"-"</span></span><br></pre></td></tr></table></figure></p>
<p>下面是最终的filter<br>logstash.conf<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">  tcp &#123;</span><br><span class="line">    port =&gt; <span class="number">514</span></span><br><span class="line">    type =&gt; syslog</span><br><span class="line">  &#125;</span><br><span class="line">  udp &#123;</span><br><span class="line">    port =&gt; <span class="number">514</span></span><br><span class="line">    type =&gt; syslog</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">filter &#123;</span><br><span class="line">  <span class="keyword">if</span> [type] == <span class="string">"syslog"</span> &#123;</span><br><span class="line">    grok &#123;</span><br><span class="line">      match =&gt; &#123; <span class="string">"message"</span> =&gt; <span class="string">"%&#123;SYSLOGTIMESTAMP:syslog_timestamp&#125; %&#123;SYSLOGHOST:syslog_hostname&#125; %&#123;DATA:syslog_program&#125;(?:\[%&#123;POSINT:syslog_pid&#125;\])?: %&#123;NUMBER:request_time&#125; %&#123;IPORHOST:client_ip&#125; \- (%&#123;WORD:remote_user&#125;|-) \[%&#123;HTTPDATE:timestamp&#125;\] \"(?:%&#123;WORD:http_verb&#125; %&#123;NOTSPACE:http_request&#125;(?: HTTP/%&#123;NUMBER:http _version&#125;)?)\" %&#123;NUMBER:http_status_code&#125; (?:%&#123;NUMBER:bytes_read&#125;|-) %&#123;QS:referrer&#125; %&#123;QS:agent&#125; \"(%&#123;IP:x_forwarder_for&#125;|-)\""</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    kv &#123;</span><br><span class="line">      source =&gt; <span class="string">"http_request"</span></span><br><span class="line">      prefix =&gt; <span class="string">"arg_"</span></span><br><span class="line">      field_split =&gt; <span class="string">"&amp;?"</span></span><br><span class="line">      value_split =&gt; <span class="string">"="</span></span><br><span class="line">      exclude_keys =&gt; [ <span class="string">"title"</span>, <span class="string">"content"</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">    urldecode &#123;</span><br><span class="line">      field =&gt; <span class="string">"http_request"</span></span><br><span class="line">    &#125;</span><br><span class="line">    mutate &#123;</span><br><span class="line">      remove_field =&gt; [ <span class="string">"message"</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">    geoip &#123;</span><br><span class="line">      source =&gt; <span class="string">"client_ip"</span></span><br><span class="line">    &#125;</span><br><span class="line">    syslog_pri &#123; &#125;</span><br><span class="line">    date &#123;</span><br><span class="line">      match =&gt; [ <span class="string">"timestamp"</span>, <span class="string">"d/MMM/y:HH:mm:ss Z"</span>, <span class="string">"MMM  d HH:mm:ss"</span>, <span class="string">"MMM dd HH:mm:ss"</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123; </span><br><span class="line">    host =&gt; <span class="string">"elk-elasticsearch"</span></span><br><span class="line">    protocol =&gt; <span class="string">"http"</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/07/25/elk/" data-id="cilvxzsnw000ed9s6xwn9n4ei" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/07/25/elk/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-yuman-zhuang-dellguan-fang-openipmishi-bai-wen-ti" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/24/yuman-zhuang-dellguan-fang-openipmishi-bai-wen-ti/" class="article-date">
  <time datetime="2015-07-24T03:33:58.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/yuman-zhuang-dellguan-fang-openipmishi-bai-wen-ti/">yum安装dell官方OpenIPMI失败问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>dell openmanage repo CentOS5<br>安装 OpenIPMI时报如下错误：<br><a href="http://mirrors.private.com/hardware/dell/5/x86_64/ipmitool/OpenIPMI-2.0.16-99.dell.4.99.1.el5.x86_64.rpm" target="_blank" rel="external">http://mirrors.private.com/hardware/dell/5/x86_64/ipmitool/OpenIPMI-2.0.16-99.dell.4.99.1.el5.x86_64.rpm</a>: [Errno -1] Package does not match intended download<br>Trying other mirror.<br>问题分析：<br>从mirror服务器的nginx访问日志中看，是200状态，表明yum成功下载了该rpm包<br>于是怀疑是repo数据库中此rpm包的值不对，于是用createrepo命令来创建</p>
<p>又遇到了Error performing checksum错误<br>原因为：<br>CentOS5中的yum不能计算sha256，于是改用 sha1算法来生成针对centos5版本的repo数据库</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="meta-keyword">/usr/</span>bin/createrepo -s sha1 --simple-md-filenames -d -o <span class="meta-keyword">/mirrors/</span>hardware<span class="meta-keyword">/dell/</span>rh50 <span class="meta-keyword">/mirrors/</span>hardware<span class="meta-keyword">/dell/</span>rh50</span><br><span class="line"><span class="meta-keyword">/usr/</span>bin/createrepo -s sha1 --simple-md-filenames -d -o <span class="meta-keyword">/mirrors/</span>hardware<span class="meta-keyword">/dell/</span>rh50_64 <span class="meta-keyword">/mirrors/</span>hardware<span class="meta-keyword">/dell/</span>rh50_64</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/07/24/yuman-zhuang-dellguan-fang-openipmishi-bai-wen-ti/" data-id="cilvxzspb0019d9s6yu9je8o9" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/07/24/yuman-zhuang-dellguan-fang-openipmishi-bai-wen-ti/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ghosttian-jia-dai-ma-gao-liang-highlight-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/24/ghosttian-jia-dai-ma-gao-liang-highlight-js/" class="article-date">
  <time datetime="2015-07-24T01:42:51.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/ghosttian-jia-dai-ma-gao-liang-highlight-js/">ghost添加代码高亮highlight.js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下载highlight代码，拷贝到当前使用主题的assets目录<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mv highlight ~/blog/content/themes/casper-zh/assets/hl</span><br><span class="line">vim ~/blog/content/themes/casper-zh/default.hbs</span><br></pre></td></tr></table></figure></p>
<p>修改模板，css添加到<code>&lt;head&gt;</code>标签内，js添加到<code>&lt;/body&gt;</code>前面。<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;asset "</span><span class="string">hl</span>/<span class="attr">styles</span>/<span class="attr">github-gist.css</span>"&#125;&#125;" /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;asset "</span><span class="string">hl</span>/<span class="attr">highlight.pack.js</span>"&#125;&#125;"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">hljs.initHighlightingOnLoad();</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>重启ghost<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo service supervisord restart</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/07/24/ghosttian-jia-dai-ma-gao-liang-highlight-js/" data-id="cilvxzsny000fd9s6fuqrar0i" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/07/24/ghosttian-jia-dai-ma-gao-liang-highlight-js/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vmware-esxi-jian-kong" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/23/vmware-esxi-jian-kong/" class="article-date">
  <time datetime="2015-07-22T22:23:00.000Z" itemprop="datePublished">2015-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/23/vmware-esxi-jian-kong/">vmware ESXi 监控</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vicfg-snmp --server 10.1.0.15 --username USER --password PASS --t 10.19.8.15@162/public</span><br><span class="line">vicfg-snmp --server 10.1.0.15  --username USER --password PASS --enable</span><br><span class="line">snmpwalk -v 1 -c public 10.1.0.15 1.3.6.1.2.1.25.3.3</span><br></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.1</span> = <span class="string">INTEGER:</span> <span class="number">5</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.2</span> = <span class="string">INTEGER:</span> <span class="number">4</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.3</span> = <span class="string">INTEGER:</span> <span class="number">5</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.4</span> = <span class="string">INTEGER:</span> <span class="number">4</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.5</span> = <span class="string">INTEGER:</span> <span class="number">4</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.6</span> = <span class="string">INTEGER:</span> <span class="number">5</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.7</span> = <span class="string">INTEGER:</span> <span class="number">4</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrProcessorLoad<span class="number">.8</span> = <span class="string">INTEGER:</span> <span class="number">5</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrNetworkIfIndex<span class="number">.10</span> = <span class="string">INTEGER:</span> <span class="number">1</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrNetworkIfIndex<span class="number">.11</span> = <span class="string">INTEGER:</span> <span class="number">2</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrNetworkIfIndex<span class="number">.12</span> = <span class="string">INTEGER:</span> <span class="number">3</span></span><br><span class="line">HOST-RESOURCES-<span class="string">MIB:</span>:hrNetworkIfIndex<span class="number">.13</span> = <span class="string">INTEGER:</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/07/23/vmware-esxi-jian-kong/" data-id="cilvxzsp70016d9s6scgx0512" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/07/23/vmware-esxi-jian-kong/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-iptables-nat-dong-tai-qie-huan-ip" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/07/17/iptables-nat-dong-tai-qie-huan-ip/" class="article-date">
  <time datetime="2015-07-17T01:33:45.000Z" itemprop="datePublished">2015-07-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/17/iptables-nat-dong-tai-qie-huan-ip/">iptables NAT 动态切换 IP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>iptables 动态切换出口IP<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 100); <span class="keyword">do</span> iptables -t nat -I POSTROUTING -m statistic --mode nth --packet 0 --every 5 -j SNAT --to-source 10.0.0.<span class="variable">$i</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wuliwala.net/2015/07/17/iptables-nat-dong-tai-qie-huan-ip/" data-id="cilvxzsoh000rd9s66xfl7qfq" class="article-share-link">Share</a>
      
        <a href="http://blog.wuliwala.net/2015/07/17/iptables-nat-dong-tai-qie-huan-ip/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/03/14/migrate-to-git-from-svn/">Migration From Subversion(svn) to Git</a>
          </li>
        
          <li>
            <a href="/2016/03/08/searchcode-server-community-deploy/">Searchcode Server Community Deploy</a>
          </li>
        
          <li>
            <a href="/2016/03/01/wall-e-web-deployment/">Wall-E web deployment</a>
          </li>
        
          <li>
            <a href="/2016/02/15/ionic-web-app-dev/">ionic hybrid app development</a>
          </li>
        
          <li>
            <a href="/2016/01/25/bitbar-plugin-icinga-overview/">BitBar plugin icinga2 overview</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/dev/" style="font-size: 20px;">dev</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/ionic/" style="font-size: 10px;">ionic</a> <a href="/tags/monitoring/" style="font-size: 10px;">monitoring</a> <a href="/tags/sysops/" style="font-size: 10px;">sysops</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dev/">dev</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/">devops</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ionic/">ionic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitoring/">monitoring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sysops/">sysops</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 arkii<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="http://blog.wuliwala.net" class="mobile-nav-link">Home</a>
  
    <a href="http://blog.wuliwala.net/archives" class="mobile-nav-link">Archives</a>
  
    <a href="http://blog.wuliwala.net/about" class="mobile-nav-link">About</a>
  
    <a href="https://github.com/arkii" class="mobile-nav-link">GitHub</a>
  
    <a href="https://hub.docker.com/u/arkii" class="mobile-nav-link">DockerHub</a>
  
</nav>
    
<script>
  var disqus_shortname = 'blog-arkii';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> -->
<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>